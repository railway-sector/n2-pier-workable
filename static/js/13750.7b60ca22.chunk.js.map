{"version":3,"file":"static/js/13750.7b60ca22.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/3d/analysis/AnalysisView3D.js","../node_modules/@arcgis/core/views/interactive/AnalysisToolBase.js","../node_modules/@arcgis/core/views/analysis/analysisViewUtils.js","../node_modules/@arcgis/core/chunks/Viewshed.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/LocalFromScreenSpace.glsl.js","../node_modules/@arcgis/core/analysis/Viewshed.js","../node_modules/@arcgis/core/views/3d/analysis/Viewshed/ViewshedConfiguration.js","../node_modules/@arcgis/core/views/3d/analysis/Viewshed/viewshedToolUtils.js","../node_modules/@arcgis/core/views/3d/analysis/Viewshed/FieldOfViewManipulation.js","../node_modules/@arcgis/core/views/3d/analysis/Viewshed/ArrowManipulator.js","../node_modules/@arcgis/core/views/3d/analysis/Viewshed/ScaleOrientManipulation.js","../node_modules/@arcgis/core/views/3d/analysis/Viewshed/viewshedToolManipulatorUtils.js","../node_modules/@arcgis/core/views/3d/analysis/Viewshed/ViewshedSubTool.js","../node_modules/@arcgis/core/views/3d/analysis/Viewshed/ViewshedTool.js","../node_modules/@arcgis/core/views/3d/interactive/visualElements/ViewshedShapeVisualElement.js","../node_modules/@arcgis/core/views/3d/analysis/Viewshed/ViewshedVisualization.js","../node_modules/@arcgis/core/views/3d/analysis/Viewshed/ViewshedAnalysisVisualization.js","../node_modules/@arcgis/core/views/3d/analysis/Viewshed/ViewshedComputedData.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/ViewshedFaceCamera.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/ViewshedShadowMap.js","../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ViewshedTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Viewshed.js","../node_modules/@arcgis/core/views/3d/analysis/ViewshedAnalysisView3D.js","../node_modules/@arcgis/core/analysis/featureReferenceUtils.js","../node_modules/@arcgis/core/views/interactive/ToolIntersector.js","../node_modules/@arcgis/core/views/3d/webgl-engine/materials/TriangleMaterial.js","../node_modules/@arcgis/core/views/support/geometry2dUtils.js","../node_modules/@arcgis/core/views/3d/analysis/Slice/sliceToolConfig.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{makeHandle as t}from\"../../../core/handleUtils.js\";import r from\"../../../core/Promise.js\";import{property as i}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";const s=s=>{let n=class extends(r.EsriPromiseMixin(s)){constructor(){super(...arguments),this.parent=null,this._userInteractive=!1,this._interactiveViewModelCount=0}get interactive(){return this._interactiveViewModelCount>0||this._userInteractive}set interactive(e){this._userInteractive=e}get updating(){return!1}get visible(){return null==this.parent||this.parent.visible&&!this.parent.suspended}set visible(e){this._overrideIfSome(\"visible\",e)}forceInteractive(){return this._interactiveViewModelCount++,t((()=>this._interactiveViewModelCount--))}};return e([i({constructOnly:!0})],n.prototype,\"parent\",void 0),e([i({constructOnly:!0})],n.prototype,\"view\",void 0),e([i({type:Boolean})],n.prototype,\"interactive\",null),e([i()],n.prototype,\"_userInteractive\",void 0),e([i({readOnly:!0})],n.prototype,\"updating\",null),e([i()],n.prototype,\"visible\",null),e([i()],n.prototype,\"_interactiveViewModelCount\",void 0),n=e([o(\"esri.views.3d.analysis.AnalysisView3D\")],n),n};export{s as AnalysisView3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../../chunks/tslib.es6.js\";import{watch as e,syncAndInitial as t}from\"../../core/reactiveUtils.js\";import\"../../core/Logger.js\";import\"../../core/has.js\";import\"../../core/RandomLCG.js\";import\"../../core/Error.js\";import{subclass as r}from\"../../core/accessorSupport/decorators/subclass.js\";import{InteractiveToolBase as i}from\"./InteractiveToolBase.js\";let o=class extends i{constructor(s){super(s)}initialize(){this.addHandles(e((()=>this.analysisViewData.visible),(s=>this.visible=s),t))}deactivate(){this.onDeactivate(),this.created||this.analysis.clear()}resetCreated(){this._set(\"created\",!1)}};o=s([r(\"esri.views.interactive.AnalysisToolBase\")],o);export{o as AnalysisToolBase};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{createTask as o}from\"../../core/asyncUtils.js\";import{handlesGroup as t}from\"../../core/handleUtils.js\";import{removeMaybe as e}from\"../../core/maybe.js\";import{throwIfAborted as n,isAbortError as i,onAbort as a}from\"../../core/promiseUtils.js\";import{watch as r,syncAndInitial as s,on as l,whenOnce as c}from\"../../core/reactiveUtils.js\";function u(t,n){t.interactive=!0;const{tool:i,view:r}=t;r.activeTool=i;let s=a(n,(()=>{r.activeTool===i&&(r.activeTool=null)}));return o((async o=>{await c((()=>!t.tool?.active),o),s=e(s)}),n)}function m(o,t){return r((()=>o.interactive),(()=>p(o,t)),s)}function p(o,t){o.interactive?v(o,t):f(o)}function v(o,t){f(o);const{view:e,analysis:n}=o,i=new t({view:e,analysis:n,analysisViewData:o});return o.tool=i,e.tools.add(i),i}function f(o){const{view:t,tool:e}=o;null!=e&&(t.tools.remove(e),o.tool=null)}function y(e,a){const r=e.userOperation,s=o((async o=>{if(r){const t=r.promise.catch((()=>{}));r?.abort(),await t,n(o)}const s=u(e,{signal:o}),c=a?.shouldRejectOnCancel??(()=>!0),m=t([l((()=>e.tool),\"cancel\",(()=>{c()&&s.abort()}))]),{tool:p}=e;try{p&&(p.resetCreated(),a?.onToolActivated?.(p)),await s.promise,n(o)}catch(v){if(o.aborted||!i(v)||c())throw v}finally{m?.remove()}}),{signal:a?.abortOptions?.signal});return e.userOperation=s,s.promise.finally((()=>{e.userOperation===s&&(e.userOperation=null)}))}async function d(o,t){const e=o.analysis.clone();return await y(o,{abortOptions:t?.placementOptions,onToolActivated:t?.onToolActivated,shouldRejectOnCancel:()=>{const{analysis:t}=o;return!t.valid||t.equals(e)}}),{}}export{u as activateAnalysisViewTool,m as connectAnalysisViewToTool,f as removeAnalysisViewTool,y as startExclusiveInteractiveOperation,d as startPlaceOperation};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{invertOrIdentity as e}from\"../core/libs/gl-matrix-2/math/mat4.js\";import{IDENTITY as i,create as o}from\"../core/libs/gl-matrix-2/factories/mat4f64.js\";import{ScreenSpacePass as t}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.glsl.js\";import{ReadDepth as s}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadDepth.glsl.js\";import{PiUtils as a}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/PiUtils.glsl.js\";import{LocalFromScreenSpacePassParameters as r,localFromScreenSpace as n}from\"../views/3d/webgl-engine/core/shaderLibrary/util/LocalFromScreenSpace.glsl.js\";import{Float2PassUniform as d}from\"../views/3d/webgl-engine/core/shaderModules/Float2PassUniform.js\";import{Float3PassUniform as l}from\"../views/3d/webgl-engine/core/shaderModules/Float3PassUniform.js\";import{FloatPassUniform as h}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{FloatsPassUniform as v}from\"../views/3d/webgl-engine/core/shaderModules/FloatsPassUniform.js\";import{glsl as c}from\"../views/3d/webgl-engine/core/shaderModules/glsl.js\";import{IntegerPassUniform as w}from\"../views/3d/webgl-engine/core/shaderModules/IntegerPassUniform.js\";import{Matrix4BindUniform as f}from\"../views/3d/webgl-engine/core/shaderModules/Matrix4BindUniform.js\";import{Matrix4sPassUniform as p}from\"../views/3d/webgl-engine/core/shaderModules/Matrix4sPassUniform.js\";import{Texture2DBindUniform as m}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DBindUniform.js\";import{Texture2DPassUniform as g}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";import{ShaderBuilder as u}from\"../views/webgl/ShaderBuilder.js\";class x extends r{constructor(){super(...arguments),this.shadowMap={depthTexture:null,nearFar:[1,100],numActiveFaces:1,atlasRegions:[[0,0,1,1]]},this.targetVector=[1,0,0],this.upVector=[0,0,1],this.fovs=[45,45],this.headingAndTilt=[0,0],this.observerOffset=[0,0,0],this.projectionMatrices=i.flat(),this.viewMatrices=i.flat(),this.volumeOffset=0}}function V(){const i=new u,o=i.fragment;return i.include(t),i.include(n),o.include(s),o.include(a),o.uniforms.add(new m(\"depthTexture\",(e=>e.depth?.attachment)),new f(\"inverseProjectionMatrix\",(e=>e.camera.inverseProjectionMatrix)),new f(\"inverseViewNormalMatrix\",(({camera:i})=>e(b,i.viewInverseTransposeMatrix))),new l(\"viewshedObserverOffset\",(e=>e.observerOffset)),new l(\"viewshedTargetVector\",(e=>e.targetVector)),new l(\"viewshedUpVector\",(e=>e.upVector)),new d(\"viewshedFOVs\",(e=>e.fovs)),new d(\"viewshedHeadingAndTilt\",(e=>e.headingAndTilt)),new d(\"viewshedNearFar\",(e=>e.shadowMap.nearFar??[1,100])),new h(\"viewshedVolumeOffset\",(e=>e.volumeOffset)),new g(\"viewshedShadowMap\",(e=>e.shadowMap.depthTexture)),new p(\"viewshedProjectionMatrices\",(e=>e.projectionMatrices),6),new p(\"viewshedViewMatrices\",(e=>e.viewMatrices),6),new w(\"viewshedNumFaces\",(e=>e.shadowMap.numActiveFaces)),new v(\"viewshedAtlasRegions\",(e=>e.shadowMap.atlasRegions.flat()),24),new g(\"normalMap\",(e=>e.normals))),o.constants.add(\"visibleColor\",\"vec4\",[0,1,0,.5]),o.constants.add(\"occludedColor\",\"vec4\",[1,0,0,.5]),o.code.add(c`vec2 getViewshedUv(vec4 worldPosition, int face) {\nmat4 viewshedMatrix = viewshedProjectionMatrices[face];\nvec4 viewshedUv4 = viewshedMatrix * worldPosition;\nvec3 viewshedUv = viewshedUv4.xyz / viewshedUv4.w;\nreturn viewshedUv.xy;\n}\nfloat viewshedDepthToFloat(float depth) {\nreturn (depth - viewshedNearFar[0]) / (viewshedNearFar[1] - viewshedNearFar[0]);\n}\nfloat getOrthographicDepthToViewshed(vec4 worldPosition, int face) {\nmat4 viewshedViewMatrix = viewshedViewMatrices[face];\nvec4 viewshedUv4 = viewshedViewMatrix * worldPosition;\nvec3 viewshedUv = viewshedUv4.xyz / viewshedUv4.w;\nfloat depth = -viewshedUv.z;\nreturn viewshedDepthToFloat(depth);\n}\nfloat viewshedReadShadowMapDepth(sampler2D _viewshedShadowmap, ivec2 uv) {\nreturn texelFetch(_viewshedShadowmap, uv, 0).r;\n}\nfloat viewshedFilterShadow(sampler2D _viewshedShadowmap, vec2 uv) {\nvec2 uvScaled = uv * vec2(textureSize(_viewshedShadowmap, 0));\nvec2 st    = fract(uvScaled);\nivec2 base = ivec2(uvScaled);\nfloat s00 = viewshedReadShadowMapDepth( _viewshedShadowmap, ivec2(base.x,     base.y    ));\nfloat s10 = viewshedReadShadowMapDepth( _viewshedShadowmap, ivec2(base.x + 1, base.y    ));\nfloat s11 = viewshedReadShadowMapDepth( _viewshedShadowmap, ivec2(base.x + 1, base.y + 1));\nfloat s01 = viewshedReadShadowMapDepth( _viewshedShadowmap, ivec2(base.x,     base.y + 1));\nreturn mix(mix(s00, s10, st.x), mix(s01, s11, st.x), st.y);\n}\nfloat viewshedTextureAtlasLookup(sampler2D _viewshedShadowmap, vec2 uv, vec4 atlasRegion) {\nvec2 atlasScale = atlasRegion.zw - atlasRegion.xy;\nvec2 uvAtlas = fract(uv) * atlasScale + atlasRegion.xy;\nreturn viewshedFilterShadow(_viewshedShadowmap, uvAtlas);\n}\nfloat getDepthFromShadowMap(vec2 uv, int face) {\nint index = 4 * face;\nfloat umin = viewshedAtlasRegions[index];\nfloat umax = viewshedAtlasRegions[index + 1];\nfloat vmin = viewshedAtlasRegions[index + 2];\nfloat vmax = viewshedAtlasRegions[index + 3];\nvec4 atlasRegion = vec4(umin, vmin, umax, vmax);\nreturn viewshedTextureAtlasLookup(viewshedShadowMap, uv, atlasRegion);\n}\nstruct ViewshedPoint {\nint face;\nvec2 uv;\nbool isWithin;\nfloat orthographicDepth;\n};\nmat3 rotationMatrix(vec3 axis, float angle)\n{\nfloat s = sin(angle);\nfloat c = cos(angle);\nfloat oc = 1.0 - c;\nreturn mat3(\noc * axis.xxz * axis.xyx + vec3(c, axis.zy) * vec3(1., -s, s),\noc * axis.xyy * axis.yyz + vec3(axis.z, c, axis.x) * vec3(s, 1., -s),\noc * axis.zyz * axis.xzz + vec3(axis.yx, c) * vec3(-s, s, 1.)\n);\n}\nfloat distanceToPlane(vec3 position, vec3 normal) {\nreturn dot(position, normal);\n}\nbool outsideViewshed(float distance) {\nreturn distance > -viewshedVolumeOffset;\n}\nbool isWithinViewshed(vec3 position) {\nfloat positionLength = length(position - viewshedObserverOffset);\nfloat farSphereDistance = positionLength - viewshedNearFar[1];\nif (outsideViewshed(farSphereDistance)) { return false; }\nfloat nearSphereDistance = viewshedNearFar[0] - positionLength;\nif (outsideViewshed(nearSphereDistance)) { return false; }\nvec3 westVector = normalize(cross(viewshedUpVector, viewshedTargetVector));\nbool leftOfTarget = distanceToPlane(position, westVector) > 0.0;\nif (viewshedFOVs[0] < TWO_PI) {\nfloat horAngle = viewshedFOVs[0] / 2.0;\nhorAngle = leftOfTarget ? horAngle : -horAngle;\nvec3 sideVector = viewshedTargetVector * rotationMatrix(viewshedUpVector, horAngle);\nbool inFront = distanceToPlane(position, sideVector) > 0.0;\nif (inFront) {\nvec3 sideNormal = cross(viewshedUpVector, sideVector) * (leftOfTarget ? 1. : -1.);\nfloat sideDistance = distanceToPlane(position, normalize(sideNormal));\nif (outsideViewshed(sideDistance)) { return false; }\n} else if (viewshedFOVs[0] < PI) { return false; }\n}\nif (viewshedFOVs[1] < PI) {\nfloat t = dot(viewshedUpVector, position);\nvec3 nProjVector = normalize(position - t * viewshedUpVector);\nfloat heading = acos(clamp(dot(normalize(viewshedTargetVector), nProjVector), -1.0, 1.0));\nheading = leftOfTarget ? heading : -heading;\nbool aboveTarget = distanceToPlane(position, viewshedUpVector) > 0.0;\nfloat verFOV = viewshedFOVs[1] / 2.0;\nverFOV = aboveTarget ? -verFOV : verFOV;\nmat3 rotateByHeading = rotationMatrix(viewshedUpVector, heading);\nvec3 sideVector = viewshedTargetVector * rotationMatrix(westVector, verFOV) * rotateByHeading;\nvec3 leftVector = westVector * rotateByHeading;\nvec3 sideNormal = cross(sideVector, leftVector) * (aboveTarget ? 1. : -1.);\nfloat sideDistance = distanceToPlane(position, normalize(sideNormal));\nif (outsideViewshed(sideDistance)) { return false; }\n}\nreturn true;\n}\nbool getViewshedPoint(vec4 localPosition, out ViewshedPoint point) {\nfor(int i=0; i < viewshedNumFaces; i++) {\nvec2 viewshedUv = getViewshedUv(localPosition, i);\nif (viewshedUv.x > 0. && viewshedUv.x < 1. && viewshedUv.y > 0. && viewshedUv.y < 1.) {\nfloat orthoDepth = getOrthographicDepthToViewshed(localPosition, i);\nif (orthoDepth >= 0.) {\nbool isWithin = isWithinViewshed(localPosition.xyz);\npoint = ViewshedPoint(i, viewshedUv, isWithin, orthoDepth);\nreturn true;\n}\n}\n}\nreturn false;\n}\nfloat normalCosAngle(float linearDepth, vec3 localPosition) {\nvec4 normal4 = texture(normalMap, uv);\nvec3 normalN = normalize(normal4.xyz * 2.0 - 1.0);\nvec3 normal =  normalize((inverseViewNormalMatrix * vec4(normalN, 1.0)).xyz);\nvec3 viewingDir = normalize(localPosition);\nreturn dot(normal, viewingDir);\n}`),o.main.add(c`float depth = depthFromTexture(depthTexture, uv);\nif (depth >= 1.0 || depth <= 0.0) {\nreturn;\n}\nfloat linearDepth = linearizeDepth(depth);\nvec4 localPosition = reconstructLocalPosition(gl_FragCoord.xy, linearDepth);\nViewshedPoint point;\nbool foundFace = getViewshedPoint(localPosition, point);\nif (!foundFace || !point.isWithin) {\nreturn;\n}\nfloat viewshedDepth = getDepthFromShadowMap(point.uv, point.face);\nfloat distance = point.orthographicDepth;\nbool visible = distance < viewshedDepth;\nfragColor = visible ? visibleColor : occludedColor;\nfloat cosAngle = normalCosAngle(linearDepth, localPosition.xyz);\nfloat threshold = -0.01;\nif (cosAngle > threshold) {\nfragColor = occludedColor;\n}`),i}const b=o(),M=Object.freeze(Object.defineProperty({__proto__:null,ViewshedPassParameters:x,build:V},Symbol.toStringTag,{value:\"Module\"}));export{x as V,M as a,V as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{translate as r,invertOrIdentity as e}from\"../../../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as o}from\"../../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{zeros as i}from\"../../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{CameraSpace as t}from\"./CameraSpace.glsl.js\";import{glsl as a}from\"../../shaderModules/glsl.js\";import{Matrix4PassUniform as s}from\"../../shaderModules/Matrix4PassUniform.js\";import{NoParameters as c}from\"../../../../../webgl/NoParameters.js\";class m extends c{constructor(){super(...arguments),this.localOrigin=i()}}function l(i){i.include(t),i.fragment.uniforms.add(new s(\"inverseViewMatrix\",((i,t)=>{const a=r(o(),t.camera.viewMatrix,i.localOrigin);return e(a,a)}))).code.add(a`vec4 reconstructLocalPosition(vec2 coord, float linearDepth) {\nvec4 cameraSpace = vec4(reconstructPosition(coord, linearDepth), 1.0);\nreturn inverseViewMatrix * cameraSpace;\n}`)}export{m as LocalFromScreenSpacePassParameters,l as localFromScreenSpace};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import{featureReferenceEquals as r,featureReferenceProperty as i}from\"./featureReferenceUtils.js\";import o from\"../core/Clonable.js\";import{cyclicalDegrees as t}from\"../core/Cyclical.js\";import s from\"../core/JSONSupport.js\";import{equalsMaybe as a}from\"../core/maybe.js\";import{property as l}from\"../core/accessorSupport/decorators/property.js\";import{cast as n}from\"../core/accessorSupport/decorators/cast.js\";import\"../core/has.js\";import\"../core/RandomLCG.js\";import{subclass as p}from\"../core/accessorSupport/decorators/subclass.js\";import{ensureNumber as m}from\"../core/accessorSupport/ensureType.js\";import u from\"../geometry/Point.js\";let c=class extends(s.JSONSupportMixin(o)){constructor(e){super(e),this.observer=null,this.farDistance=1e3,this.heading=0,this.tilt=90,this.horizontalFieldOfView=45,this.verticalFieldOfView=45,this.feature=null}get valid(){return null!=this.observer&&this.farDistance>0}equals(e){return a(this.observer,e.observer)&&this.farDistance===e.farDistance&&this.heading===e.heading&&this.tilt===e.tilt&&this.horizontalFieldOfView===e.horizontalFieldOfView&&this.verticalFieldOfView===e.verticalFieldOfView&&r(this.feature,e.feature)}};e([l({type:u,json:{write:{isRequired:!0}}})],c.prototype,\"observer\",void 0),e([l({type:Number,nonNullable:!0,range:{min:0},json:{write:{isRequired:!0}}})],c.prototype,\"farDistance\",void 0),e([l({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),n((e=>t.normalize(m(e),void 0,!0)))],c.prototype,\"heading\",void 0),e([l({type:Number,nonNullable:!0,range:{min:0,max:180},json:{write:{isRequired:!0}}})],c.prototype,\"tilt\",void 0),e([l({type:Number,nonNullable:!0,range:{min:0,max:360},json:{write:{isRequired:!0}}})],c.prototype,\"horizontalFieldOfView\",void 0),e([l({type:Number,nonNullable:!0,range:{min:0,max:180},json:{write:{isRequired:!0}}})],c.prototype,\"verticalFieldOfView\",void 0),e([l(i)],c.prototype,\"feature\",void 0),e([l({readOnly:!0,json:{read:!1}})],c.prototype,\"valid\",null),c=e([p(\"esri.analysis.Viewshed\")],c);export{c as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport e from\"../../../../Color.js\";import{deg2rad as i}from\"../../../../core/mathUtils.js\";import{CullFaceOptions as t}from\"../../webgl-engine/lib/basicInterfaces.js\";import{RenderOccludedFlag as r}from\"../../webgl-engine/lib/Material.js\";const s=2,o=4,c=i(2),n=1.5;class l{constructor(){this.collisionRadius=5,this.fovUnfocusedArcWidth=o,this.fovFocusedArcWidth=s*this.fovUnfocusedArcWidth,this.scaleOrientSize=90,this.scaleOrientHandleRadius=.025,this.scaleOrientMinDistance=1,this.scaleOrientArrowTipLength=.3,this.scaleOrientArrowTipFocusMultiplier=s/1.5,this.observerSize=5,this.hoverTimeoutMilliseconds=1e3,this.viewAngleThreshold=10}getFovArcWidth(e){return e?this.fovFocusedArcWidth:this.fovUnfocusedArcWidth}getScaleOrientArrowTipLength(e){return this.scaleOrientArrowTipLength*(e?this.scaleOrientArrowTipFocusMultiplier:1)}}const h=new l;class a{constructor(){this.frameWidthNotSelected=.3,this.frameWidthSelected=1,this.frameColor=new e([255,255,255,.99]),this.observerPointConfiguration={size:6,pixelSnappingEnabled:!1,primitive:\"circle\",elevationInfo:{mode:\"absolute-height\",offset:0},outlineSize:0,color:e.toUnitRGBA(new e([3,252,111,1]))},this.shapeMaterialParameters={color:[.33,.33,.33,.25],renderOccluded:r.Occlude,cullFace:t.Back,writeDepth:!1}}}const d=new a;export{c as arcAnglePerSegment,n as creationVerticalOffset,h as viewshedToolManipulatorConfiguration,d as viewshedVisualizationConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{rad2deg as r,clamp as e}from\"../../../../core/mathUtils.js\";import{fromRotation as t}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as n}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{t as o,n as a,c as s,p as i,e as c,a as m,f as p,g as l}from\"../../../../chunks/vec32.js\";import{create as d}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{getNormal as f,fromPositionAndNormal as u,create as g}from\"../../../../geometry/support/plane.js\";import{viewshedToolManipulatorConfiguration as h}from\"./ViewshedConfiguration.js\";import{calculateTranslateRotateFromBases as j,calculateInputRotationTransform as b}from\"../../interactive/manipulatorUtils.js\";import{screenToRenderPlane as x}from\"../../interactive/editingTools/dragEventPipeline3D.js\";import{headingTiltToDirectionUp as v}from\"../../support/cameraUtils.js\";import{createDirectionUp as S}from\"../../support/cameraUtilsInternal.js\";function R({tiltedUpVector:r,rightVector:e,observerRenderSpace:t},n){const o=j(r,e,t,n);return o[12]=0,o[13]=0,o[14]=0,o}function U(t,n,o,i){const j=d(),v=f(o.plane),S=E(n,v);let R;if(Math.abs(S)>h.viewAngleThreshold)R=t.next(x(n,o.plane));else{const r=u(i.targetRenderSpace,o.basis1,g()),s=a(D,o.basis1),f=a(M,o.basis2);R=t.next(x(n,r)).next((r=>{const t=r=>{const t=c(m(V,r,o.origin),f),n=Math.acos(e(t/i.farDistanceRenderSpace,-1,1)),a=Math.sin(n)*i.farDistanceRenderSpace;return p(d(),o.origin,p(d(),l(V,s,a),l(w,f,t)))},n=t(r.renderStart),a=t(r.renderEnd);return{...r,renderStart:n,renderEnd:a}}))}return R.next((e=>{\"start\"===e.action&&s(j,e.renderStart);const t=r(b(j,e.renderEnd,o.origin,v));return{...e,deltaAngle:t}}))}function E(e,t){const n=D;e.renderCoordsHelper.toRenderCoords(e.camera.position,n);const o=v(e,n,e.camera.heading,e.camera.tilt,S()).direction;return r(i(o,t))-90}function C(r,e,n,a){return t(A,n,a),o(r,e,A)}const D=d(),M=d(),V=d(),w=d(),A=n();export{R as getViewshedRotationMatrix,C as rotateBy,U as screenToCircleAngle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport t from\"../../../../Color.js\";import r from\"../../../../core/Handles.js\";import{handlesGroup as e}from\"../../../../core/handleUtils.js\";import{deg2rad as i,clamp as a}from\"../../../../core/mathUtils.js\";import{destroyMaybe as o}from\"../../../../core/maybe.js\";import{watch as n,initial as s}from\"../../../../core/reactiveUtils.js\";import{fromYRotation as l,fromXRotation as c,fromScaling as u,fromZRotation as p,fromRotation as m,multiply as h}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as f}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{i as d,a as g,g as _}from\"../../../../chunks/vec32.js\";import{create as M,fromValues as b}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{f as v}from\"../../../../chunks/boundedPlane.js\";import{viewshedToolManipulatorConfiguration as j}from\"./ViewshedConfiguration.js\";import{getViewshedRotationMatrix as w,screenToCircleAngle as A}from\"./viewshedToolUtils.js\";import{Manipulator3D as V}from\"../../interactive/Manipulator3D.js\";import{RenderObject as E}from\"../../interactive/RenderObject.js\";import{ManipulatorType as O}from\"../../interactive/editingTools/ManipulatorType.js\";import{InteractiveManipulation as T}from\"../../interactive/editingTools/manipulations/InteractiveManipulation.js\";import{createPolylineGeometry as y}from\"../../webgl-engine/lib/GeometryUtil.js\";import{RenderOccludedFlag as U}from\"../../webgl-engine/lib/Material.js\";import{assert as R}from\"../../webgl-engine/lib/Util.js\";import{RibbonLineMaterial as S}from\"../../webgl-engine/materials/RibbonLineMaterial.js\";import{createManipulatorDragEventPipeline as x}from\"../../../interactive/dragEventPipeline.js\";import{ManipulatorStateFlags as P}from\"../../../interactive/interfaces.js\";class C extends T{constructor(t){super(),this._handles=new r,this._tool=t.tool,this._view=t.view,this._focusedArcMaterial=this._createArcMaterial(!0),this._unfocusedArcMaterial=this._createArcMaterial(!1),this._createManipulators(),this.forEachManipulator((t=>this._tool.manipulators.add(t)))}destroy(){this._handles=o(this._handles),this.forEachManipulator((t=>{this._tool.manipulators.remove(t),t.destroy()})),this._tool=null,this._view=null,this._manipulators=null}createDragPipeline(t,r){const i=Object.values(this._manipulators);return e(i.map((({manipulator:e,side:i})=>x(e,((e,a,o,n,s)=>{const l=k(i,r),c=a.next((t=>({...t,manipulatorType:O.SCALE,side:i}))),u=A(c,this._view,l,r);t(e,u,o)})))))}updateManipulatorsTransform(t){t.arcCentersPoints(J),this._forEachManipulatorInfo((r=>this._updateArcManipulatorTransform(r,t,J[r.side])))}updateManipulatorVisuals(t){this._forEachManipulatorInfo((r=>this._updateArcManipulatorVisuals(r,t)))}_updateArcManipulatorVisuals({manipulator:t,side:r},e){const i=[];if(null!=e){const[a,o]=F(r,e,this._unfocusedArcMaterial);i.push(new E(a,P.Unfocused),new E(a.instantiate({material:this._focusedArcMaterial}),P.Focused)),t.collisionType={type:\"line\",paths:[o]}}t.renderObjects=i,t.radius=j.collisionRadius}_updateArcManipulatorTransform({manipulator:t,side:r},e,a){const o=e.horizontalFieldOfView,n=i(e.verticalFieldOfView/2),s=i(o/2),g=z(r);t.renderLocation=a;const _=f(),M=t=>{h(_,t,_)};M(l(H,i(-90))),g||M(c(H,n));const b=e.farDistanceRenderSpace;let v,j;M(u(H,d(W,b,b,b))),M(p(H,L(r))),M(w(e,H)),g?(v=s,j=e.tiltedUpVector):(j=e.rightVector,v=n),v*=\"right\"===r||\"bottom\"===r?-1:1;const A=m(H,v,j);null!=A&&M(A),t.modelTransform=_}_createManipulators(){const t=this._createArcManipulator(\"left\"),r=this._createArcManipulator(\"right\"),e=this._createArcManipulator(\"top\"),i=this._createArcManipulator(\"bottom\");this._manipulators={left:t,right:r,top:e,bottom:i};[[i.manipulator,e.manipulator],[t.manipulator,r.manipulator]].forEach((([t,r])=>{t.metadata={pairedManipulator:r},r.metadata={pairedManipulator:t}}))}_createArcManipulator(t){const r=new V({view:this._view,autoScaleRenderObjects:!1,worldSized:!0}),e={manipulator:r,side:t};return this._updateArcManipulatorVisuals(e),this._handles.add(r.events.on(\"focus-changed\",(t=>{const e=r.metadata?.pairedManipulator;null!=e&&(e.hovering!==r.hovering&&(e.hovering=r.hovering),e.grabbing!==r.grabbing&&(e.grabbing=r.grabbing))}))),e}_createArcMaterial(r){const e=j.getFovArcWidth(r),i=new S({renderOccluded:U.OccludeAndTransparent,isDecoration:!0,width:e});return this._handles.add(n((()=>t.toUnitRGBA(this._view.effectiveTheme.accentColor)),(t=>i.setParameters({color:t})),s)),i}forEachManipulator(t){Object.values(this._manipulators).forEach((({manipulator:r})=>t(r,O.SCALE)))}_forEachManipulatorInfo(t){Object.values(this._manipulators).forEach((r=>t(r)))}get test(){return{manipulators:this._manipulators}}}function F(t,r,e){const{horizontalFieldOfView:o,verticalFieldOfView:n}=r,s=z(t),l=i(a((s?n:o)/2,0,15)),c=D(-l/2,l/2,s?1:Math.max(Math.sin(i(90-n/2)),.1));return[y(e,c),c]}function D(t,r,e,i=10){R(i>1,\"createArcPolylineGeometry() needs at least 2 for numVertices\");const a=r-t;if(a<=0||e<=0){return[b(0,0,.01),b(0,0,-.01)]}const o=[],n=a/i;for(let s=0;s<i;s++){let a=t+s*n;s===i-1&&(a=r);const l=Math.cos(a)*e,c=Math.sin(a)*e,u=b(l-e,0,c);o.push(u)}return o}function I(t){switch(t){case\"left\":return 0;case\"bottom\":return 1;case\"right\":return 2;case\"top\":return 3}}function L(t){return I(t)*B}function z(t){return\"left\"===t||\"right\"===t}function G(t){return\"left\"===t?\"right\":\"right\"===t?\"left\":\"top\"===t?\"bottom\":\"top\"}function k(t,{observerRenderSpace:r,targetRenderSpace:e,tiltedUpVector:i,rightVector:a,farDistanceRenderSpace:o}){const n=g(W,e,r),s=z(t)?a:i,l=_(q,s,o);return v(r,n,l)}const B=Math.PI/2,H=f(),W=M(),q=M(),J={top:M(),bottom:M(),left:M(),right:M()};export{C as FieldOfViewManipulation,D as createArcPolylineVertices,G as flipSide,z as isSideHorizontal,L as sideToRad};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport e from\"../../../../Color.js\";import t from\"../../../../core/Handles.js\";import{watch as r,initial as o}from\"../../../../core/reactiveUtils.js\";import{fromTranslation as i,mul as s,fromXRotation as n,fromYRotation as a}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as c}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{t as l}from\"../../../../chunks/vec32.js\";import{fromValues as m}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{displayFocusMultiplier as f}from\"../Slice/sliceToolConfig.js\";import{viewshedToolManipulatorConfiguration as p}from\"./ViewshedConfiguration.js\";import{Manipulator3D as d}from\"../../interactive/Manipulator3D.js\";import{RenderObject as u}from\"../../interactive/RenderObject.js\";import{CullFaceOptions as h}from\"../../webgl-engine/lib/basicInterfaces.js\";import{createTubeGeometry as j,createExtrudedTriangle as g}from\"../../webgl-engine/lib/GeometryUtil.js\";import{RenderOccludedFlag as w}from\"../../webgl-engine/lib/Material.js\";import{ColorMaterial as b}from\"../../webgl-engine/materials/ColorMaterial.js\";import{ManipulatorStateFlags as v}from\"../../../interactive/interfaces.js\";class M extends d{constructor(e,r){super({view:e,autoScaleRenderObjects:!1,worldSized:!1,radius:p.collisionRadius}),this._handles=new t,this._setupManipulatorVisual(r)}destroy(){this._handles.remove(),super.destroy()}_setupManipulatorVisual(e){const t=this._createMaterial(),r=1,o=[m(0,0,0),m(0,0,r)],d=j(t,o,e,16,!1),h=j(t,o,e*f,16,!1),g=O(!1,t,e),w=O(!0,t,e),b=c();i(b,o[o.length-1]),s(b,b,n(_,Math.PI/2)),s(b,b,a(_,Math.PI/2)),g.transformation=b,w.transformation=b,this.renderObjects=[new u(d,v.Unfocused),new u(h,v.Focused),new u(g,v.Unfocused),new u(w,v.Focused)];const M=m(0,p.getScaleOrientArrowTipLength(!0),0),T=l(M,M,b),x=[...o,T];this.collisionType={type:\"line\",paths:[x]}}_createMaterial(){const t=new b({cullFace:h.Back,renderOccluded:w.OccludeAndTransparent,isDecoration:!0});return this._handles.add(r((()=>e.toUnitRGBA(this.view.effectiveTheme.accentColor)),(e=>t.setParameters({color:e})),o)),t}}function O(e,t,r){const o=p.getScaleOrientArrowTipLength(e);let i=2*r;e&&(i*=f);const s=o/2;return g(t,o,s,s,i,0)}const _=c();export{M as ArrowManipulator};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport t from\"../../../../core/Handles.js\";import{deg2rad as i}from\"../../../../core/mathUtils.js\";import{fromScaling as e,fromTranslation as a,fromZRotation as r,mul as o,fromYRotation as n,multiply as s}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as l}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{i as m,g as p,f as c,a as u,H as h,e as d,b as f,n as _}from\"../../../../chunks/vec32.js\";import{create as g}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{f as T}from\"../../../../chunks/boundedPlane.js\";import{fromValues as v}from\"../../../../geometry/support/ray.js\";import{displayFocusMultiplier as j}from\"../Slice/sliceToolConfig.js\";import{ArrowManipulator as w}from\"./ArrowManipulator.js\";import{viewshedToolManipulatorConfiguration as D}from\"./ViewshedConfiguration.js\";import{getViewshedRotationMatrix as R,screenToCircleAngle as S}from\"./viewshedToolUtils.js\";import{screenToRenderRay as E}from\"../../interactive/editingTools/dragEventPipeline3D.js\";import{ManipulatorType as H}from\"../../interactive/editingTools/ManipulatorType.js\";import{discRadiusSmall as x,discRadius as M}from\"../../interactive/editingTools/manipulations/config.js\";import{InteractiveManipulation as y}from\"../../interactive/editingTools/manipulations/InteractiveManipulation.js\";import{createManipulatorDragEventPipeline as P,dragAtLocation as b}from\"../../../interactive/dragEventPipeline.js\";class A extends y{constructor(i){super(),this._handles=new t,this._tool=i.tool,this._view=i.view;const e=D.scaleOrientHandleRadius;this._manipulatorHeading=new w(this._view,e),this._manipulatorTilt=new w(this._view,e),this._manipulatorDistance=new w(this._view,e),this.forEachManipulator((t=>this._tool.manipulators.add(t)))}destroy(){this._handles.destroy(),this.forEachManipulator((t=>{this._tool.manipulators.remove(t),t.destroy()})),this._manipulatorHeading=null,this._manipulatorTilt=null,this._manipulatorDistance=null,this._tool=null,this._view=null}createHeadingDragPipeline(t,e){return P(this._manipulatorHeading,((a,r,o,n,s)=>{const l=this._view,{tiltParallelToSurface:m,farDistanceRenderSpace:d,upVector:f,observerRenderSpace:_,targetRenderSpace:g,rightVector:v}=e,j=Math.sin(i(m))*d,w=c(V,_,p(C,f,j)),D=u(C,g,w),R=p(I,v,h(D)),E=T(w,D,R),x=S(r,l,E,e).next((t=>({...t,manipulatorType:H.ROTATE})));t(a,x,o)}))}createTiltDragPipeline(t,i){return P(this._manipulatorTilt,((e,a,r,o,n)=>{const{observerRenderSpace:s,farDistanceRenderSpace:l,upVector:m,targetDirection:c}=i,u=d(c,m),h=f(V,c,m,-u);p(h,_(h,h),l);const g=p(C,m,l),v=T(s,h,g),j=S(a,this._view,v,i).next((t=>({...t,manipulatorType:H.ROTATE})));t(e,j,r)}))}createDistanceDragPipeline(t,i){return P(this._manipulatorDistance,((e,a,r,o,n)=>{const s=v(i.observerRenderSpace,i.targetDirection),l=a.next(b(this._view,e.location)).next(E(this._view,s)).next((t=>({...t,manipulatorType:H.SCALE})));t(e,l,r)}))}updateManipulators(t){const{targetRenderSpace:i}=t;this._manipulatorHeading.renderLocation=i,this._manipulatorTilt.renderLocation=i,this._manipulatorDistance.renderLocation=i;const c=l(),u=t=>{s(c,t,c)},h=D.scaleOrientSize*(x/M);u(e(O,m(V,h,h,h))),u(R(t,O));const d=D.scaleOrientHandleRadius*j*h,f=p(V,t.targetDirection,d);u(a(O,f));const _=r(O,-k);o(_,_,n(L,-k)),this._manipulatorHeading.modelTransform=o(l(),c,_);const g=n(O,k);o(g,g,r(L,Math.PI)),this._manipulatorTilt.modelTransform=s(l(),c,g),this._manipulatorDistance.modelTransform=c}forEachManipulator(t){t(this._manipulatorHeading,H.ROTATE),t(this._manipulatorTilt,H.ROTATE),t(this._manipulatorDistance,H.SCALE)}}const O=l(),L=l(),V=g(),C=g(),I=g(),k=Math.PI/2;export{A as ScaleOrientManipulation};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../Color.js\";import o from\"../../../../core/Handles.js\";import{watch as t,initial as s}from\"../../../../core/reactiveUtils.js\";import{property as i}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import\"../../../../core/Warning.js\";import\"../../../../core/Error.js\";import{viewshedToolManipulatorConfiguration as c}from\"./ViewshedConfiguration.js\";import{Manipulator3D as m}from\"../../interactive/Manipulator3D.js\";import{createManipulatorMaterial as a}from\"../../interactive/manipulatorUtils.js\";import{RenderObject as n}from\"../../interactive/RenderObject.js\";import{createSphereGeometry as p}from\"../../webgl-engine/lib/GeometryUtil.js\";class l extends m{constructor(r,e){super({view:r,autoScaleRenderObjects:!1,worldSized:!1,radius:c.observerSize,interactive:!1}),this._handles=new o;const i=a(this._color);this.renderObjects=[new n(p(i,c.observerSize,32,32))],e.manipulators.add(this),this._handles.add([t((()=>this._color),(r=>{i.setParameters({color:r})}),s)])}destroy(){this._handles.remove(),super.destroy()}get _color(){return e.toUnitRGBA(this.view.effectiveTheme.accentColor)}}r([i()],l.prototype,\"_color\",null);export{l as ViewshedObserverManipulator};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import i from\"../../../../core/Accessor.js\";import{isSome as t}from\"../../../../core/arrayUtils.js\";import{createTask as a}from\"../../../../core/asyncUtils.js\";import{cyclicalDegrees as o,Cyclical as n}from\"../../../../core/Cyclical.js\";import{handlesGroup as s}from\"../../../../core/handleUtils.js\";import\"../../../../core/has.js\";import{deg2rad as r}from\"../../../../core/mathUtils.js\";import{abortMaybe as l,destroyMaybe as p}from\"../../../../core/maybe.js\";import{after as h,throwIfAborted as u}from\"../../../../core/promiseUtils.js\";import{watch as c,syncAndInitial as d,initial as v}from\"../../../../core/reactiveUtils.js\";import{property as m}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/Logger.js\";import{subclass as f}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{a as g,H as M,e as _}from\"../../../../chunks/vec32.js\";import{create as b}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{tryProjectWithZConversion as w}from\"../../../../geometry/projectionUtils.js\";import{viewingModeFromString as O}from\"../../../ViewingMode.js\";import{FieldOfViewManipulation as V,isSideHorizontal as y,flipSide as D}from\"./FieldOfViewManipulation.js\";import{ScaleOrientManipulation as T}from\"./ScaleOrientManipulation.js\";import{viewshedToolManipulatorConfiguration as H}from\"./ViewshedConfiguration.js\";import{ViewshedObserverManipulator as j}from\"./viewshedToolManipulatorUtils.js\";import{discRadiusSmall as C}from\"../../interactive/editingTools/manipulations/config.js\";import{MoveManipulation as F}from\"../../interactive/editingTools/manipulations/MoveManipulation.js\";import{resetProperties as S,dragManipulatedObject as P}from\"../../../interactive/dragEventPipeline.js\";import{EditGeometryOperations as k}from\"../../../interactive/editGeometry/EditGeometryOperations.js\";const E=Symbol(\"dragHandles\"),x=Symbol(\"hideManipulators\"),A=Symbol(\"hideFoVManipulators\"),z=Symbol(\"hideObserverManipulator\");let U=class extends i{constructor(e){super(e),this._moveManipulation=null,this._observerManipulator=null,this._fieldOfViewManipulation=null,this._scaleOrientManipulation=null,this._forceHoveringTask=null,this._forceHoveringTestPromise=null,this._grabbing=!1,this.viewshedComputedData=null}initialize(){this._moveManipulation=this._createMoveManipulation(),this._fieldOfViewManipulation=new V({view:this.view,tool:this.parentTool}),this._scaleOrientManipulation=new T({view:this.view,tool:this.parentTool}),this._observerManipulator=new j(this.view,this.parentTool),this.addHandles([c((()=>this.viewshedComputedData?.observerRenderSpace),(e=>{null!=e&&(this._moveManipulation.renderLocation=e,this._observerManipulator.renderLocation=e)}),d),c((()=>this.viewshedComputedData?.heading),(e=>{e&&(this._moveManipulation.angle=r(90-e))}),v),c((()=>{const{viewshedComputedData:e}=this;return{viewshedComputedData:e,observer:e?.observer}}),(({viewshedComputedData:e,observer:i},a)=>{this._grabbing&&i!==a?.observer||(this.removeHandles(E),e?.valid&&this.addHandles([this._buildObserverDragPipeline(e),this._buildFOVDragPipeline(e),this._buildScaleOrientDragPipeline(e)].filter(t),E))}),v),c((()=>{const e=this.viewshedComputedData;return e?.valid?{viewshedCompData:e,target:e.targetRenderSpace,hFOV:e.horizontalFieldOfView,vFOV:e.verticalFieldOfView}:null}),(e=>{null!=e&&this._fieldOfViewManipulation.updateManipulatorsTransform(e.viewshedCompData)}),v),c((()=>{const e=this.viewshedComputedData;return e?.valid?{viewshedCompData:e,hFOV:e.horizontalFieldOfView,vFOV:e.verticalFieldOfView,tilt:e.tilt}:null}),(e=>{null!=e&&this._fieldOfViewManipulation.updateManipulatorVisuals(e.viewshedCompData)}),v),c((()=>{const e=this.analysisViewData.visible&&(this.viewshedComputedData?.valid??!1),i=this.parentTool.selectedViewshedComputedData===this.viewshedComputedData;return{fovManipulationAvailable:e&&!this.parentTool.isPlacingTarget,nonFOVManipulationAvailable:e&&(!this.parentTool.creating||i)}}),(({fovManipulationAvailable:e,nonFOVManipulationAvailable:i})=>{this._moveManipulation.available=i,this._scaleOrientManipulation.available=i,this._observerManipulator.available=i,this._fieldOfViewManipulation.available=e}),v),c((()=>{const e=this.viewshedComputedData;if(!e?.valid)return null;const{observer:i,target:t,verticalFieldOfView:a,horizontalFieldOfView:o}=e;return{viewshedCompData:e,observer:i,target:t,verticalFieldOfView:a,horizontalFieldOfView:o}}),(e=>{null!=e&&this._scaleOrientManipulation.updateManipulators(e.viewshedCompData)}),v)]);const e=e=>{const i=this.analysisViewData;this.addHandles([e.events.on(\"focus-changed\",(()=>{const e=this._someManipulatorHovering();e&&this.parentTool.subToolHandles.forEach((({subTool:e})=>{e._resetHoveringTask()})),this._someManipulatorSelected()||e||(this._forceHoveringTask=a((async e=>{await(this._forceHoveringTestPromise??h(H.hoverTimeoutMilliseconds,e)),u(e),this._forceHoveringTask=null,this._updateManipulatorVisibility()})))})),e.events.on(\"grab-changed\",(t=>{this._grabbing=\"start\"===t.action,\"end\"===t.action&&i.tool?.updateInteractionVisualsVisibility(),this.parentTool.subToolHandles.forEach((({subTool:e})=>{e!==this&&e._setInteractive(!this._grabbing)})),this._setInteractive((i=>i.hasManipulator(e)||!this._grabbing))})),e.events.on(\"drag\",(e=>{\"start\"===e.action&&i.tool?.updateInteractionVisualsVisibility()}))])};this._forEachManipulator(e)}destroy(){this._forceHoveringTask=l(this._forceHoveringTask),this._moveManipulation=p(this._moveManipulation),this._fieldOfViewManipulation=p(this._fieldOfViewManipulation),this._scaleOrientManipulation=p(this._scaleOrientManipulation),this.parentTool.manipulators.remove(this._observerManipulator),this._observerManipulator=p(this._observerManipulator)}get viewshed(){return this.viewshedComputedData?.viewshed}get grabbing(){return this._grabbing}get observer(){return this.viewshed?.observer}set observer(e){const i=this.viewshed;null!=i&&(i.observer=e)}get discManipulator(){return this._moveManipulation.xyManipulation.discManipulator}get moveInteractionState(){const{dragging:e,grabbing:i}=this._moveManipulation;return{dragging:e,grabbing:i}}get scaleOrientInteractionState(){const{dragging:e,grabbing:i}=this._scaleOrientManipulation;return{dragging:e,grabbing:i}}_setInteractive(e){const i=\"boolean\"==typeof e;this._forEachManipulation((t=>t.interactive=i?e:e(t)))}onManipulatorSelectionChanged(){if(this._updateManipulatorVisibility(),!this._someManipulatorSelected()){this.analysisViewData.selectedViewshed===this.viewshed&&(this.analysisViewData.selectedViewshed=null),this._resetHoveringTask()}}hasManipulator(e){let i=!1;return this._forEachManipulator((t=>{i=i||t===e})),i}_someManipulatorSelected(){return this._moveManipulation.selected||this._fieldOfViewManipulation.selected||this._scaleOrientManipulation.selected}_someManipulatorHovering(){return this._moveManipulation.hovering||this._fieldOfViewManipulation.hovering||this._scaleOrientManipulation.hovering}_createMoveManipulation(){return new F({view:this.view,tool:this.parentTool,snapToScene:!1,xyAvailable:!0,xyAxisAvailable:!0,zAvailable:!0,radius:C})}_buildObserverDragPipeline(e){const i={mode:\"absolute-height\",offset:0},t=e.observer;if(null==t)return null;const a=this.view.spatialReference;return this._moveManipulation.createDragPipeline(((e,i,o,n,s)=>{n=n.next(S(this,[\"observer\"]));const r=w(t,a);if(null==r)return{steps:o,cancel:n};const l=k.fromGeometry(r,O(this.view.viewingMode));return{steps:o.next(P({operations:l})).next((e=>(this.observer=l.data.geometry,e))),cancel:n}}),i,a,void 0)}_buildFOVDragPipeline(e){let i=0,t=0;return this._fieldOfViewManipulation.createDragPipeline(((a,n,s)=>{if(null==e)return{steps:n,cancel:s};const r=e.viewshed;let l=null;s=s.next(S(r,[\"horizontalFieldOfView\",\"verticalFieldOfView\"]));return{steps:n.next((a=>{\"start\"===a.action&&(l=null,i=e.horizontalFieldOfView,t=e.verticalFieldOfView);const n=a.deltaAngle;if(null==l&&0!==n){const e=\"bottom\"===a.side||\"left\"===a.side?n>0:n<0;l=y(a.side)?0===i&&e||360===i&&!e:0===t&&e}const s=l?D(a.side):a.side;let p=0;switch(s){case\"left\":p=i/2-n;break;case\"right\":p=i/2+n;break;case\"top\":p=t+2*n;break;case\"bottom\":p=t-2*n}return y(s)?(p=o.normalize(p),p=p>270?0:p>180?180:p,r.horizontalFieldOfView=2*p):r.verticalFieldOfView=p,a})),cancel:s}}),e)}_buildScaleOrientDragPipeline(e){let i=0,t=0;const a=(i,t)=>(a,o,n)=>{if(null==e)return{steps:o,cancel:n};const s=e.viewshed;return n=n.next(S(s,[i])),{steps:o=o.next(t(s,e)),cancel:n}};return s([this._scaleOrientManipulation.createHeadingDragPipeline(a(\"heading\",((i,a)=>a=>(\"start\"===a.action&&(t=e.heading),i.heading=o.normalize(t+a.deltaAngle),a))),e),this._scaleOrientManipulation.createTiltDragPipeline(a(\"tilt\",((t,a)=>a=>{\"start\"===a.action&&(i=e.tilt);let o=i+a.deltaAngle;return o<-90?o=180:o>270&&(o=0),t.tilt=R.clamp(o),a})),e),this._scaleOrientManipulation.createDistanceDragPipeline(a(\"farDistance\",((e,i)=>t=>{const a=g(I,t.renderEnd,i.observerRenderSpace),o=M(a)*i.metersPerUnit,n=_(a,i.targetDirection)<0?H.scaleOrientMinDistance:o;return e.farDistance=n,t})),e)])}_updateManipulatorVisibility(){const e=this._someManipulatorSelected(),i=null!=this._forceHoveringTask||this._someManipulatorHovering(),t=this._fieldOfViewManipulation.hovering,a=this.parentTool.creating;let o=[];const n=e=>{o.push(e.disableDisplay())};e||!a&&i?this.removeHandles(x):(this._scaleOrientManipulation.forEachManipulator(n),this._moveManipulation.forEachManipulator(n),this.addHandles(o,x),o=[]),e||!a&&i||a&&t?this.removeHandles(A):(this._fieldOfViewManipulation.forEachManipulator(n),this.addHandles(o,A)),e||!a?this.removeHandles(z):this.addHandles(this._observerManipulator.disableDisplay(),z)}_resetHoveringTask(){this._forceHoveringTask=l(this._forceHoveringTask),this._updateManipulatorVisibility()}_forEachManipulator(e){this._forEachManipulation((i=>{i.forEachManipulator(e)})),e(this._observerManipulator)}_forEachManipulation(e){e(this._moveManipulation),e(this._fieldOfViewManipulation),e(this._scaleOrientManipulation)}get test(){return{moveManipulation:this._moveManipulation,fieldOfViewManipulation:this._fieldOfViewManipulation,scaleOrientManipulation:this._scaleOrientManipulation,viewshedComputedData:this.viewshedComputedData,setHoveringTimeoutPromise:e=>{this._forceHoveringTestPromise=e}}}};e([m({constructOnly:!0})],U.prototype,\"analysis\",void 0),e([m({constructOnly:!0})],U.prototype,\"analysisViewData\",void 0),e([m({constructOnly:!0})],U.prototype,\"parentTool\",void 0),e([m({constructOnly:!0,nonNullable:!0})],U.prototype,\"view\",void 0),e([m()],U.prototype,\"viewshed\",null),e([m()],U.prototype,\"_grabbing\",void 0),e([m()],U.prototype,\"grabbing\",null),e([m()],U.prototype,\"viewshedComputedData\",void 0),e([m()],U.prototype,\"observer\",null),U=e([f(\"esri.views.3d.analysis.Viewshed.ViewshedSubTool\")],U);const I=b(),R=new n(0,180);export{U as ViewshedSubTool};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../analysis/Viewshed.js\";import{makeHandle as i}from\"../../../../core/handleUtils.js\";import\"../../../../core/has.js\";import{mapCollection as s}from\"../../../../core/mapCollectionUtils.js\";import{rad2deg as a}from\"../../../../core/mathUtils.js\";import{destroyMaybe as n}from\"../../../../core/maybe.js\";import{when as o,watch as l,syncAndInitial as r,sync as d,initial as c}from\"../../../../core/reactiveUtils.js\";import{property as h}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as u}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{create as p}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{a as m,H as g,i as v,p as w,e as _}from\"../../../../chunks/vec32.js\";import{create as V}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import f from\"../../../../geometry/Point.js\";import{fromPositionAndNormal as b,create as y,projectPoint as S}from\"../../../../geometry/support/plane.js\";import{creationVerticalOffset as T}from\"./ViewshedConfiguration.js\";import{ViewshedSubTool as C}from\"./ViewshedSubTool.js\";import{Manipulator3D as D}from\"../../interactive/Manipulator3D.js\";import{Settings as M}from\"../../interactive/editingTools/settings.js\";import{ExtendedLineVisualElement as j}from\"../../interactive/visualElements/ExtendedLineVisualElement.js\";import{LaserlineVisualElement as H}from\"../../interactive/visualElements/LaserlineVisualElement.js\";import{toGraphic as I}from\"../../webgl-engine/lib/intersectorUtilsConversions.js\";import{RenderOccludedFlag as P}from\"../../webgl-engine/lib/Material.js\";import{AnalysisToolBase as E}from\"../../../interactive/AnalysisToolBase.js\";import{sketchKeys as L}from\"../../../interactive/keybindings.js\";import{newToolIntersector as k}from\"../../../interactive/ToolIntersector.js\";import{createScreenPointArrayFromEvent as O}from\"../../../support/screenUtils.js\";const R=Symbol(\"interactionVisuals\");let W=class extends E{constructor(e){super(e),this.removeIncompleteOnCancel=!1,this.automaticManipulatorSelection=!1,this._stagedViewshed=null,this._stagedViewshedComputedData=null,this._placementMode=q,this._creationState=!1,this._interactionVisualElements=null,this._settings=new M({getTheme:()=>this.view.effectiveTheme}),this._selectedManipulator=null}initialize(){this._intersector=k(this.view.state.viewingMode),this._createInteractionVisuals();const e=this.analysisViewData.viewshedComputedDataHandles;this.subToolHandles=s((()=>e),(({viewshedComputedData:e})=>{const t=new C({analysis:this.analysis,analysisViewData:this.analysisViewData,parentTool:this,view:this.view,viewshedComputedData:e});return{subTool:t,remove:()=>{this.selectedViewshed===e.viewshed&&(this.selectedViewshed=null),t.destroy()}}})),this.addHandles([o((()=>this._valid),(()=>this.finishToolCreation()),r),l((()=>this._stagedViewshed),(e=>{const t=this.analysisViewData.viewshedComputedDataHandles;this._stagedViewshedComputedData=null!=e&&null!=t?this._findSubTool(e)?.viewshedComputedData:null}),r),this.analysis.viewsheds.on(\"after-remove\",(e=>{const t=this._stagedViewshed;null!=t&&e.item===t&&this.analysis.viewsheds.add(t)})),l((()=>this.firstGrabbedManipulator),(e=>{if(null!=e){const t=this._findSubTool(e)?.viewshed;this.selectedViewshed=t,this._selectManipulator(e)}else this._selectedSubTool?.onManipulatorSelectionChanged()}),d),l((()=>this.view.activeTool),(e=>{e!==this&&null!=e&&(this.selectedViewshed=null)})),o((()=>{const e=this.selectedViewshedComputedData;return null==e?null:{subTool:this._selectedSubTool,observer:e.observerRenderSpace,target:e.targetRenderSpace}}),(e=>{const{subTool:t,observer:i,target:s}=e;t?.moveInteractionState.dragging?this._updateInteractionVisualsLocation(i,!0):t?.scaleOrientInteractionState.dragging&&this._updateInteractionVisualsLocation(s,!1)}),c),l((()=>this.creating),(()=>this.updateInteractionVisualsVisibility())),l((()=>this.selectedViewshed),(e=>{const t=this._selectedManipulator,i=this._selectedSubTool;null==e?this._selectManipulator(null):null!=t&&i.hasManipulator(t)||this._selectManipulator(i.discManipulator)}),c)])}destroy(){this.subToolHandles=n(this.subToolHandles),this.removeHandles(R)}onDeactivate(){this.removeStaged(),this._creationState=!1}get _valid(){return this.analysisViewData.viewshedComputedDataHandles?.some((e=>e.viewshedComputedData.valid))??!1}get cursor(){return this.creating?\"crosshair\":null}get _selectedSubTool(){return this._findSubTool(this.selectedViewshed)}_selectManipulator(e){const t=this._selectedManipulator;t!==e&&(this._selectedManipulator=e,null!=t&&(t.selected=!1),null!=e&&(e.selected=!0),this._findSubTool(t)?.onManipulatorSelectionChanged(),this._selectedSubTool?.onManipulatorSelectionChanged())}get selectedViewshed(){return this.analysisViewData.selectedViewshed}set selectedViewshed(e){this.analysisViewData.selectedViewshed=e}get selectedViewshedComputedData(){return this._selectedSubTool?.viewshedComputedData}get stagedViewshed(){return this._stagedViewshed}get grabbing(){return this.subToolHandles.some((({subTool:e})=>e.grabbing))}get creating(){return this._creationState&&this.active}get isPlacingTarget(){return\"placing-target\"===this._creationState}place(e){this.selectedViewshed=null,this._placementMode=e,this._creationState=\"placing-observer\",this._finishToolCreationIfValid()}onManipulatorSelectionChanged(){this.subToolHandles.forEach((e=>e.subTool.onManipulatorSelectionChanged()))}onInputEvent(e){switch(e.type){case\"immediate-double-click\":this._doubleClickHandler(e);break;case\"pointer-move\":this._pointerMoveHandler(e);break;case\"key-down\":L.cancel===e.key?this._cancelKeyHandler(e):L.delete.includes(e.key)&&this._deleteKeyHandler();break;case\"hold\":this.updateInteractionVisualsVisibility(!0)}}onInputEventAfter(e){if(\"immediate-click\"===e.type)this._clickPlacementHandler(e)}onActivate(){this._placementMode=q}_clickPlacementHandler(e){if(!this.creating||this.hasFocusedManipulators)return;const i=this._intersectScreen(e,B);if(null!=i){if(\"placing-observer\"===this._creationState){i.mapPoint.z=(i.mapPoint.z??0)+T;const e=new t({observer:i.mapPoint.clone(),feature:i.feature});this.analysis.viewsheds.add(e),this._stagedViewshed=e,this._creationState=\"placing-target\",this._updateStagedViewshed(i.scenePoint)}else if(\"placing-target\"===this._creationState){this._updateStagedViewshed(i.scenePoint);const e=this._stagedViewshed;this._stagedViewshed=null,\"multiple\"===this._placementMode?this._creationState=\"placing-observer\":(this._creationState=!1,this._stagedViewshed=null,this._finishToolCreationIfValid(),this.view.activeTool=null),this.selectedViewshed=e}e.stopPropagation()}}_doubleClickHandler(e){this.creating&&(this.removeStaged(),this._creationState=!1,this.view.activeTool=null,e.stopPropagation())}_pointerMoveHandler(e){if(!this.creating)return;const t=this._intersectScreen(e,B);null!=t&&(this._updateInteractionVisualsLocation(t.scenePoint,!1),this._updateStagedViewshed(t.scenePoint))}_cancelKeyHandler(e){this.creating?this._onCancelWhileCreating(e):this.grabbing||(this.selectedViewshed=null,e.stopPropagation())}_onCancelWhileCreating(e){const t=this.removeStaged();this._finishToolCreationIfValid(),t?(this._creationState=\"placing-observer\",this.selectedViewshed=null,\"multiple\"===this._placementMode&&e.stopPropagation()):this._creationState=!1}_deleteKeyHandler(){this.creating&&(this.removeStaged(),this._creationState=\"placing-observer\"),null!=this.selectedViewshed&&this.analysis.viewsheds.remove(this.selectedViewshed)}_finishToolCreationIfValid(){this._valid&&this.finishToolCreation()}_updateStagedViewshed(e){const t=this._stagedViewshed,i=this._stagedViewshedComputedData;if(null==t||null==i)return;const{heading:s,tilt:a,farDistance:n}=x(this.view,i,e);t.farDistance=n,t.tilt=a,t.heading=s}removeStaged(){const e=this._stagedViewshed;return null!=e&&(this._stagedViewshed=null,this.analysis.viewsheds.remove(e),!0)}_intersectScreen(e,t){const i=O(e);this.view.sceneIntersectionHelper.intersectToolIntersectorScreen(i,this._intersector);const s=this._intersector.results.min,a=t.scenePoint;if(!s.getIntersectionPoint(a))return null;const n=t.mapPoint;return n.spatialReference=this.view.spatialReference,this.view.renderCoordsHelper.fromRenderCoords(a,n),null==n?null:(t.feature=I(s,this.view),t)}_createInteractionVisuals(){this.removeHandles(R);const e=this._settings.visualElements,t=new H({view:this.view,attached:!1,style:{glowWidth:e.heightPlane.glowWidth,innerWidth:e.heightPlane.innerWidth},isDecoration:!0}),s=new j({view:this.view,extensionType:e.zVerticalLine.extensionType,attached:!1,innerWidth:1,writeDepthEnabled:!1,renderOccluded:P.OccludeAndTransparent,isDecoration:!0});this._interactionVisualElements={laserline:t,verticalLine:s},this.addHandles([l((()=>e.zVerticalLine),(e=>e.apply(s)),r),l((()=>e.heightPlane),(e=>e.apply(t)),r),i((()=>{t.destroy(),s.destroy(),this._interactionVisualElements=null}))],R)}updateInteractionVisualsVisibility(e=!1){const t=this.creating,i=this.analysisViewData.visible,s=this._selectedSubTool,a=this.selectedViewshedComputedData,n=(e,t)=>{const i=this._interactionVisualElements;null!=i&&(i.verticalLine.attached=t,i.laserline.attached=e)};if(t)return void n(i,!1);if(null==s||null==a)return void n(!1,!1);const o=s.moveInteractionState,l=e?o.grabbing:o.dragging,r=s.scaleOrientInteractionState,d=e?r.grabbing:r.dragging,c=i&&(l||d);if(n(c,l),c){const e=l?a.observerRenderSpace:a.targetRenderSpace;this._updateInteractionVisualsLocation(e,l)}}_updateInteractionVisualsLocation(e,t){const i=this._interactionVisualElements;if(null==i)return;const{laserline:s,verticalLine:a}=i;s.heightManifoldTarget=e,s.intersectsWorldUpAtLocation=t?e:null,null!=e&&a.setStartEndFromWorldDownAtLocation(e)}_findSubTool(e){if(null==e)return null;const t=e instanceof D?t=>t.subTool.hasManipulator(e):t=>t.subTool.viewshed===e;return this.subToolHandles?.find(t)?.subTool}get test(){}};function x(e,t,i){const s=t.observerRenderSpace,n=m(U,i,s),o=g(n)*t.metersPerUnit,l=e.renderCoordsHelper.basisMatrixAtPosition(s,F),r=v(A,l[8],l[9],l[10]),d=b(s,r,G),c=S(d,i,z),h=m(c,c,s),u=(g(h)<1e-4?90:a(w(n,h)))*(_(r,n)<0?-1:1)+90,p=v(K,l[4],l[5],l[6]),V=a(w(p,h)),f=v(K,l[0],l[1],l[2]);return{heading:_(h,f)<0?360-V:V,tilt:u,farDistance:o}}e([h({constructOnly:!0})],W.prototype,\"view\",void 0),e([h()],W.prototype,\"analysisViewData\",void 0),e([h()],W.prototype,\"removeIncompleteOnCancel\",void 0),e([h()],W.prototype,\"automaticManipulatorSelection\",void 0),e([h({constructOnly:!0})],W.prototype,\"analysis\",void 0),e([h()],W.prototype,\"subToolHandles\",void 0),e([h()],W.prototype,\"_stagedViewshed\",void 0),e([h()],W.prototype,\"_stagedViewshedComputedData\",void 0),e([h()],W.prototype,\"_placementMode\",void 0),e([h()],W.prototype,\"_creationState\",void 0),e([h()],W.prototype,\"_valid\",null),e([h({readOnly:!0})],W.prototype,\"cursor\",null),e([h()],W.prototype,\"_selectedManipulator\",void 0),e([h()],W.prototype,\"_selectedSubTool\",null),e([h()],W.prototype,\"selectedViewshed\",null),e([h()],W.prototype,\"selectedViewshedComputedData\",null),e([h()],W.prototype,\"stagedViewshed\",null),e([h()],W.prototype,\"grabbing\",null),e([h()],W.prototype,\"creating\",null),e([h()],W.prototype,\"isPlacingTarget\",null),W=e([u(\"esri.views.3d.analysis.Viewshed.ViewshedTool\")],W);const U=V(),A=V(),z=V(),K=V(),F=p(),G=y(),B={mapPoint:new f,scenePoint:V(),feature:null},q=\"multiple\";export{W as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{deg2rad as e}from\"../../../../core/mathUtils.js\";import{fromScaling as t,mul as r,fromTranslation as s,fromRotation as i}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as o}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{i as a,c as n,t as l}from\"../../../../chunks/vec32.js\";import{fromValues as m,create as c}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{viewshedVisualizationConfiguration as f,arcAnglePerSegment as h}from\"../../analysis/Viewshed/ViewshedConfiguration.js\";import{getViewshedRotationMatrix as p,rotateBy as u}from\"../../analysis/Viewshed/viewshedToolUtils.js\";import{Object3DVisualElement as d}from\"./Object3DVisualElement.js\";import{Attribute as w}from\"../../webgl-engine/lib/Attribute.js\";import{Geometry as b}from\"../../webgl-engine/lib/Geometry.js\";import{VertexAttribute as v}from\"../../webgl-engine/lib/VertexAttribute.js\";import{ColorMaterial as g}from\"../../webgl-engine/materials/ColorMaterial.js\";class j extends d{constructor(e){super(e),this._material=null,this._viewshedComputedData=null,this._material=new g({...f.shapeMaterialParameters,isDecoration:this.isDecoration,writeDepth:!1}),this.applyProperties(e)}get viewshedComputedData(){return this._viewshedComputedData}set viewshedComputedData(e){this._viewshedComputedData=e,this.updateTransform()}updateTransform(){const e=this._viewshedComputedData;if(null==e)return;const i=o(),a=e.farDistanceRenderSpace;t(i,m(a,a,a)),p(e,E),r(i,E,i),s(E,this._viewshedComputedData.observerRenderSpace),r(i,E,i),this.transform=i}createExternalResources(){}destroyExternalResources(){}forEachMaterial(e){e(this._material)}createGeometries(e){const{_material:t,viewshedComputedData:r}=this;if(null==r||null==t||!r.valid)return;D(t,r).forEach((t=>e.addGeometry(t)))}}function D(t,r){const{horizontalFieldOfView:s,verticalFieldOfView:o}=r,m=a(_,0,0,1),c=a(x,0,1,0),f=a(V,1,0,0);u(m,m,e(o/2),c),u(m,m,e(s/2),f);const p=e=>Math.ceil(Math.abs(e)/h)+1,d=e(s),g=n(y,f),j=p(d),D=C(-d/(j-1)),O=i(E,D,g),R=e(-o),T=p(R),G=C(R/(T-1)),N=n(x,c),P=i(M,e(s)/2,f);l(N,N,P);const S=M,A=[],F=n(V,m);for(let e=0;e<j;e++){i(S,G,N);for(let t=0;t<T;t++){const r=3*(t*j+e);A[r]=F[0],A[r+1]=F[1],A[r+2]=F[2],l(F,F,S)}l(N,N,O),l(m,m,O),n(F,m)}const I=j*T;A[3*I]=0,A[3*I+1]=0,A[3*I+2]=0;const U=[];for(let e=0;e<j-1;e++)for(let t=0;t<T-1;t++){const r=6*(t*(j-1)+e);U[r]=t*j+e,U[r+1]=(t+1)*j+e,U[r+2]=t*j+e+1,U[r+3]=t*j+e+1,U[r+4]=(t+1)*j+e,U[r+5]=(t+1)*j+e+1}const k=[U];if(360!==s&&0!==o){const e=[],t=[];for(let r=0;r<T-1;r++){const s=3*r;e[s]=I,e[s+1]=(r+1)*j,e[s+2]=r*j,t[s]=I,t[s+1]=r*j+j-1,t[s+2]=(r+1)*j+j-1}k.push(e,t)}if(180!==o&&0!==s){const e=[],t=[];for(let r=0;r<j-1;r++){const s=3*r;e[s]=I,e[s+1]=r,e[s+2]=r+1,t[s]=I,t[s+1]=r+(T-1)*j+1,t[s+2]=r+(T-1)*j}k.push(e,t)}return k.map((e=>{const r=[[v.POSITION,new w(A,e,3,!0)]];return new b(t,r)}))}function C(e){return isNaN(e)?1:e}const _=c(),x=c(),V=c(),y=c(),E=o(),M=o();export{j as ViewshedShapeVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../Color.js\";import i from\"../../../../core/Accessor.js\";import\"../../../../core/has.js\";import{equals as s}from\"../../../../core/lang.js\";import{deg2rad as r}from\"../../../../core/mathUtils.js\";import{destroyMaybe as o}from\"../../../../core/maybe.js\";import{watch as a,initial as l}from\"../../../../core/reactiveUtils.js\";import{property as n}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/Logger.js\";import{subclass as c}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{fromRotation as h}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as m}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{t as d,i as u,a as p,H as _,n as f,g as V,p as v,u as w,c as E,f as b}from\"../../../../chunks/vec32.js\";import{create as g,clone as C}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{viewshedVisualizationConfiguration as L,arcAnglePerSegment as A}from\"./ViewshedConfiguration.js\";import D from\"./ViewshedTool.js\";import{LineVisualElement as y}from\"../../interactive/visualElements/LineVisualElement.js\";import{PointVisualElement as j}from\"../../interactive/visualElements/PointVisualElement.js\";import{ViewshedShapeVisualElement as F}from\"../../interactive/visualElements/ViewshedShapeVisualElement.js\";import{RenderOccludedFlag as O}from\"../../webgl-engine/lib/Material.js\";import{createStipplePatternSimple as R}from\"../../webgl-engine/materials/lineStippleUtils.js\";let S=class extends i{constructor(e){super(e),this.visible=!0,this._viewshedCorners={topLeft:g(),topRight:g(),bottomLeft:g(),bottomRight:g()},this._arcCenterPoints={top:g(),bottom:g(),left:g(),right:g()},this._parallelCenters={top:g(),bottom:g()}}initialize(){const e={view:this.view,isDecoration:!0},t={...e,color:this._color,renderOccluded:O.OccludeAndTransparent},i={...t,stipplePattern:R(2)};this._observerVisualElement=new j({...e,...L.observerPointConfiguration}),this._shapeVisualElement=new F({...e,isDecoration:this.isDecoration}),this._frameLinesVisualElement=new y(t),this._leftArcVisualElement=new y(t),this._rightArcVisualElement=new y(t),this._topArcVisualElement=new y(t),this._bottomArcVisualElement=new y(t),this._centralLongitude=new y(i),this._centralLatitude=new y(i),this.addHandles([a((()=>{const e=this.viewshedComputedData;if(!e?.valid)return null;const t=this._viewshedCorners,i=this._arcCenterPoints,s=this._parallelCenters;return e.cornerPoints(t),e.arcCentersPoints(i),e.parallelCenterPoints(s),{viewshedComputedData:e,corners:t,arcCenters:i,parallelCenters:s,interactive:this.analysisViewData.interactive,selected:this._selected}}),(e=>{const t=null!=e;this._forEachVisualElement((e=>e.attached=t)),t&&this._updateVisualElements(e)}),{initial:!0,equals:s}),a((()=>{const{viewshedComputedData:e}=this,{horizontalFieldOfView:t,verticalFieldOfView:i}=e??{};return{viewshedComputedData:e,horizontalFieldOfView:t,verticalFieldOfView:i}}),(({viewshedComputedData:e})=>{const{_shapeVisualElement:t}=this;e!==t.viewshedComputedData&&(t.viewshedComputedData=e),this._shapeVisualElement.recreateGeometry()}),l),a((()=>{const{interactive:e}=this.analysisViewData;return{visible:this.visible,selected:e&&this._selected,staged:e&&this._staged,horFovNot360:360!==this.viewshedComputedData?.horizontalFieldOfView}}),(({visible:e,selected:t,staged:i,horFovNot360:s})=>{const r=t||i;this._shapeVisualElement.visible=e,this._topArcVisualElement.visible=e,this._bottomArcVisualElement.visible=e,this._frameLinesVisualElement.visible=e&&s;const o=e&&(t||s);this._leftArcVisualElement.visible=o,this._rightArcVisualElement.visible=o,this._forEachLineVisualElement((e=>{e.width=r?L.frameWidthSelected:L.frameWidthNotSelected,e.renderOccluded=t?O.OccludeAndTransparent:O.Occlude})),[this._centralLatitude,this._centralLongitude].forEach((i=>{i.width=2*(r?L.frameWidthSelected:L.frameWidthNotSelected),i.visible=e&&t}))}),l),a((()=>{const{analysisViewData:{interactive:e,tool:t},_selected:i,visible:s}=this,r=this.view.activeTool,o=!t?.active&&r instanceof D&&r.creating;return{observerVisible:s&&!i&&(!e||(t?.creating??!1)||o),color:this._color}}),(({observerVisible:e,color:t})=>{this._observerVisualElement.visible=e,this._forEachLineVisualElement((e=>e.color=t))}),l)])}get _color(){const{viewshedComputedData:e,_selected:i,analysisViewData:s}=this;if(null==e)return t.toUnitRGBA(L.frameColor);const r=s.tool?.active||s.interactive,o=e.viewshed===s.tool?.stagedViewshed,a=r&&(i||o)?this.view.effectiveTheme.accentColor:L.frameColor;return t.toUnitRGBA(a)}get _selected(){const{viewshedComputedData:e,analysisViewData:{selectedViewshedComputedData:t}}=this;return null!=e&&e===t}get _staged(){const{analysisViewData:{tool:e},viewshedComputedData:t}=this;return null!=e&&e.creating&&e.stagedViewshed===t?.viewshed}destroy(){this._observerVisualElement=o(this._observerVisualElement),this._shapeVisualElement=o(this._shapeVisualElement),this._frameLinesVisualElement=o(this._frameLinesVisualElement),this._leftArcVisualElement=o(this._leftArcVisualElement),this._rightArcVisualElement=o(this._rightArcVisualElement),this._topArcVisualElement=o(this._topArcVisualElement),this._bottomArcVisualElement=o(this._bottomArcVisualElement),this._centralLongitude=o(this._centralLongitude),this._centralLatitude=o(this._centralLatitude)}_forEachLineVisualElement(e){[this._frameLinesVisualElement,this._leftArcVisualElement,this._rightArcVisualElement,this._topArcVisualElement,this._bottomArcVisualElement,this._centralLatitude,this._centralLongitude].forEach(e)}_forEachVisualElement(e){this._forEachLineVisualElement(e),e(this._observerVisualElement),e(this._shapeVisualElement)}_updateVisualElements(e){const{viewshedComputedData:t,corners:i,arcCenters:s,parallelCenters:r}=e,o=C(t.observerRenderSpace);this._observerVisualElement.geometry=t.observer,this._shapeVisualElement.updateTransform(),this._updateFrameLines(o,i),this._updateFrameArcs(t,i,r),this._updateCentralHelperArcs(t,s)}_updateFrameLines(e,t){this._frameLinesVisualElement.geometry=[[e,t.topLeft],[e,t.topRight],[e,t.bottomLeft],[e,t.bottomRight]]}_updateFrameArcs(e,t,i){const{observerRenderSpace:s,rightVector:o,horizontalFieldOfView:a,tiltedUpVector:l}=e,n=r(a),c=g(),p=m();h(p,n/2,l),d(c,o,p),P(this._leftArcVisualElement,s,t.bottomLeft,t.topLeft,\"forward\",c),h(p,-n/2,l),u(c,0,0,0),d(c,o,p),P(this._rightArcVisualElement,s,t.bottomRight,t.topRight,\"forward\",c);const _=a>180?\"backward\":\"forward\";P(this._topArcVisualElement,i.top,t.topRight,t.topLeft,_,l),P(this._bottomArcVisualElement,i.bottom,t.bottomRight,t.bottomLeft,_,l)}_updateCentralHelperArcs(e,t){const i=e.observerRenderSpace,s=e.horizontalFieldOfView>=180?\"backward\":\"forward\";P(this._centralLatitude,i,t.right,t.left,s,e.tiltedUpVector),P(this._centralLongitude,i,t.top,t.bottom,\"forward\",e.leftVector)}get test(){}};function P(e,t,i,s,r,o,a=A){const l=g();p(l,i,t);const n=_(l),c=g();p(c,s,t),f(c,c),V(c,c,n);let u=v(l,c);const L=C(o);\"backward\"===r&&(w(L,L),u=-(2*Math.PI-u));const D=[],y=Math.ceil(Math.abs(u)/a),j=m();h(j,u/y,L);const F=g();E(F,l);const O=g();E(O,i);for(let h=0;h<y;h++){const e=g();E(e,O),d(F,F,j),b(O,t,F);const i=g();E(i,O),D.push([e,i])}e.geometry=D}e([n()],S.prototype,\"view\",void 0),e([n({constructOnly:!0})],S.prototype,\"isDecoration\",void 0),e([n()],S.prototype,\"analysisViewData\",void 0),e([n()],S.prototype,\"viewshedComputedData\",void 0),e([n()],S.prototype,\"visible\",void 0),e([n()],S.prototype,\"_color\",null),e([n()],S.prototype,\"_selected\",null),e([n()],S.prototype,\"_staged\",null),S=e([c(\"esri.views.3d.analysis.Viewshed.ViewshedVisualization\")],S);export{S as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../../../../chunks/tslib.es6.js\";import i from\"../../../../core/Accessor.js\";import{destroyHandle as e}from\"../../../../core/handleUtils.js\";import\"../../../../core/has.js\";import{mapCollection as o}from\"../../../../core/mapCollectionUtils.js\";import{watch as t,initial as r}from\"../../../../core/reactiveUtils.js\";import{property as a}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as l}from\"../../../../core/accessorSupport/decorators/subclass.js\";import n from\"./ViewshedVisualization.js\";let c=class extends i{get visible(){return this.analysisViewData.visible}constructor(s){super(s)}initialize(){const s=this.analysisViewData,i=o((()=>this.analysisViewData.viewshedComputedDataHandles),(({viewshedComputedData:i})=>{const e=new n({view:this.view,viewshedComputedData:i,analysisViewData:s,isDecoration:this.isDecoration});return{visualization:e,remove:()=>e.destroy()}}));this._viewshedVisualizations=i,this.addHandles([e(i),t((()=>this.visible),(s=>this._viewshedVisualizations.forEach((({visualization:i})=>i.visible=s))),r)])}get test(){}};s([a({constructOnly:!0})],c.prototype,\"analysisViewData\",void 0),s([a({constructOnly:!0,nonNullable:!0})],c.prototype,\"view\",void 0),s([a({constructOnly:!0})],c.prototype,\"isDecoration\",void 0),s([a()],c.prototype,\"visible\",null),c=s([l(\"esri.views.3d.analysis.Viewshed.ViewshedAnalysisVisualization\")],c);export{c as ViewshedAnalysisVisualization};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import{deg2rad as r}from\"../../../../core/mathUtils.js\";import{property as o}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as i}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{create as s}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{a as n,n as p,h as a,u as c,f as l,g as h}from\"../../../../chunks/vec32.js\";import{create as d,fromValues as u,fromArray as f}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import v from\"../../../../geometry/Point.js\";import{rotateBy as g}from\"./viewshedToolUtils.js\";var S;let m=S=class extends t{constructor(e){super(e),this.observerRenderSpaceOverride=null,this.needUpdateByFeature=!1}get observer(){return this.viewshed.observer??new v}get effectiveObserverRenderSpace(){return this.observerRenderSpaceOverride??this.observerRenderSpace}get effectiveObserver(){return this.renderSpaceToPoint(this.effectiveObserverRenderSpace,this.observer.spatialReference)}get effectiveTargetRenderSpace(){return this._computeTargetRenderSpace(this.effectiveObserverRenderSpace)}get farDistance(){return this.viewshed.farDistance}get farDistanceRenderSpace(){return this.farDistance/this.metersPerUnit}get heading(){return this.viewshed.heading}get tilt(){return this.viewshed.tilt}get feature(){return this.viewshed.feature}get tiltParallelToSurface(){return this.tilt-90}get horizontalFieldOfView(){return this.viewshed.horizontalFieldOfView}get verticalFieldOfView(){return this.viewshed.verticalFieldOfView}get observerRenderSpace(){return this._pointToRenderSpace(this.observer,d())}get target(){const e=this.targetRenderSpace;return this.renderSpaceToPoint(e,this.observer.spatialReference)}get targetRenderSpace(){return this._computeTargetRenderSpace(this.observerRenderSpace)}get targetDirection(){const e=n(d(),this.targetRenderSpace,this.observerRenderSpace);return p(e,e)}get tiltedUpVector(){const e=g(d(),this.upVector,-r(this.tiltParallelToSurface),this.leftVector);return p(e,e)}get _basis(){return this.renderCoordsHelper.basisMatrixAtPosition(this.observerRenderSpace,s())}get upVector(){const e=this._basis;return u(e[8],e[9],e[10])}get northVector(){const e=this._basis;return u(e[4],e[5],e[6])}get leftVector(){const e=this.upVector,t=g(d(),this.northVector,-r(this.heading),e);return a(t,e,t)}get rightVector(){return c(d(),this.leftVector)}clone(){return new S({renderCoordsHelper:this.renderCoordsHelper,viewshed:this.viewshed.clone()})}get valid(){return this.viewshed.valid}get metersPerUnit(){return this.renderCoordsHelper.spatialReference.metersPerUnit}pointOnSphere(e,t,o){const{observerRenderSpace:i,targetRenderSpace:s}=this,p=n(R,s,i);return g(p,p,-r(t),this.leftVector),g(p,p,-r(e),this.tiltedUpVector),l(o,p,i)}cornerPoints(e){const t=this.horizontalFieldOfView/2,r=this.verticalFieldOfView/2;this.pointOnSphere(-t,r,e.topLeft),this.pointOnSphere(t,r,e.topRight),this.pointOnSphere(-t,-r,e.bottomLeft),this.pointOnSphere(t,-r,e.bottomRight)}arcCentersPoints(e){const t=this.horizontalFieldOfView/2,r=this.verticalFieldOfView/2;this.pointOnSphere(0,r,e.top),this.pointOnSphere(0,-r,e.bottom),this.pointOnSphere(-t,0,e.left),this.pointOnSphere(t,0,e.right)}parallelCenterPoints(e){const t=this.observerRenderSpace,o=this.farDistanceRenderSpace*Math.sin(r(this.verticalFieldOfView/2)),i=h(R,this.tiltedUpVector,o);l(e.top,t,i),n(e.bottom,t,i)}renderSpaceToPoint(e,t){const r=R;return this.renderCoordsHelper.fromRenderCoords(e,r,t),new v(r[0],r[1],r[2],t)}_pointToRenderSpace(e,t){const r=f(e.toArray());return this.renderCoordsHelper.toRenderCoords(r,e.spatialReference,t),t}_computeTargetRenderSpace(e){const{leftVector:t,northVector:o,upVector:i}=this,s=this.farDistanceRenderSpace,n=d();return h(n,o,s),g(n,n,-r(this.heading),i),g(n,n,-r(this.tiltParallelToSurface),t),l(n,e,n),n}};e([o()],m.prototype,\"renderCoordsHelper\",void 0),e([o()],m.prototype,\"viewshed\",void 0),e([o()],m.prototype,\"observerRenderSpaceOverride\",void 0),e([o()],m.prototype,\"needUpdateByFeature\",void 0),e([o()],m.prototype,\"observer\",null),e([o()],m.prototype,\"effectiveObserverRenderSpace\",null),e([o()],m.prototype,\"effectiveObserver\",null),e([o()],m.prototype,\"effectiveTargetRenderSpace\",null),e([o()],m.prototype,\"farDistance\",null),e([o()],m.prototype,\"farDistanceRenderSpace\",null),e([o()],m.prototype,\"heading\",null),e([o()],m.prototype,\"tilt\",null),e([o()],m.prototype,\"feature\",null),e([o()],m.prototype,\"tiltParallelToSurface\",null),e([o()],m.prototype,\"horizontalFieldOfView\",null),e([o()],m.prototype,\"verticalFieldOfView\",null),e([o()],m.prototype,\"observerRenderSpace\",null),e([o()],m.prototype,\"target\",null),e([o()],m.prototype,\"targetRenderSpace\",null),e([o()],m.prototype,\"targetDirection\",null),e([o()],m.prototype,\"tiltedUpVector\",null),e([o()],m.prototype,\"_basis\",null),e([o()],m.prototype,\"upVector\",null),e([o()],m.prototype,\"northVector\",null),e([o()],m.prototype,\"leftVector\",null),e([o()],m.prototype,\"rightVector\",null),e([o()],m.prototype,\"valid\",null),e([o()],m.prototype,\"metersPerUnit\",null),m=S=e([i(\"esri.views.3d.analysis.Viewshed.ViewshedComputedData\")],m);const R=d();export{m as ViewshedComputedData};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import{rad2deg as s,deg2rad as e}from\"../../../../core/mathUtils.js\";import{property as o}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as r}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{mul as i,fromTranslation as n,fromScaling as a}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as c}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{create as l,fromArray as p}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import m from\"../../webgl/RenderCamera.js\";import{assert as h}from\"./Util.js\";let g=class extends m{constructor(){super(...arguments),this.sectionAngles=l()}get sectionAnglesDeg(){return p(this.sectionAngles.map((t=>s(t))))}set sectionAnglesDeg(t){this.sectionAngles=p(t.map((t=>e(t))))}get projectionMatrix(){return i(c(),this.sectionMatrix,this._projectionMatrixInternal)}get sectionMatrix(){const t=this.sectionAngles[0],s=this.sectionAngles[1],e=this.sectionAngles[2],o=this.sectionAngles[3];h(t<=s),h(e<=o);const r=2*Math.tan(this.fovX/2),l=2*Math.tan(this.fovY/2),p=Math.tan(t),m=Math.tan(s),g=Math.tan(e),f=m-p,M=Math.tan(o)-g,j=r/f,u=l/M,A=-(p+f/2)/r*2,x=-(g+M/2)/l*2,b=c();n(b,[A,x,0]);const d=c();a(d,[j,u,1]);const v=c();return i(v,d,b)}get _sectionRatioX(){const t=Math.tan(this.sectionAngles[0]),s=Math.tan(this.sectionAngles[1]),e=2*Math.tan(this.fovX/2);return Math.min(1,(s-t)/e)}setViewport(t,s){const e=s*this._sectionRatioX;return this.viewport=[t[0],t[1],e,s],e}};t([o()],g.prototype,\"sectionAngles\",void 0),t([o()],g.prototype,\"sectionAnglesDeg\",null),t([o()],g.prototype,\"projectionMatrix\",null),t([o()],g.prototype,\"sectionMatrix\",null),t([o()],g.prototype,\"_sectionRatioX\",null),g=t([r(\"esri.views.3d.webgl-engine.lib.ViewshedFaceCamera\")],g);export{g as ViewshedFaceCamera};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport has from\"../../../../core/has.js\";import{clamp as t}from\"../../../../core/mathUtils.js\";import{releaseMaybe as e}from\"../../../../core/maybe.js\";import{fromRotation as i}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as s}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{a as r,f as a,u as o,t as h}from\"../../../../chunks/vec32.js\";import{create as c}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{DepthFormat as n}from\"../core/FBOCacheFormats.js\";import{applyTextureResizeModulo as l}from\"./textureUtils.js\";import{ViewshedFaceCamera as u}from\"./ViewshedFaceCamera.js\";import{DepthStencilAttachment as m,SizedDepthFormat as f,FramebufferBit as d}from\"../../../webgl/enums.js\";import{isSizedDepthStencilFormat as p}from\"../../../webgl/textureUtils.js\";class g{constructor(){this.textureSizeQuality=1,this.textureSizeModHighQuality=1.3,this.textureSizeModLowQuality=.9,this.textureSizeMultiple=128,this.toleranceSides=5,this.toleranceBottomTop=10}textureSizeModifier(t){const e=t?this.textureSizeModHighQuality:this.textureSizeModLowQuality;return this.textureSizeQuality*e}textureResizeModulo(t){return Math.ceil(t/this.textureSizeMultiple)*this.textureSizeMultiple}}const _=[\"front\",\"left\",\"right\",\"back\",\"top\",\"bottom\"];function x(t){return![\"top\",\"bottom\"].includes(t)}class w{constructor(t){this._fbos=t,this._faces={},this._width=0,this._height=0,this.settings=new g,this._maxTextureSize=Math.min(has(\"esri-mobile\")?4096:16384,t.rctx.parameters.maxTextureSize)}get depthTexture(){return this._handle?.getTexture(m)}get ready(){return null!=this.depthTexture&&0!==this._width&&0!==this._height}get nearFar(){const t=this.faces;return 0===t.length?null:t[0].nearFar}get numActiveFaces(){const t=this._faces;let e=0;return Object.keys(t).forEach((i=>{t[i]&&(e+=1)})),e}get faces(){const t=this._faces,e=[];for(const i of _){const s=t[i];s&&e.push(s)}return e}get atlasRegions(){return this.faces.map((t=>[t.x/this._width,(t.x+t.width)/this._width,t.y/this._height,(t.y+t.height)/this._height]))}get viewshedProjectionMatrices(){return this.faces.map((t=>t.projectionMatrix))}get viewshedViewMatrices(){return this.faces.map((t=>t.viewMatrix))}_setupFaceCamera(e,n,l,m){const{effectiveObserverRenderSpace:f,tiltedUpVector:d,targetRenderSpace:p,farDistanceRenderSpace:g,horizontalFieldOfView:_,verticalFieldOfView:w}=n,b=c();r(b,p,f);const M=c(),S=c(),F=(t,e)=>{const r=c(),o=s();return i(o,t,e),h(r,b,o),a(r,f,r),r};let z,T=d;const O=Math.min(90,_),v=Math.min(90,Math.max(0,(_-90)/2));let j=-45,B=45,y=-45,k=45;if(x(e)){const e=e=>t(e,-45,45);y=e(-w/2)-this.settings.toleranceBottomTop,k=e(+w/2)+this.settings.toleranceBottomTop}switch(e){case\"front\":z=p,j=-O/2,B=O/2;break;case\"left\":z=F(Math.PI/2,d),j=45-v;break;case\"right\":z=F(-Math.PI/2,d),B=-45+v;break;case\"top\":z=a(M,f,d),T=o(S,b);break;case\"bottom\":z=r(M,f,d),T=b;break;case\"back\":z=F(Math.PI,d)}const P=new u({center:z,eye:f,up:T,far:g});P.sectionAnglesDeg=[j-this.settings.toleranceSides,B+this.settings.toleranceSides,y,k],P.fovY=Math.PI/2;const C=P.setViewport(l,m);return this._faces[e]=P,C}isActive(t){return this._computeActiveFaces(t).size>0}_computeActiveFaces(t){const e=new Set,{horizontalFieldOfView:i,verticalFieldOfView:s}=t,r=-s/2,a=s/2;return 0===i||0===s||(r<=45&&a>=-45&&e.add(\"front\"),i>90&&(e.add(\"left\"),e.add(\"right\")),i>270&&e.add(\"back\"),a>45-this.settings.toleranceBottomTop&&e.add(\"top\"),r<-45+this.settings.toleranceBottomTop&&e.add(\"bottom\")),e}_computeBaseTextureSize({pixelRatio:t,fullWidth:e,fullHeight:i},s,r,a){const o=s/t,h=this.settings.textureSizeModifier(r);return l(Math.max(e,i)*o*h,this._maxTextureSize/a)}_ensureFBO(t){const e=this._width,i=this._height,s=this._handle?.fbo;s&&s.width===e&&s.height===i&&t===p(s.depthStencilTexture?.descriptor?.internalFormat??f.DEPTH_COMPONENT16)||(this._handle?.release(),this._handle=this._allocateFBO(t))}_allocateFBO(t){const{_width:e,_height:i}=this,s=t?n.DEPTH24_STENCIL8:n.DEPTH16,r=this._fbos.acquire(e,i,\"viewshed shadow map\",s);return r.getTexture(m)?.setShadowFiltering(!1),r}clearFBO(t){const e=this._fbos.rctx;this._ensureFBO(t),e.bindFramebuffer(this._handle?.fbo),e.setClearColor(1,1,1,1),e.clear(d.COLOR|d.DEPTH)}dispose(){this._debugFBO||(this._handle=e(this._handle))}start(t,e,i,s,r=!1){this._faces={};const a=this._computeActiveFaces(e),o=a.size;if(0===o)return!1;const h=this._computeBaseTextureSize(t,s,i,o);let c=0,n=0,l=0;return _.filter((t=>a.has(t))).forEach((t=>{const i=b(t,o);i>n&&(l=Math.max(l,c),c=0),n=i;const s=i*h;c+=this._setupFaceCamera(t,e,[c,s],h)})),l=Math.max(l,c),this._width=this.settings.textureResizeModulo(l),this._height=M(o)*h,this.clearFBO(r),!0}finish(){}get test(){}}function b(t,e){if(e<4)return 0;const i=\"front\"===t||\"left\"===t;return 4===e?i?0:1:i||\"right\"===t?0:1}function M(t){return t<4?1:2}export{w as ViewshedShadowMap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{ReloadableShaderModule as e}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as r}from\"../core/shaderTechnique/ShaderTechnique.js\";import{a as i}from\"../../../../chunks/Viewshed.glsl.js\";import{makePipelineState as o,unpremultipliedAlphaToPremultipliedAlpha as s,defaultColorWrite as t}from\"../../../webgl/renderState.js\";class l extends r{constructor(r,o){super(r,o,new e(i,(()=>import(\"./Viewshed.glsl.js\"))))}initializePipeline(){return o({colorWrite:t,blending:s})}}export{l as ViewshedTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import s from\"../../../../core/Collection.js\";import{deg2rad as t}from\"../../../../core/mathUtils.js\";import{disposeMaybe as r}from\"../../../../core/maybe.js\";import{watch as i,when as o,initial as a,sync as n}from\"../../../../core/reactiveUtils.js\";import{property as h}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as d}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{translate as c,fromTranslation as p,scale as w,mul as m}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as l}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{a as u,j as f}from\"../../../../chunks/vec32.js\";import{create as v,fromValues as _}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{h as V}from\"../../../../chunks/sphere.js\";import{InternalRenderCategory as g}from\"../../webgl.js\";import b from\"../../webgl/RenderNode.js\";import{RenderRequestType as M}from\"./basicInterfaces.js\";import{RenderFeature as j}from\"./RenderFeature.js\";import{ViewshedShadowMap as S}from\"./ViewshedShadowMap.js\";import{V as y}from\"../../../../chunks/Viewshed.glsl.js\";import{ViewshedTechnique as R}from\"../shaders/ViewshedTechnique.js\";let P=class extends b{get shadowMap(){return this._shadowMap}get hasViewsheds(){return this._viewsheds.length>0}get _contentPixelRatio(){return this.view.state.contentPixelRatio}get _viewshedsInView(){return this._viewsheds.items.filter((e=>E(this.view,e)))}constructor(e){super(e),this.isDecoration=!1,this._passParameters=new y,this._viewsheds=new s,this._shadowMap=null,this.consumes={required:[g.VIEWSHED,\"normals\"]},this.produces=g.VIEWSHED,this.requireGeometryDepth=!0}initialize(){this._shadowMap=new S(this.fboCache),this.addHandles([i((()=>this.view.resolutionScale),(e=>{const s=this._shadowMap;s&&(s.settings.textureSizeQuality=e)}),a),o((()=>!this.hasViewsheds),(()=>this._shadowMap?.dispose())),i((()=>this._viewshedsInView.map((e=>[e.observerRenderSpace,e.heading,e.tilt,e.farDistance,e.horizontalFieldOfView,e.verticalFieldOfView]))),(()=>this.requestRender(M.UPDATE)),n)])}destroy(){this._shadowMap=r(this._shadowMap)}precompile(){if(this.hasViewsheds){this.techniques.precompile(R);for(const e of this._viewshedsInView)if(this._shadowMap?.isActive(e))return void this.view.stage.renderer.precompileViewshedShadowMap()}}render(e){const s=this.bindParameters,t=this.renderingContext,r=e.find((({name:e})=>e===g.VIEWSHED));if(!this.hasViewsheds||!s.depth||this.isDecoration&&!s.decorations)return r;this._passParameters.shadowMap=this._shadowMap??this._passParameters.shadowMap,this._passParameters.normals=e.find((({name:e})=>\"normals\"===e))?.getTexture();const i=this.techniques.get(R);if(!i?.compiled)return this.requestRender(M.UPDATE),r;const o=this.view.stage.renderer.isFeatureEnabled(j.HighResolutionViewshed);for(const a of this._viewshedsInView){if(!this._renderShadowCubeMap(s,a,o)||!this._shadowMap?.ready)continue;const e=this._setupViewshedParameters(a,s.camera);t.bindTechnique(i,s,e),t.bindFramebuffer(r.fbo),t.screen.draw()}return this.shadowMap?.dispose(),r}updateViewsheds(e){const s=this._viewsheds,{removes:t,adds:r}=e;if(t&&(Array.isArray(t)?s.removeMany(t):s.remove(t)),r)if(Array.isArray(r)){const e=r.filter((e=>!s.includes(e)));s.addMany(e)}else s.includes(r)||s.add(r)}_renderShadowCubeMap(e,s,t){const r=this._shadowMap;if(!r)return!1;const i=this.view.basemapTerrain.hasStencilEnabledExtents,o=r.start(e.camera,s,t,this._contentPixelRatio,i);return o&&r.faces.forEach((e=>this.view.stage.renderer.renderViewshedShadowMap(e))),r.finish(),o}_setupViewshedParameters(e,s){const r=this._shadowMap;if(!r)return this._passParameters;const i=this._passParameters,o=e.effectiveObserverRenderSpace;i.localOrigin=o,i.observerOffset=u(I,e.observerRenderSpace,e.effectiveObserverRenderSpace),i.fovs=[t(e.horizontalFieldOfView),t(e.verticalFieldOfView)],i.headingAndTilt=[t(e.heading),t(e.tiltParallelToSurface)],i.upVector=e.tiltedUpVector;const a=x(e.targetRenderSpace,o);i.targetVector=a;const n=new Array,h=new Array;for(let t=0;t<r.numActiveFaces;t++)c(O,r.viewshedViewMatrices[t],o),n.push(...O),A(r.viewshedProjectionMatrices[t],O,q),h.push(...q);return i.viewMatrices=n,i.projectionMatrices=h,i.volumeOffset=this.selectedViewshed?.()===e.viewshed?D(e,this.view,s.eye):0,i}get test(){return{viewsheds:this._viewsheds,shadowMap:this._shadowMap,viewshedsInView:this._viewshedsInView}}};function x(e,s){const t=v();return u(t,e,s)}function A(e,s,t){const r=_(.5,.5,.5);return p(t,r),w(t,t,r),m(t,t,e),m(t,t,s),t}function E(e,s){const t=V(s.observerRenderSpace,s.farDistanceRenderSpace);return!!e.ready&&e.frustum.intersectsSphere(t)}function D(e,s,t){if(null==e)return 0;const{observerRenderSpace:r,targetRenderSpace:i}=e,o=f(t,r)>f(t,i)?e.observer:e.target;return s.pixelSizeAt(o)}e([h()],P.prototype,\"selectedViewshed\",void 0),e([h()],P.prototype,\"isDecoration\",void 0),e([h()],P.prototype,\"shadowMap\",null),e([h()],P.prototype,\"hasViewsheds\",null),e([h()],P.prototype,\"_contentPixelRatio\",null),e([h()],P.prototype,\"_viewshedsInView\",null),e([h()],P.prototype,\"consumes\",void 0),e([h()],P.prototype,\"produces\",void 0),P=e([d(\"esri.views.3d.webgl-engine.lib.Viewshed\")],P);const I=v(),O=l(),q=l();export{P as Viewshed,D as computeOffsetScale};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{getFeatureId as t,updatePointsFromFeatureReference as s}from\"../../../analysis/featureReferenceUtils.js\";import i from\"../../../core/Accessor.js\";import\"../../../core/has.js\";import r from\"../../../core/Logger.js\";import{mapCollection as o}from\"../../../core/mapCollectionUtils.js\";import{abortMaybe as a,destroyMaybe as n}from\"../../../core/maybe.js\";import{watch as d,initial as l,when as h,syncAndInitial as c}from\"../../../core/reactiveUtils.js\";import{property as p}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/RandomLCG.js\";import{subclass as m}from\"../../../core/accessorSupport/decorators/subclass.js\";import{c as u,q as w}from\"../../../chunks/vec32.js\";import{create as v}from\"../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{canProjectWithoutEngine as f,isLoaded as V,projectOrLoad as y}from\"../../../geometry/projectionUtils.js\";import{projectBoundingRect as _}from\"../../../geometry/projection/projectBoundingRect.js\";import{containsPoint as g,empty as j}from\"../../../geometry/support/aaBoundingRect.js\";import{AnalysisView3D as R}from\"./AnalysisView3D.js\";import{logFailedGeometryProjectionError as b}from\"./support/projectionUtils.js\";import{ViewshedAnalysisVisualization as D}from\"./Viewshed/ViewshedAnalysisVisualization.js\";import{ViewshedComputedData as C}from\"./Viewshed/ViewshedComputedData.js\";import F from\"./Viewshed/ViewshedTool.js\";import{Intersector as H}from\"../webgl-engine/lib/Intersector.js\";import{StoreResults as O}from\"../webgl-engine/lib/IntersectorInterfaces.js\";import{Viewshed as U}from\"../webgl-engine/lib/Viewshed.js\";import{connectAnalysisViewToTool as A,removeAnalysisViewTool as S,startPlaceOperation as z}from\"../../analysis/analysisViewUtils.js\";let I=class extends(R(i)){constructor(e){super(e),this.type=\"viewshed-view-3d\",this.analysis=null,this.tool=null,this._selectedViewshed=null,this.viewshedComputedDataHandles=null,this.userOperation=null,this._viewshedRenderer=null,this._intersector=null}get selectedViewshed(){return this._selectedViewshed}set selectedViewshed(e){this._unselectOtherViewsheds(e),this._selectedViewshed=e}get selectedViewshedComputedData(){return this.tool?.selectedViewshedComputedData}get _isDecoration(){return!this.parent}initialize(){const e=this.view;this._viewshedRenderer=new U({view:e,selectedViewshed:()=>this.selectedViewshed??this.tool?.stagedViewshed,isDecoration:this._isDecoration}),this._intersector=new H(this.view.state.viewingMode),this._intersector.options.hud=!1,this._intersector.options.store=O.MIN,this.viewshedComputedDataHandles=o((()=>this.analysis.viewsheds),(t=>{const s=new C({renderCoordsHelper:e.renderCoordsHelper,viewshed:t}),i=Symbol();return this.addHandles([d((()=>({valid:s.valid,canProject:f(s.observer?.spatialReference,this.view.spatialReference)||V()})),(({valid:e,canProject:t},i)=>{this.visible&&(e&&t?this._addViewshedsToRenderer(s):i?.valid&&i?.canProject&&this._removeViewshedsFromRenderer(s),t||b(this.analysis,s.observer.spatialReference,r.getLogger(this)))}),l),...this._createFeatureReferenceHandles(s)],i),{viewshedComputedData:s,remove:()=>{this.removeHandles(i),this._removeViewshedsFromRenderer(s),s.destroy()}}})),this._analysisVisualization=new D({view:e,analysisViewData:this,isDecoration:this._isDecoration}),this.addHandles([d((()=>this.visible),(e=>{const t=this.viewshedComputedDataHandles;if(null==t)return;e||(this.selectedViewshed=null);const s=t.map((e=>e.viewshedComputedData)).filter((e=>e.valid)).toArray();e?this._addViewshedsToRenderer(s):this._removeViewshedsFromRenderer(s)})),d((()=>e.renderCoordsHelper),(e=>{this.viewshedComputedDataHandles?.forEach((({viewshedComputedData:t})=>t.renderCoordsHelper=e))})),A(this,F),h((()=>this.interactive),(()=>{this._unselectOtherViewsheds(this.selectedViewshed)}),c)])}destroy(){this.userOperation=a(this.userOperation),S(this),this._analysisVisualization=n(this._analysisVisualization);const e=this.viewshedComputedDataHandles;null!=e&&this._removeViewshedsFromRenderer(e.map((e=>e.viewshedComputedData)).toArray())}_createFeatureReferenceHandles(e){const{view:t}=this;return[d((()=>[t.state.camera,t.slice.plane,e.viewshed.observer,e.targetRenderSpace,e.verticalFieldOfView,e.horizontalFieldOfView,e.feature]),(()=>{this._updateObserverFromFeature(t,e)}),l),this._createElevationUpdateHandle(e),h((()=>e.needUpdateByFeature),(()=>{this._updateObserverFromFeature(t,e),e.needUpdateByFeature=!1}))]}_createElevationUpdateHandle(e){const t=(s,i)=>{const{view:r}=this,{observer:o}=e;if(null==o)return;const a=y(o,r.spatialReference);if(null!=a.pending)return void a.pending.finally((()=>t(s,i)));const n=a.geometry;null!=n&&(_(s,i,x,r.spatialReference),g(x,[n.x,n.y])&&(e.needUpdateByFeature=!0))};return this.view.elevationProvider.on(\"elevation-change\",(({extent:e,spatialReference:s})=>t(e,s)))}async createViewsheds(e){await z(this,{placementOptions:e,onToolActivated:e=>e.place(\"multiple\")})}place(e){return z(this,{placementOptions:e,onToolActivated:e=>e.place(\"single\")})}_addViewshedsToRenderer(e){this._viewshedRenderer.updateViewsheds({adds:e})}_removeViewshedsFromRenderer(e){this._viewshedRenderer.updateViewsheds({removes:e})}_updateObserverFromFeature(e,i){const r=i.observerRenderSpace,o=i.targetRenderSpace,a=u(v(),r),n={observer:r,observerSurfaceNormal:null,observerAdjusted:a,observerFeatureId:t(i.feature),target:o,targetSurfaceNormal:null,targetAdjusted:u(v(),o),targetFeatureId:null};s(e,this._intersector,n,(e=>Math.min(e,.05*i.farDistanceRenderSpace))),i.observerRenderSpaceOverride=w(a,r)?null:a}_unselectOtherViewsheds(e){if(null!=e)for(const t of this.view.tools.items)t!==this.tool&&t instanceof F&&(t.analysisViewData.selectedViewshed=null)}get test(){}};e([p({readOnly:!0})],I.prototype,\"type\",void 0),e([p({constructOnly:!0,nonNullable:!0})],I.prototype,\"analysis\",void 0),e([p()],I.prototype,\"tool\",void 0),e([p()],I.prototype,\"_selectedViewshed\",void 0),e([p()],I.prototype,\"selectedViewshed\",null),e([p()],I.prototype,\"selectedViewshedComputedData\",null),e([p()],I.prototype,\"viewshedComputedDataHandles\",void 0),e([p()],I.prototype,\"userOperation\",void 0),e([p()],I.prototype,\"_analysisVisualization\",void 0),e([p()],I.prototype,\"_viewshedRenderer\",void 0),I=e([m(\"esri.views.3d.analysis.ViewshedAnalysisView3D\")],I);const T=I,x=j();export{T as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{a as e,l as t,b as r}from\"../chunks/vec32.js\";import{create as n}from\"../core/libs/gl-matrix-2/factories/vec3f64.js\";import{create as l,fromPoints as o}from\"../geometry/support/ray.js\";import{StoreResults as i}from\"../views/3d/webgl-engine/lib/IntersectorInterfaces.js\";import{toGraphic as u,hasLod as s,getIntersectedFeatureBSRadius as a}from\"../views/3d/webgl-engine/lib/intersectorUtilsConversions.js\";function c(e,t){return d(e)===d(t)}function d(e){if(null==e)return null;const t=null!=e.layer?e.layer.id:\"\";let r=null;return r=null!=e.objectId?e.objectId:null!=e.layer&&\"objectIdField\"in e.layer&&null!=e.layer.objectIdField&&null!=e.attributes?e.attributes[e.layer.objectIdField]:e.uid,null==r?null:`o-${t}-${r}`}const b={json:{write:{writer:f,target:{\"feature.layerId\":{type:[Number,String],isRequired:!0},\"feature.objectId\":{type:[Number,String],isRequired:!0}}},origins:{\"web-scene\":{read:I}}}};function f(e,t){null!=e?.layer?.objectIdField&&null!=e.attributes&&(t.feature={layerId:e.layer.id,objectId:e.attributes[e.layer.objectIdField]})}function I(e){if(null!=e.layerId&&null!=e.objectId)return{uid:null,layer:{id:e.layerId,objectIdField:\"ObjectId\"},attributes:{ObjectId:e.objectId}}}function m(l,s,a,c){const{sceneIntersectionHelper:b}=l,{observer:f,observerFeatureId:I,targetFeatureId:m,target:g}=a;if(null==I&&null==m)return;c||(c=e=>e),e(p,f,g);const v=t(p),S=1;r(p,f,p,S/v);const F=o(p,g,y);s.options.store=i.ALL,b.intersectToolIntersectorRay(F,s);let N=null,w=null,R=null,A=null;for(const e of s.results.all){const t=u(e,l);if(null==t||null==e.distanceInRenderSpace)continue;const r=d(t);null!=r&&(null!=I&&r===I&&(N??=c(j(e,l,v)),e.distanceInRenderSpace-S<N&&(R=e)),null!=m&&r===m&&(w??=c(j(e,l,v)),null==A&&e.distanceInRenderSpace-S<v&&v-e.distanceInRenderSpace+S<w&&(A=e)))}const{observerAdjusted:T,targetAdjusted:h}=a;R?.getIntersectionPoint(T)?a.observerSurfaceNormal=R.getTransformedNormal(n()):a.observerSurfaceNormal=null,A?.getIntersectionPoint(h)?a.targetSurfaceNormal=A.getTransformedNormal(n()):a.targetSurfaceNormal=null}function j(e,t,r){if(s(e)){const n=a(e,t);if(null!=n)return Math.min(n*g,r)}return 1e-5*r}const g=.05,y=l(),p=n();export{c as featureReferenceEquals,b as featureReferenceProperty,d as getFeatureId,m as updatePointsFromFeatureReference};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{Intersector as e}from\"../3d/webgl-engine/lib/Intersector.js\";import{StoreResults as n}from\"../3d/webgl-engine/lib/IntersectorInterfaces.js\";function o(o){const t=new e(o);return t.options.store=n.MIN,t.options.excludeLabels=!0,t}export{o as newToolIntersector};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{fromValues as t}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{Material as i}from\"../lib/Material.js\";import{intersectTriangleGeometry as p}from\"../lib/RayIntersections.js\";class r extends i{constructor(){super(...arguments),this._pp0=t(0,0,1),this._pp1=t(0,0,0)}intersect(t,i,r,s,e,o){return p(t,r,s,e,void 0,o)}intersectDraped(t,i,r,s){return this._pp0[0]=this._pp1[0]=r[0],this._pp0[1]=this._pp1[1]=r[1],p(t,i,this._pp0,this._pp1,void 0,s)}}export{r as TriangleMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{floatEqualAbsolute as t}from\"../../core/mathUtils.js\";import{subtract as n,scaleAndAdd as r,add as e,length as s,dot as o,squaredLength as c,scale as u,distance as i,copy as f}from\"../../core/libs/gl-matrix-2/math/vec2.js\";import{create as a,clone as p}from\"../../core/libs/gl-matrix-2/factories/vec2f64.js\";function m(t,n){return t[0]*n[1]-t[1]*n[0]}function h(t,n,r){const e=(n[0]-t[0])*(r[1]-t[1])-(n[1]-t[1])*(r[0]-t[0]);return Math.abs(e)/i(n,r)}function E(t,n,r){const e=o(r,n)/c(r);return u(t,r,e)}function I(t,r,s,o,c=s){return n(x,o,s),n(g,r,c),E(A,g,x),e(t,c,A)}function L(t,e,s,u){n(x,u,s),n(g,e,s);const i=o(x,g)/c(x);return i>0?r(t,s,x,i):f(t,s)}function N(t,e,o,c){n(x,e,o);const u=c/s(x);return r(t,o,x,u)}function l(n,r){return I(g,r,n.start,n.end),t(g[0],r[0])&&t(g[1],r[1])?[p(r)]:[]}function y(n,r,e){return N(g,e,n,r),t(g[0],e[0])&&t(g[1],e[1])?[p(e)]:[]}function b(t,e){const s=t.start,o=t.end,c=e.start,u=e.end,i=n(x,o,s),f=n(M,u,c),a=m(i,f);if(Math.abs(a)<=v)return[];const p=n(g,s,c),h=m(f,p)/a,E=m(i,p)/a;if(h>=0){if(E>=0||e.type===j.LINE)return[r(A,s,i,h)]}else if(t.type===j.LINE&&(E>=0||e.type===j.LINE))return[r(A,s,i,h)];return[]}function d(t,e,s){const u=[],i=n(x,t.end,t.start),f=n(M,t.start,e),a=c(i),p=2*o(i,f),m=p*p-4*a*(c(f)-s*s);if(0===m){const n=-p/(2*a);(t.type===j.LINE||n>=0)&&u.push(r(A,t.start,i,n))}else if(m>0){const n=Math.sqrt(m),e=(-p+n)/(2*a);(t.type===j.LINE||e>=0)&&u.push(r(A,t.start,i,e));const s=(-p-n)/(2*a);(t.type===j.LINE||s>=0)&&u.push(r(g,t.start,i,s))}return u}var j;!function(t){t[t.RAY=0]=\"RAY\",t[t.LINE=1]=\"LINE\"}(j||(j={}));const v=1e-6,x=a(),M=a(),g=a(),A=a();export{j as LineType,m as cross,y as intersectCircleAndPoint,l as intersectLineAndPoint,b as intersectLineAndRay,d as intersectLineLikeAndCircle,h as pointToLineDistance,E as projectPoint,N as projectPointToCircle,I as projectPointToLine,L as projectPointToRay};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport has from\"../../../../core/has.js\";import{deg2rad as o}from\"../../../../core/mathUtils.js\";const t=has(\"mac\")?\"Meta\":\"Control\",r=\"Shift\",s=2,a=1.15,c=1.15,m=2500,h=.02,e=Math.cos(o(45)),i=Math.cos(o(5)),f=.95,p=.3,M=2,j=1,l=3,n=11,x=22.5,C=40,S=48,U=2.25,b=4,d=1,g=.3,k=6,q=4,u=1600,v=.4;export{s as displayFocusMultiplier,t as forceHorizontalModifier,r as forceVerticalModifier,h as initialDepthOffsetFrac,v as initialPlaneHalfSizeViewProportion,u as planeMinBasisScreenLen2,j as planeOutlineWidth,M as planePreviewOutlineWidth,m as pointerMoveTimerMs,f as previewFadeDotThreshold,p as previewFadeDurationSeconds,k as resizeHandleCornerInputRadius,b as resizeHandleCornerWidth,q as resizeHandleEdgeInputRadius,g as resizeHandleEdgePaddingFrac,d as resizeHandleEdgeWidth,S as shiftRestartArrowLength,U as shiftRestartArrowOutlineWidth,C as shiftRestartOffsetDistance,c as shiftRestartTipFocusMultiplier,x as shiftRestartTipLength,n as shiftRestartTipRadius,a as shiftRestartTubeFocusMultiplier,l as shiftRestartTubeRadius,i as smallAngleDotThreshold,e as verticalDotThreshold};\n"],"names":["s","n","r","EsriPromiseMixin","constructor","super","arguments","this","parent","_userInteractive","_interactiveViewModelCount","interactive","e","updating","visible","suspended","_overrideIfSome","forceInteractive","t","i","constructOnly","prototype","type","Boolean","readOnly","o","initialize","addHandles","analysisViewData","deactivate","onDeactivate","created","analysis","clear","resetCreated","_set","m","f","view","tool","tools","add","v","p","remove","y","a","userOperation","async","promise","catch","abort","activeTool","c","active","u","signal","shouldRejectOnCancel","l","onToolActivated","aborted","abortOptions","finally","d","clone","placementOptions","valid","equals","x","shadowMap","depthTexture","nearFar","numActiveFaces","atlasRegions","targetVector","upVector","fovs","headingAndTilt","observerOffset","projectionMatrices","flat","viewMatrices","volumeOffset","V","fragment","include","uniforms","depth","attachment","camera","inverseProjectionMatrix","_ref","b","viewInverseTransposeMatrix","h","g","w","normals","constants","code","main","M","Object","freeze","defineProperty","__proto__","ViewshedPassParameters","build","Symbol","toStringTag","value","localOrigin","viewMatrix","JSONSupportMixin","observer","farDistance","heading","tilt","horizontalFieldOfView","verticalFieldOfView","feature","json","write","isRequired","Number","nonNullable","range","min","normalize","max","read","collisionRadius","fovUnfocusedArcWidth","fovFocusedArcWidth","scaleOrientSize","scaleOrientHandleRadius","scaleOrientMinDistance","scaleOrientArrowTipLength","scaleOrientArrowTipFocusMultiplier","observerSize","hoverTimeoutMilliseconds","viewAngleThreshold","getFovArcWidth","getScaleOrientArrowTipLength","frameWidthNotSelected","frameWidthSelected","frameColor","observerPointConfiguration","size","pixelSnappingEnabled","primitive","elevationInfo","mode","offset","outlineSize","color","toUnitRGBA","shapeMaterialParameters","renderOccluded","Occlude","cullFace","Back","writeDepth","R","tiltedUpVector","rightVector","observerRenderSpace","j","U","plane","S","D","renderCoordsHelper","toRenderCoords","position","direction","E","Math","abs","next","targetRenderSpace","basis1","basis2","origin","acos","farDistanceRenderSpace","sin","renderStart","renderEnd","action","deltaAngle","C","A","T","_handles","_tool","_view","_focusedArcMaterial","_createArcMaterial","_unfocusedArcMaterial","_createManipulators","forEachManipulator","manipulators","destroy","_manipulators","createDragPipeline","values","map","manipulator","side","_ref6","W","z","_","q","k","manipulatorType","O","SCALE","updateManipulatorsTransform","arcCentersPoints","J","_forEachManipulatorInfo","_updateArcManipulatorTransform","updateManipulatorVisuals","_updateArcManipulatorVisuals","_ref2","length","undefined","cos","push","F","P","Unfocused","instantiate","material","Focused","collisionType","paths","renderObjects","radius","_ref3","renderLocation","H","I","B","L","modelTransform","_createArcManipulator","left","right","top","bottom","forEach","_ref4","metadata","pairedManipulator","autoScaleRenderObjects","worldSized","events","on","hovering","grabbing","OccludeAndTransparent","isDecoration","width","effectiveTheme","accentColor","setParameters","_ref5","test","PI","_setupManipulatorVisual","_createMaterial","transformation","_manipulatorHeading","_manipulatorTilt","_manipulatorDistance","createHeadingDragPipeline","tiltParallelToSurface","ROTATE","createTiltDragPipeline","targetDirection","createDistanceDragPipeline","location","updateManipulators","_color","_moveManipulation","_observerManipulator","_fieldOfViewManipulation","_scaleOrientManipulation","_forceHoveringTask","_forceHoveringTestPromise","_grabbing","viewshedComputedData","_createMoveManipulation","parentTool","angle","removeHandles","_buildObserverDragPipeline","_buildFOVDragPipeline","_buildScaleOrientDragPipeline","filter","viewshedCompData","target","hFOV","vFOV","selectedViewshedComputedData","fovManipulationAvailable","isPlacingTarget","nonFOVManipulationAvailable","creating","available","_forEachManipulator","_someManipulatorHovering","subToolHandles","subTool","_resetHoveringTask","_someManipulatorSelected","_updateManipulatorVisibility","updateInteractionVisualsVisibility","_setInteractive","hasManipulator","viewshed","discManipulator","xyManipulation","moveInteractionState","dragging","scaleOrientInteractionState","_forEachManipulation","onManipulatorSelectionChanged","selectedViewshed","selected","snapToScene","xyAvailable","xyAxisAvailable","zAvailable","spatialReference","steps","cancel","fromGeometry","viewingMode","operations","data","geometry","clamp","metersPerUnit","disableDisplay","moveManipulation","fieldOfViewManipulation","scaleOrientManipulation","setHoveringTimeoutPromise","removeIncompleteOnCancel","automaticManipulatorSelection","_stagedViewshed","_stagedViewshedComputedData","_placementMode","_creationState","_interactionVisualElements","_settings","getTheme","_selectedManipulator","_intersector","state","_createInteractionVisuals","viewshedComputedDataHandles","_valid","finishToolCreation","_findSubTool","viewsheds","item","firstGrabbedManipulator","_selectManipulator","_selectedSubTool","_updateInteractionVisualsLocation","removeStaged","some","cursor","stagedViewshed","place","_finishToolCreationIfValid","onInputEvent","_doubleClickHandler","_pointerMoveHandler","key","_cancelKeyHandler","delete","includes","_deleteKeyHandler","onInputEventAfter","_clickPlacementHandler","onActivate","hasFocusedManipulators","_intersectScreen","mapPoint","_updateStagedViewshed","scenePoint","stopPropagation","_onCancelWhileCreating","basisMatrixAtPosition","G","K","sceneIntersectionHelper","intersectToolIntersectorScreen","results","getIntersectionPoint","fromRenderCoords","visualElements","attached","style","glowWidth","heightPlane","innerWidth","extensionType","zVerticalLine","writeDepthEnabled","laserline","verticalLine","apply","heightManifoldTarget","intersectsWorldUpAtLocation","setStartEndFromWorldDownAtLocation","find","_material","_viewshedComputedData","applyProperties","updateTransform","transform","createExternalResources","destroyExternalResources","forEachMaterial","createGeometries","ceil","N","POSITION","addGeometry","isNaN","_viewshedCorners","topLeft","topRight","bottomLeft","bottomRight","_arcCenterPoints","_parallelCenters","stipplePattern","_observerVisualElement","_shapeVisualElement","_frameLinesVisualElement","_leftArcVisualElement","_rightArcVisualElement","_topArcVisualElement","_bottomArcVisualElement","_centralLongitude","_centralLatitude","cornerPoints","parallelCenterPoints","corners","arcCenters","parallelCenters","_selected","_forEachVisualElement","_updateVisualElements","initial","recreateGeometry","staged","_staged","horFovNot360","_forEachLineVisualElement","observerVisible","_updateFrameLines","_updateFrameArcs","_updateCentralHelperArcs","leftVector","visualization","_viewshedVisualizations","observerRenderSpaceOverride","needUpdateByFeature","effectiveObserverRenderSpace","effectiveObserver","renderSpaceToPoint","effectiveTargetRenderSpace","_computeTargetRenderSpace","_pointToRenderSpace","_basis","northVector","pointOnSphere","toArray","sectionAngles","sectionAnglesDeg","projectionMatrix","sectionMatrix","_projectionMatrixInternal","tan","fovX","fovY","_sectionRatioX","setViewport","viewport","textureSizeQuality","textureSizeModHighQuality","textureSizeModLowQuality","textureSizeMultiple","toleranceSides","toleranceBottomTop","textureSizeModifier","textureResizeModulo","_fbos","_faces","_width","_height","settings","_maxTextureSize","has","rctx","parameters","maxTextureSize","_handle","getTexture","ready","faces","keys","height","viewshedProjectionMatrices","viewshedViewMatrices","_setupFaceCamera","center","eye","up","far","isActive","_computeActiveFaces","Set","_computeBaseTextureSize","pixelRatio","fullWidth","fullHeight","_ensureFBO","fbo","depthStencilTexture","descriptor","internalFormat","DEPTH_COMPONENT16","release","_allocateFBO","DEPTH24_STENCIL8","DEPTH16","acquire","setShadowFiltering","clearFBO","bindFramebuffer","setClearColor","COLOR","DEPTH","dispose","_debugFBO","start","finish","initializePipeline","colorWrite","blending","_shadowMap","hasViewsheds","_viewsheds","_contentPixelRatio","contentPixelRatio","_viewshedsInView","items","frustum","intersectsSphere","_passParameters","consumes","required","VIEWSHED","produces","requireGeometryDepth","fboCache","resolutionScale","requestRender","UPDATE","precompile","techniques","stage","renderer","precompileViewshedShadowMap","render","bindParameters","renderingContext","name","decorations","get","compiled","isFeatureEnabled","HighResolutionViewshed","_renderShadowCubeMap","_setupViewshedParameters","bindTechnique","screen","draw","updateViewsheds","removes","adds","Array","isArray","removeMany","addMany","basemapTerrain","hasStencilEnabledExtents","renderViewshedShadowMap","pixelSizeAt","viewshedsInView","_selectedViewshed","_viewshedRenderer","_unselectOtherViewsheds","_isDecoration","options","hud","store","MIN","canProject","_addViewshedsToRenderer","_removeViewshedsFromRenderer","getLogger","_createFeatureReferenceHandles","_analysisVisualization","slice","_updateObserverFromFeature","_createElevationUpdateHandle","pending","elevationProvider","extent","createViewsheds","observerSurfaceNormal","observerAdjusted","observerFeatureId","targetSurfaceNormal","targetAdjusted","targetFeatureId","layer","id","objectId","objectIdField","attributes","uid","writer","layerId","String","origins","ObjectId","ALL","intersectToolIntersectorRay","all","distanceInRenderSpace","getTransformedNormal","excludeLabels","_pp0","_pp1","intersect","intersectDraped","end","LINE","sqrt","RAY"],"sourceRoot":""}