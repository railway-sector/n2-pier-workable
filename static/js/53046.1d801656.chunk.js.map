{"version":3,"file":"static/js/53046.1d801656.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/3d/support/FrustumExtentIntersection.js","../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DFrustumVisibility.js","../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DElevationAlignment.js","../node_modules/@arcgis/core/renderers/support/renderingInfoUtils.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Object3DStateSet.js","../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DObjectStateSet.js","../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DObjectStates.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{neverReached as t}from\"../../../core/compilerUtils.js\";import{lerp as e}from\"../../../core/mathUtils.js\";import{invert as i}from\"../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as r}from\"../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{f as n,g as o,E as s,t as a,i as c,e as l}from\"../../../chunks/vec32.js\";import{create as p}from\"../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{getReferenceEllipsoid as h}from\"../../../geometry/ellipsoidUtils.js\";import{computeTranslationToOriginAndRotation as d}from\"../../../geometry/projection/computeTranslationToOriginAndRotation.js\";import{projectBoundingRect as m}from\"../../../geometry/projection/projectBoundingRect.js\";import{projectVectorToVector as _}from\"../../../geometry/projection/projectVectorToVector.js\";import{empty as g,create as f,expandWithVec3 as u}from\"../../../geometry/support/aaBoundingBox.js\";import{center as x,create as R}from\"../../../geometry/support/aaBoundingRect.js\";import{PlaneIndex as y}from\"../../../geometry/support/frustum.js\";import{fromPoints as j,create as b}from\"../../../geometry/support/lineSegment.js\";import{create as A,fromVectorsAndPoint as E,copy as S,negate as B,signedDistance as C}from\"../../../geometry/support/plane.js\";import{wrap as H}from\"../../../geometry/support/ray.js\";import{ViewingMode as w}from\"../../ViewingMode.js\";import{frustumLineSegment as G}from\"./intersectionUtils.js\";const M=.5*Math.PI,F=M/Math.PI*180;class N{constructor(t){this._extent=new Array(4),this._planes=new Array(6),this._maxSpan=0,this._center={origin:p(),direction:p()},this._renderCoordsHelper=t.renderCoordsHelper;for(let e=0;e<4;e++)this._extent[e]={origin:p(),direction:p(),cap:{next:null,direction:p()}},this._planes[e]=A();this._planes[y.NEAR]=A(),this._planes[y.FAR]=A(),this._planesWithoutFar=this._planes.slice(0,5)}update(t,e,i,r=!0){const a=this._extent;this._toRenderBoundingExtent(t,e,i),n(this._center.origin,a[0].origin,a[2].origin),o(this._center.origin,this._center.origin,.5),this._renderCoordsHelper.worldUpAtPosition(this._center.origin,this._center.direction),r||o(this._center.direction,this._center.direction,-1);for(let n=0;n<4;n++){const t=a[n];this._renderCoordsHelper.worldUpAtPosition(t.origin,t.direction);const e=a[3===n?0:n+1];t.cap.next=e.origin,s(t.cap.direction,t.origin,e.origin),E(t.direction,t.cap.direction,t.origin,this._planes[n]),r||o(t.direction,t.direction,-1)}E(a[0].cap.direction,a[1].cap.direction,a[0].origin,this._planes[y.NEAR]),r?B(this._planes[y.NEAR],this._planes[y.FAR]):(S(this._planes[y.FAR],this._planes[y.NEAR]),B(this._planes[y.NEAR],this._planes[y.NEAR])),this._maxSpan=Math.max(Math.abs(t[0]-t[2]),Math.abs(t[1]-t[3])),this._maxSpanSpatialReference=e,this._minGlobalAltitude=.9*h(this._maxSpanSpatialReference).radius}isVisibleInFrustum(t,e,i=!1){if(null==t)return!1;if(this._renderCoordsHelper.viewingMode===w.Global){const i=this._maxSpanSpatialReference.isGeographic?F:M*e;if(this._maxSpan>i)return!0;if(null!=t.altitude&&t.altitude>=this._minGlobalAltitude)return this._isVisibleInFrustumGlobal(t)}if(0===this._maxSpan){const e=this._extent[0];return!(i||!t.intersectsRay(H(e.origin,e.direction)))}for(let n=0;n<this._extent.length;n++){const e=this._extent[n];if(!i&&t.intersectsRay(H(e.origin,e.direction)))return!0;if(t.intersectsLineSegment(j(e.origin,e.cap.next,k),e.cap.direction))return!0}const r=i?this._planes:this._planesWithoutFar;for(let n=0;n<t.lines.length;n++){const e=t.lines[n];if(G(r,e.origin,e.endpoint,e.direction))return!0}return!1}_toRenderBoundingExtentGlobal(t,r,n){const o=5;x(t,V),V[2]=n,d(r,V,v,this._renderCoordsHelper.spatialReference),i(I,v),g(L);for(const{x0:i,x1:s,y0:c,y1:l}of U)for(let p=0;p<o;p++){const h=p/(o-1);V[0]=e(t[i],t[s],h),V[1]=e(t[c],t[l],h),V[2]=n,_(V,r,V,this._renderCoordsHelper.spatialReference),a(V,V,I),u(L,V)}c(this._extent[0].origin,L[0],L[1],L[2]),c(this._extent[1].origin,L[3],L[1],L[2]),c(this._extent[2].origin,L[3],L[4],L[2]),c(this._extent[3].origin,L[0],L[4],L[2]);for(let e=0;e<4;++e)a(this._extent[e].origin,this._extent[e].origin,v)}_toRenderBoundingExtentLocal(t,e,i){m(t,e,P,this._renderCoordsHelper.spatialReference),c(this._extent[0].origin,P[0],P[1],i),c(this._extent[1].origin,P[2],P[1],i),c(this._extent[2].origin,P[2],P[3],i),c(this._extent[3].origin,P[0],P[3],i)}_toRenderBoundingExtent(e,i,r){switch(this._renderCoordsHelper.viewingMode){case w.Global:this._toRenderBoundingExtentGlobal(e,i,r);break;case w.Local:this._toRenderBoundingExtentLocal(e,i,r);break;default:t(this._renderCoordsHelper.viewingMode)}}_isVisibleInFrustumGlobal(t){if(C(t.planes[y.NEAR],this._center.origin)<0&&l(this._center.direction,t.direction)<0)return!0;for(let e=0;e<4;e++){const i=this._extent[e];if(C(t.planes[y.NEAR],i.origin)<0&&l(i.direction,t.direction)<0)return!0}return!1}}const U=[{x0:0,y0:1,x1:2,y1:1},{x0:0,y0:3,x1:2,y1:3},{x0:0,y0:1,x1:0,y1:3},{x0:2,y0:1,x1:2,y1:3}],V=p(),v=r(),I=r(),L=f(),P=R(),k=b();export{N as FrustumExtentIntersection};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import{watch as s,sync as i,initial as r}from\"../../../../core/reactiveUtils.js\";import{property as n}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as o}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{getReferenceEllipsoid as a}from\"../../../../geometry/ellipsoidUtils.js\";import{FrustumExtentIntersection as p}from\"../../support/FrustumExtentIntersection.js\";import{TaskPriority as c}from\"../../../support/Scheduler.js\";import{Yield as l}from\"../../../support/Yield.js\";const h=1.2;let u=class extends t{constructor(e){super(e),this.suspended=!1,this._extent=null,this._extentIntersectionDirty=!0,this._isVisibleBelowSurfaceInternal=!1,this.graphicsCoreOwner=null,this.updating=!0}initialize(){const{graphicsCoreOwner:e}=this;this._extentIntersection=new p({renderCoordsHelper:e.view.renderCoordsHelper});const t=e.view,n=t.basemapTerrain,o=t.resourceController.scheduler;this.addHandles([t.on(\"resize\",(()=>this._viewChange())),s((()=>t.state.camera),(()=>this._viewChange()),i),o.registerTask(c.FRUSTUM_VISIBILITY,this),s((()=>n.visibleElevationBounds),(()=>this._elevationBoundsChange()))]),\"local\"===t.viewingMode?this._isVisibleBelowSurface=!0:this.addHandles([s((()=>[n.baseOpacity,n.wireframe,t.map?.ground?.navigationConstraint?.type]),(()=>this._updateIsVisibleBelowSurface()),r)])}destroy(){this._set(\"graphicsCoreOwner\",null),this._extent=null,this._extentIntersection=null}_setDirty(){this.updating||this._set(\"updating\",!0)}setExtent(e){this._extent=e,this._extentIntersectionDirty=!0,this._setDirty()}_viewChange(){this._setDirty()}_elevationBoundsChange(){this._setDirty(),this._extentIntersectionDirty=!0}set _isVisibleBelowSurface(e){this._isVisibleBelowSurfaceInternal=e,this._setDirty(),this._extentIntersectionDirty=!0}_updateIsVisibleBelowSurface(){const e=this.graphicsCoreOwner.view,t=e.basemapTerrain,s=\"local\"===e.viewingMode,i=\"none\"===e.map.ground?.navigationConstraint?.type;this._isVisibleBelowSurface=s||!t.opaque||i}_updateExtentIntersection(){if(!this._extentIntersectionDirty)return;this._extentIntersectionDirty=!1;const e=this.graphicsCoreOwner.view;let t;if(this._isVisibleBelowSurfaceInternal)t=-.3*a(e.spatialReference).radius;else{const{min:s,max:i}=e.basemapTerrain.visibleElevationBounds;t=s-Math.max(1,(i-s)*(h-1))}this._extentIntersection.update(this._extent,e.spatialReference,t)}get running(){return this.updating}runTask(e){if(this._set(\"updating\",!1),!this._extent)return this._set(\"suspended\",!1),l;this._updateExtentIntersection();const t=this.graphicsCoreOwner.view.frustum,s=a(this.graphicsCoreOwner.view.spatialReference).radius;this._set(\"suspended\",!this._extentIntersection.isVisibleInFrustum(t,s)),e.madeProgress()}};e([n({readOnly:!0})],u.prototype,\"suspended\",void 0),e([n({constructOnly:!0})],u.prototype,\"graphicsCoreOwner\",void 0),e([n({readOnly:!0})],u.prototype,\"updating\",void 0),u=e([o(\"esri.views.3d.layers.graphics.Graphics3DFrustumVisibility\")],u);export{u as Graphics3DFrustumVisibility};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../core/Accessor.js\";import i from\"../../../../core/Evented.js\";import{watch as r}from\"../../../../core/reactiveUtils.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as a}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{ExtentSet as n}from\"./ExtentSet.js\";import{UpdatePolicy as o}from\"../../webgl-engine/lib/UpdatePolicy.js\";import{TaskPriority as h}from\"../../../support/Scheduler.js\";let p=class extends e{constructor(t){super(t),this._dirtyExtents=new n,this._globalDirty=!1,this._averageExtentUpdateSize=0,this._dirtyGraphicsSet=new Set,this._updateElevation=!1,this.graphicsCoreOwner=null,this.graphicsCore=null,this.events=new i}initialize(){const t=this.elevationProvider,e=this.graphicsCoreOwner.view.resourceController.scheduler;this._task=e.registerTask(d(this.graphicsCore.layer.elevationInfo?.mode),this),this.addHandles([t.on(\"elevation-change\",(t=>this._elevationChanged(t))),r((()=>this.graphicsCoreOwner.suspended),(()=>this._suspendedChange())),this._task,r((()=>d(this.graphicsCore.layer.elevationInfo?.mode)),(t=>this._task.priority=t))])}destroy(){this._dirtyGraphicsSet.clear(),this.graphicsCoreOwner=null,this.graphicsCore=null,this.queryGraphicUIDsInExtent=null,this.elevationProvider=null}clear(){this._dirtyGraphicsSet.clear(),this.notifyChange(\"updating\")}_suspendedChange(){!0===this.graphicsCoreOwner.suspended?this._updateElevation=!1:!1===this.graphicsCoreOwner.suspended&&this._updateElevation&&(this._globalDirty=!0,this.notifyChange(\"updating\"))}elevationInfoChange(){this._globalDirty=!0,this.notifyChange(\"updating\")}get updating(){return this.running}get running(){return this._dirtyGraphicsSet.size>0||this._dirtyExtents&&!this._dirtyExtents.empty||this._globalDirty}get updatingRemaining(){return this._dirtyGraphicsSet.size+this._dirtyExtents.size*this._averageExtentUpdateSize}runTask(t){for(this._globalDirty&&(this._markAllGraphicsElevationDirty(),this._globalDirty=!1,t.madeProgress()),t.run((()=>this._dirtyExtents.merge(t)));this.running&&!t.done;)this._updateDirtyGraphics(t),this._updateDirtyExtents(t);this.notifyChange(\"updating\")}_updateDirtyGraphics(t){const e=this.graphicsCoreOwner.view.renderCoordsHelper,i=this.graphicsCore.effectiveUpdatePolicy===o.ASYNC;for(const r of this._dirtyGraphicsSet.keys()){const s=this.graphicsCore.getGraphics3DGraphicById(r);if(this._dirtyGraphicsSet.delete(r),null!=s&&(s.alignWithElevation(this.elevationProvider,e,i),this.graphicsCore.deconflictor?.setDirty(),t.madeProgress()),t.done)return}}_updateDirtyExtents(t){for(;!this._dirtyExtents.empty&&!t.done;){const e=this._dirtyExtents.pop(),i=this.elevationProvider.spatialReference;this.events.emit(\"invalidate-elevation\",{extent:e,spatialReference:i});const r=this._dirtyGraphicsSet.size;this.queryGraphicUIDsInExtent(e,i,(t=>{const e=this.graphicsCore.getGraphics3DGraphicById(t);null!=e&&e.needsElevationUpdates()&&this._dirtyGraphicsSet.add(t)})),this._averageExtentUpdateSize=.1*(this._dirtyGraphicsSet.size-r)+.9*this._averageExtentUpdateSize,t.madeProgress()}}_markAllGraphicsElevationDirty(){this._dirtyExtents.clear(),this._dirtyGraphicsSet.clear(),this.graphicsCore.graphics3DGraphics.forEach(((t,e)=>this._dirtyGraphicsSet.add(e)))}_elevationChanged(t){if(\"scene\"===t.context&&(!this.graphicsCore.layer.elevationInfo||\"relative-to-scene\"!==this.graphicsCore.layer.elevationInfo.mode))return;const e=t.extent;if(this.graphicsCoreOwner.suspended){if(!this._updateElevation){const t=this.graphicsCore.computedExtent;t&&e[2]>t.xmin&&e[0]<t.xmax&&e[3]>t.ymin&&e[1]<t.ymax&&(this._updateElevation=!0)}this.events.emit(\"invalidate-elevation\",t)}else e[0]===-1/0?this._globalDirty=!0:this._dirtyExtents.add(e),this.notifyChange(\"updating\")}};function d(t){return null==t?h.ELEVATION_ALIGNMENT:\"relative-to-scene\"===t?h.ELEVATION_ALIGNMENT_SCENE:h.ELEVATION_ALIGNMENT}t([s()],p.prototype,\"graphicsCoreOwner\",void 0),t([s()],p.prototype,\"graphicsCore\",void 0),t([s()],p.prototype,\"queryGraphicUIDsInExtent\",void 0),t([s()],p.prototype,\"elevationProvider\",void 0),t([s({readOnly:!0})],p.prototype,\"updating\",null),t([s({readOnly:!0})],p.prototype,\"updatingRemaining\",null),p=t([a(\"esri.views.3d.layers.graphics.Graphics3DElevationAlignment\")],p);export{p as Graphics3DElevationAlignment};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport e from\"../../Color.js\";import{RenderingInfo as t}from\"./RenderingInfo.js\";import{getVisualVariableValues as o}from\"../visualVariables/support/visualVariableUtils.js\";function i(e,t){if(null!=e.symbol)return e.symbol;const o=t?.renderer;return null!=o&&\"dot-density\"!==o.type?o.getSymbol(e,t):null}function r(e,r){const l=i(e,r);if(null==l)return null;const n=r?.renderer,a=new t(n,l);if(null==n||!(\"visualVariables\"in n)||!n.visualVariables)return a;const s=o(n,e,r)??[],u=[\"proportional\",\"proportional\",\"proportional\"];for(const{variable:t,value:o}of s)if(null!=o||\"size\"===t.type&&t.useSymbolValue)switch(t.type){case\"color\":a.color=o?.toRgba();break;case\"size\":if(\"outline\"===t.target)a.outlineSize=o;else{const e=t.axis,i=t.useSymbolValue?\"symbol-value\":o??\"proportional\";switch(e){case\"width\":u[0]=i;break;case\"depth\":u[1]=i;break;case\"height\":u[2]=i;break;case\"width-and-depth\":u[0]=u[1]=i;break;default:u[0]=u[1]=u[2]=i}}break;case\"opacity\":a.opacity=o;break;case\"rotation\":switch(t.axis){case\"tilt\":a.tilt=o;break;case\"roll\":a.roll=o;break;default:a.heading=o}}return\"proportional\"===u[0]&&\"proportional\"===u[1]&&\"proportional\"===u[2]||(a.size=u),a}async function l(e,t){return null!=e.symbol?e.symbol:t?.renderer?.getSymbolAsync(e,t)??null}async function n(i,r){const n=await l(i,r);if(!n)return null;const a=r?.renderer,s=new t(a,n);if(!a||!(\"visualVariables\"in a)||!a.visualVariables)return s;const u=o(a,i,r)??[],p=[\"proportional\",\"proportional\",\"proportional\"];for(const{variable:t,value:o}of u)if(\"color\"===t.type)s.color=e.toUnitRGBA(o);else if(\"size\"===t.type)if(\"outline\"===t.target)s.outlineSize=o;else{const e=t.axis,i=t.useSymbolValue?\"symbol-value\":o;\"width\"===e?p[0]=i:\"depth\"===e?p[1]=i:\"height\"===e?p[2]=i:p[0]=p[1]=\"width-and-depth\"===e?i:p[2]=i}else\"opacity\"===t.type?s.opacity=o:\"rotation\"===t.type&&\"tilt\"===t.axis?s.tilt=o:\"rotation\"===t.type&&\"roll\"===t.axis?s.roll=o:\"rotation\"===t.type&&(s.heading=o);return(isFinite(p[0])||isFinite(p[1])||isFinite(p[2]))&&(s.size=p),s}function a(e,t=0){const o=e[t];return\"number\"==typeof o&&isFinite(o)?o:null}function s(e){for(let t=0;t<3;t++){const o=e[t];if(\"number\"==typeof o)return isFinite(o)?o:0}return 0}export{a as getDriverAxisSizeValue,s as getDriverAxisSizeValueAny,r as getRenderingInfo,n as getRenderingInfoAsync,l as getSymbolAsync};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{Object3DState as e}from\"./basicInterfaces.js\";class t{}class s extends t{constructor(e,t){super(),this.objectStateId=e,this.object=t}remove(){this.object.removeStateID(this.objectStateId)}}class o extends t{constructor(e,t,s){super(),this.objectStateId=e,this.object=t,this.owner=s}remove(){this.owner.removeRenderGeometryObjectState(this.object,this.objectStateId)}}class c extends t{constructor(e,t){super(),this.objectStateId=e,this._removeCallback=t,this.object=null}remove(){this._removeCallback(this.objectStateId)}}class r{constructor(){this._items=[]}addObject(e,t){this._items.push(new s(t,e))}addRenderGeometry(e,t,s){this._items.push(new o(t,e,s))}addExternal(e,t){this._items.push(new c(t,e))}remove(e){this._remove((t=>t.objectStateId===e))}removeByObject(e){this._remove((t=>t.object===e))}removeAll(){this._items.forEach((e=>e.remove())),this._items=[]}_remove(e){const{_items:t}=this;for(let s=t.length-1;s>=0;--s){const o=t[s];e(o)&&(o.remove(),t.splice(s,1))}}}class i extends r{constructor(){super(...arguments),this.stateType=e.MaskOccludee}}class h extends r{constructor(t){super(),this.highlightName=t,this.stateType=e.Highlight}}export{h as Object3DHighlightStateSet,i as Object3DOccludeeStateSet};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{Object3DState as t}from\"../../webgl-engine/lib/basicInterfaces.js\";import{Object3DOccludeeStateSet as e,Object3DHighlightStateSet as s}from\"../../webgl-engine/lib/Object3DStateSet.js\";class i{constructor(t){this.objectIdField=t,this.ids=new Set,this.paused=!1}hasGraphic(t){const e=this.objectIdField?t.graphic.attributes[this.objectIdField]:t.graphic.uid;return this.ids.has(e)}}class c extends i{constructor(s){super(s),this.stateType=t.MaskOccludee,this.objectStateSet=new e}}class h extends i{constructor(e,i){super(i),this.highlightName=e,this.stateType=t.Highlight,this.objectStateSet=new s(e)}}export{h as Graphics3DObjectHighlightStateSet,c as Graphics3DOccludeeStateSet};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{makeHandle as t}from\"../../../../core/handleUtils.js\";import\"../../../../core/has.js\";import{Graphics3DOccludeeStateSet as e,Graphics3DObjectHighlightStateSet as s}from\"./Graphics3DObjectStateSet.js\";class a{constructor(t){this._graphicsCore=t,this._stateSets=new Array}destroy(){this.reset(),this._stateSets=null}reset(){this._stateSets&&(this._stateSets.forEach((t=>t.objectStateSet.removeAll())),this._stateSets.length=0)}acquireOccludeeSet(s){const a=new e(s);this._stateSets.push(a);const i=t((()=>this.releaseSet(a)));return{set:a,handle:i}}acquireHighlightSet(e,a){const i=new s(e,a);this._stateSets.push(i);const c=t((()=>this.releaseSet(i)));return{set:i,handle:c}}releaseSet(t){t.objectStateSet.removeAll();const e=this._stateSets?this._stateSets.indexOf(t):-1;-1!==e&&this._stateSets.splice(e,1)}setUid(t,e){t.ids.add(e);const s=this._graphicsCore.graphics3DGraphics.get(e);s&&s.addObjectStateSet(t.objectStateSet)}setUids(t,e){e.forEach((e=>this.setUid(t,e)))}setObjectIds(t,e){e.forEach((e=>t.ids.add(e))),this._initializeSet(t)}addGraphic(t){this._stateSets.forEach((e=>{!e.paused&&e.hasGraphic(t)&&t.addObjectStateSet(e.objectStateSet)}))}removeGraphic(t){this._stateSets.forEach((e=>{e.hasGraphic(t)&&t.removeObjectState(e.objectStateSet)}))}allGraphicsDeleted(){this._stateSets&&this._stateSets.forEach((t=>t.objectStateSet.removeAll()))}_initializeSet(t){const e=this._graphicsCore.graphics3DGraphics;t.objectIdField?e.forEach((e=>{e&&t.hasGraphic(e)&&e.addObjectStateSet(t.objectStateSet)})):t.ids.forEach((s=>{const a=e.get(s);a&&a.addObjectStateSet(t.objectStateSet)}))}get test(){}}export{a as Graphics3DObjectStates};\n"],"names":["M","Math","PI","F","N","constructor","t","this","_extent","Array","_planes","_maxSpan","_center","origin","p","direction","_renderCoordsHelper","renderCoordsHelper","e","cap","next","A","y","NEAR","FAR","_planesWithoutFar","slice","update","i","r","arguments","length","undefined","a","_toRenderBoundingExtent","n","o","worldUpAtPosition","s","E","B","S","max","abs","_maxSpanSpatialReference","_minGlobalAltitude","h","radius","isVisibleInFrustum","viewingMode","w","Global","isGeographic","altitude","_isVisibleInFrustumGlobal","intersectsRay","H","intersectsLineSegment","j","k","lines","G","endpoint","_toRenderBoundingExtentGlobal","x","V","d","v","spatialReference","I","g","L","x0","x1","y0","c","y1","l","U","_","u","_toRenderBoundingExtentLocal","m","P","Local","C","planes","f","R","b","super","suspended","_extentIntersectionDirty","_isVisibleBelowSurfaceInternal","graphicsCoreOwner","updating","initialize","_extentIntersection","view","basemapTerrain","resourceController","scheduler","addHandles","on","_viewChange","state","camera","registerTask","FRUSTUM_VISIBILITY","visibleElevationBounds","_elevationBoundsChange","_isVisibleBelowSurface","baseOpacity","wireframe","map","ground","navigationConstraint","type","_updateIsVisibleBelowSurface","destroy","_set","_setDirty","setExtent","opaque","_updateExtentIntersection","min","running","runTask","frustum","madeProgress","readOnly","prototype","constructOnly","_dirtyExtents","_globalDirty","_averageExtentUpdateSize","_dirtyGraphicsSet","Set","_updateElevation","graphicsCore","events","elevationProvider","_task","layer","elevationInfo","mode","_elevationChanged","_suspendedChange","priority","clear","queryGraphicUIDsInExtent","notifyChange","elevationInfoChange","size","empty","updatingRemaining","_markAllGraphicsElevationDirty","run","merge","done","_updateDirtyGraphics","_updateDirtyExtents","effectiveUpdatePolicy","ASYNC","keys","getGraphics3DGraphicById","delete","alignWithElevation","deconflictor","setDirty","pop","emit","extent","needsElevationUpdates","add","graphics3DGraphics","forEach","context","computedExtent","xmin","xmax","ymin","ymax","ELEVATION_ALIGNMENT","ELEVATION_ALIGNMENT_SCENE","symbol","renderer","getSymbol","visualVariables","variable","value","useSymbolValue","color","toRgba","target","outlineSize","axis","opacity","tilt","roll","heading","async","getSymbolAsync","toUnitRGBA","isFinite","objectStateId","object","remove","removeStateID","owner","removeRenderGeometryObjectState","_removeCallback","_items","addObject","push","addRenderGeometry","addExternal","_remove","removeByObject","removeAll","splice","stateType","MaskOccludee","highlightName","Highlight","objectIdField","ids","paused","hasGraphic","graphic","attributes","uid","has","objectStateSet","_graphicsCore","_stateSets","reset","acquireOccludeeSet","releaseSet","set","handle","acquireHighlightSet","indexOf","setUid","get","addObjectStateSet","setUids","setObjectIds","_initializeSet","addGraphic","removeGraphic","removeObjectState","allGraphicsDeleted","test"],"sourceRoot":""}