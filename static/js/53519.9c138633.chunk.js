"use strict";(self.webpackChunkn2_pier_workable=self.webpackChunkn2_pier_workable||[]).push([[37040,53519],{420:(e,t,n)=>{n.d(t,{x:()=>s});var r=n(78393),o=n(38496),l=n(93345);function s(e,t){switch(t){case l.WR.TRIANGLES:return function(e){return"number"==typeof e?(0,o.tM)(e):(0,r.mg)(e)?new Uint16Array(e):e}(e);case l.WR.TRIANGLE_STRIP:return function(e){const t="number"==typeof e?e:e.length;if(t<3)return[];const n=t-2,r=(0,o.my)(3*n);if("number"==typeof e){let e=0;for(let t=0;t<n;t+=1)t%2==0?(r[e++]=t,r[e++]=t+1,r[e++]=t+2):(r[e++]=t+1,r[e++]=t,r[e++]=t+2)}else{let t=0;for(let o=0;o<n;o+=1)o%2==0?(r[t++]=e[o],r[t++]=e[o+1],r[t++]=e[o+2]):(r[t++]=e[o+1],r[t++]=e[o],r[t++]=e[o+2])}return r}(e);case l.WR.TRIANGLE_FAN:return function(e){const t="number"==typeof e?e:e.length;if(t<3)return new Uint16Array(0);const n=t-2,r=n<=65536?new Uint16Array(3*n):new Uint32Array(3*n);if("number"==typeof e){let e=0;for(let t=0;t<n;++t)r[e++]=0,r[e++]=t+1,r[e++]=t+2;return r}const o=e[0];let l=e[1],s=0;for(let u=0;u<n;++u){const t=e[u+2];r[s++]=o,r[s++]=l,r[s++]=t,l=t}return r}(e)}}},37040:(e,t,n)=>{n.d(t,{KB:()=>u,Xi:()=>l,pn:()=>a,x3:()=>s});var r=n(81806),o=n(83490);class l{constructor(e){this.data=e,this.type="encoded-mesh-texture",this.encoding=o.JS.KTX2_ENCODING}}function s(e){return"encoded-mesh-texture"===e?.type}async function u(e){const t=new Blob([e]),n=await t.text();return JSON.parse(n)}async function a(e,t){if(t===o.JS.KTX2_ENCODING)return new l(e);const n=new Blob([e],{type:t});let s=URL.createObjectURL(n);switch(t){case"image/jpeg":s+="#.jpg";break;case"image/png":s+="#.png"}const u=new Image;if((0,r.A)("esri-iPhone"))return new Promise((e,t)=>{const n=()=>{o(),e(u)},r=e=>{o(),t(e)},o=()=>{URL.revokeObjectURL(s),u.removeEventListener("load",n),u.removeEventListener("error",r)};u.addEventListener("load",n),u.addEventListener("error",r),u.src=s});try{u.src=s,await u.decode()}catch(a){console.warn("Failed decoding HTMLImageElement")}return URL.revokeObjectURL(s),u}},52007:(e,t,n)=>{n.d(t,{a:()=>l,f:()=>s,n:()=>o});var r=n(78393);function o(e,t){l(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)}function l(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;const l=t.length/2;let s=0,u=0;if(!(0,r.iu)(t)||(0,r.dk)(t)){for(let r=0;r<l;++r)e[s]=t[u],e[s+1]=t[u+1],s+=n,u+=o;return}const a=(0,r.a3)(t);if((0,r.JI)(t))for(let r=0;r<l;++r)e[s]=Math.max(t[u]/a,-1),e[s+1]=Math.max(t[u+1]/a,-1),s+=n,u+=o;else for(let r=0;r<l;++r)e[s]=t[u]/a,e[s+1]=t[u+1]/a,s+=n,u+=o}function s(e,t,n,r){const o=e.typedBuffer,l=e.typedBufferStride,s=r?.count??e.count;let u=(r?.dstIndex??0)*l;for(let a=0;a<s;++a)o[u]=t,o[u+1]=n,u+=l}Object.freeze(Object.defineProperty({__proto__:null,fill:s,normalizeIntegerBuffer:l,normalizeIntegerBufferView:o},Symbol.toStringTag,{value:"Module"}))},53519:(e,t,n)=>{n.r(t),n.d(t,{loadGLTFMesh:()=>j});var r=n(69539),o=n(99746),l=n(3825),s=n(50076),u=n(87663),a=n(15941),c=n(63919),i=n(44680),f=n(9392),d=n(55855),p=n(79629),m=n(44032),y=n(75257),g=n(63713),x=n(56623),T=n(99773),h=n(88105),w=n(45136),b=n(10947),v=n(6381);Object.freeze(Object.defineProperty({__proto__:null,copy:function(e,t,n){const r=e.typedBuffer,o=e.typedBufferStride,l=t.typedBuffer,s=t.typedBufferStride,u=n?n.count:t.count;let a=(n?.dstIndex??0)*o,c=(n?.srcIndex??0)*s;for(let i=0;i<u;++i){for(let e=0;e<9;++e)r[a+e]=l[c+e];a+=o,c+=s}}},Symbol.toStringTag,{value:"Module"}));Object.freeze(Object.defineProperty({__proto__:null,copy:function(e,t,n){const r=e.typedBuffer,o=e.typedBufferStride,l=t.typedBuffer,s=t.typedBufferStride,u=n?n.count:t.count;let a=(n?.dstIndex??0)*o,c=(n?.srcIndex??0)*s;for(let i=0;i<u;++i){for(let e=0;e<16;++e)r[a+e]=l[c+e];a+=o,c+=s}}},Symbol.toStringTag,{value:"Module"}));n(39539);var B=n(52007),A=n(64591);function S(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;const r=t.typedBuffer,o=t.typedBufferStride,l=t.count;let s=0,u=0;for(let a=0;a<l;++a)e[s]=r[u],e[s+1]=r[u+1],e[s+2]=r[u+2],e[s+3]=r[u+3],s+=n,u+=o}function R(e,t,n,r,o,l){const s=e.typedBuffer,u=e.typedBufferStride,a=l?.count??e.count;let c=(l?.dstIndex??0)*u;for(let i=0;i<a;++i)s[c]=t,s[c+1]=n,s[c+2]=r,s[c+3]=o,c+=u}Object.freeze(Object.defineProperty({__proto__:null,copy:S,copyView:function(e,t){S(e.typedBuffer,t,e.typedBufferStride)},fill:R},Symbol.toStringTag,{value:"Module"}));function E(e,t){return new e(new ArrayBuffer(t*e.ElementCount*(0,v.GJ)(e.ElementType)))}var _=n(53848),I=n(11109),C=n(56516),L=n(420),M=n(37040),O=n(93345);async function j(e,t,n){const o=new I.R(function(e){const t=e?.resolveFile;return t?{busy:!1,request:async(e,n,r)=>{const o=t?.(e)??e,s="image"===n?"image":"binary"===n||"image+type"===n?"array-buffer":"json";return(await(0,l.A)(o,{responseType:s,signal:r?.signal,timeout:0})).data}}:null}(n)),c=(await(0,C.loadGLTF)(o,t,n,!0)).model,i=c.lods.shift(),p=new Map,w=new Map;c.textures.forEach((e,t)=>p.set(t,function(e){return new y.A({data:((0,M.x3)(e.data),e.data),wrap:G(e.parameters.wrap)})}(e))),c.materials.forEach((e,t)=>w.set(t,function(e,t){const n=new r.A(function(e,t){return(0,d.fA)($(e[0]),$(e[1]),$(e[2]),t)}(e.color,e.opacity)),o=e.emissiveFactor?new r.A(function(e){return(0,f.fA)($(e[0]),$(e[1]),$(e[2]))}(e.emissiveFactor)):null,l=e=>e?new g.A({scale:e.scale?[e.scale[0],e.scale[1]]:[1,1],rotation:(0,a.KJ)(e.rotation??0),offset:e.offset?[e.offset[0],e.offset[1]]:[0,0]}):null;return new m.A({color:n,colorTexture:t.get(e.colorTexture),normalTexture:t.get(e.normalTexture),emissiveColor:o,emissiveTexture:t.get(e.emissiveTexture),occlusionTexture:t.get(e.occlusionTexture),alphaMode:k(e.alphaMode),alphaCutoff:e.alphaCutoff,doubleSided:e.doubleSided,metallic:e.metallicFactor,roughness:e.roughnessFactor,metallicRoughnessTexture:t.get(e.metallicRoughnessTexture),colorTextureTransform:l(e.colorTextureTransform),normalTextureTransform:l(e.normalTextureTransform),occlusionTextureTransform:l(e.occlusionTextureTransform),emissiveTextureTransform:l(e.emissiveTextureTransform),metallicRoughnessTextureTransform:l(e.metallicRoughnessTextureTransform)})}(e,p)));const b=function(e){let t=0;const n={color:!1,tangent:!1,normal:!1,texCoord0:!1},r=new Map,o=new Map,l=[];for(const s of e.parts){const{position:e,normal:a,color:c,tangent:i,texCoord0:f}=s.attributes,d=`\n      ${U(e,r)}/\n      ${U(a,r)}/\n      ${U(c,r)}/\n      ${U(i,r)}/\n      ${U(f,r)}/\n      ${F(s.transform)}\n    `;let p=!1;const m=(0,u.tE)(o,d,()=>(p=!0,{start:t,length:e.count}));p&&(t+=e.count),a&&(n.normal=!0),c&&(n.color=!0),i&&(n.tangent=!0),f&&(n.texCoord0=!0),l.push({gltf:s,writeVertices:p,region:m})}return{vertexAttributes:{position:E(h.Xm,t),normal:n.normal?E(h.xs,t):null,tangent:n.tangent?E(h.Eq,t):null,color:n.color?E(h.XP,t):null,texCoord0:n.texCoord0?E(h.gH,t):null},parts:l,components:[]}}(i);for(const r of b.parts)P(b,r,w);const{position:v,normal:B,tangent:A,color:S,texCoord0:R}=b.vertexAttributes,L=(0,T.TE)(e,n),O=e.spatialReference.isGeographic?(0,T.TE)(e):L,j=(0,_.UR)({vertexAttributes:{position:v.typedBuffer,normal:B?.typedBuffer,tangent:A?.typedBuffer},vertexSpace:O,spatialReference:e.spatialReference},L,{allowBufferReuse:!0,sourceUnit:n?.unitConversionDisabled?void 0:"meters"});if(!j)throw new s.A("load-gltf-mesh:vertex-space-projection",`Failed to load mesh from glTF because we could not convert the vertex space from ${O.type} to ${L.type}`);return{transform:null,vertexSpace:L,components:b.components,spatialReference:e.spatialReference,vertexAttributes:new x.H({...j,color:S?.typedBuffer,uv:R?.typedBuffer})}}function U(e,t){if(null==e)return"-";const n=e.typedBuffer;return`${(0,u.tE)(t,n.buffer,()=>t.size)}/${n.byteOffset}/${n.byteLength}`}function F(e){return null!=e?e.toString():"-"}function P(e,t,n){t.writeVertices&&function(e,t){const{position:n,normal:r,tangent:o,color:l,texCoord0:s}=e.vertexAttributes,u=t.region.start,{attributes:f,transform:d}=t.gltf,p=f.position.count;if((0,w.d)(n.slice(u,p),f.position,d),null!=f.normal&&null!=r){const e=(0,c.Ge)((0,i.vt)(),d),t=r.slice(u,p);(0,w.c)(t,f.normal,e),(0,a.or)(e)&&(0,w.e)(t,t)}else null!=r&&(0,A.f)(r,0,0,1,{dstIndex:u,count:p});if(null!=f.tangent&&null!=o){const e=(0,c.z0)((0,i.vt)(),d),t=o.slice(u,p);(0,b.a)(t,f.tangent,e),(0,a.or)(e)&&(0,b.n)(t,t)}else null!=o&&R(o,0,0,1,1,{dstIndex:u,count:p});if(null!=f.texCoord0&&null!=s?(0,B.n)(s.slice(u,p),f.texCoord0):null!=s&&(0,B.f)(s,0,0,{dstIndex:u,count:p}),null!=f.color&&null!=l){const e=f.color,t=l.slice(u,p);if(4===e.elementCount)e instanceof h.Eq?(0,b.l)(t,e,1,255):(e instanceof h.XP||e instanceof h.Uz)&&(0,b.l)(t,e,1/255,255);else{R(t,255,255,255,255);const n=h.eI.fromTypedArray(t.typedBuffer,t.typedBufferStride);e instanceof h.xs?(0,w.l)(n,e,1,255):(e instanceof h.eI||e instanceof h.nS)&&(0,w.l)(n,e,1/255,255)}}else null!=l&&R(l.slice(u,p),255,255,255,255)}(e,t);const{indices:r,attributes:o,primitiveType:l,material:s}=t.gltf;let u=(0,L.x)(r||o.position.count,l);const f=t.region.start;if(f){const e=new Uint32Array(u);for(let t=0;t<u.length;t++)e[t]+=f;u=e}e.components.push(new p.A({name:t.gltf.name,faces:u,material:n.get(s),shading:o.normal?"source":"flat",trustSourceNormals:!0}))}function k(e){switch(e){case"OPAQUE":return"opaque";case"MASK":return"mask";case"BLEND":return"blend"}}function G(e){return{horizontal:N(e.s),vertical:N(e.t)}}function N(e){switch(e){case O.pF.CLAMP_TO_EDGE:return"clamp";case O.pF.MIRRORED_REPEAT:return"mirror";case O.pF.REPEAT:return"repeat"}}function $(e){return e**(1/o.Tf)*255}}}]);
//# sourceMappingURL=53519.9c138633.chunk.js.map