{"version":3,"file":"static/js/62635.5de83f4d.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/analysis/featureReferenceUtils.js","../node_modules/@arcgis/core/analysis/LineOfSightAnalysisTarget.js","../node_modules/@arcgis/core/analysis/LineOfSightAnalysis.js","../node_modules/@arcgis/core/layers/LineOfSightLayer.js","../node_modules/@arcgis/core/analysis/LineOfSightAnalysisObserver.js","../node_modules/@arcgis/core/analysis/Analysis.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{a as e,l as t,b as r}from\"../chunks/vec32.js\";import{create as n}from\"../core/libs/gl-matrix-2/factories/vec3f64.js\";import{create as l,fromPoints as o}from\"../geometry/support/ray.js\";import{StoreResults as i}from\"../views/3d/webgl-engine/lib/IntersectorInterfaces.js\";import{toGraphic as u,hasLod as s,getIntersectedFeatureBSRadius as a}from\"../views/3d/webgl-engine/lib/intersectorUtilsConversions.js\";function c(e,t){return d(e)===d(t)}function d(e){if(null==e)return null;const t=null!=e.layer?e.layer.id:\"\";let r=null;return r=null!=e.objectId?e.objectId:null!=e.layer&&\"objectIdField\"in e.layer&&null!=e.layer.objectIdField&&null!=e.attributes?e.attributes[e.layer.objectIdField]:e.uid,null==r?null:`o-${t}-${r}`}const b={json:{write:{writer:f,target:{\"feature.layerId\":{type:[Number,String],isRequired:!0},\"feature.objectId\":{type:[Number,String],isRequired:!0}}},origins:{\"web-scene\":{read:I}}}};function f(e,t){null!=e?.layer?.objectIdField&&null!=e.attributes&&(t.feature={layerId:e.layer.id,objectId:e.attributes[e.layer.objectIdField]})}function I(e){if(null!=e.layerId&&null!=e.objectId)return{uid:null,layer:{id:e.layerId,objectIdField:\"ObjectId\"},attributes:{ObjectId:e.objectId}}}function m(l,s,a,c){const{sceneIntersectionHelper:b}=l,{observer:f,observerFeatureId:I,targetFeatureId:m,target:g}=a;if(null==I&&null==m)return;c||(c=e=>e),e(p,f,g);const v=t(p),S=1;r(p,f,p,S/v);const F=o(p,g,y);s.options.store=i.ALL,b.intersectToolIntersectorRay(F,s);let N=null,w=null,R=null,A=null;for(const e of s.results.all){const t=u(e,l);if(null==t||null==e.distanceInRenderSpace)continue;const r=d(t);null!=r&&(null!=I&&r===I&&(N??=c(j(e,l,v)),e.distanceInRenderSpace-S<N&&(R=e)),null!=m&&r===m&&(w??=c(j(e,l,v)),null==A&&e.distanceInRenderSpace-S<v&&v-e.distanceInRenderSpace+S<w&&(A=e)))}const{observerAdjusted:T,targetAdjusted:h}=a;R?.getIntersectionPoint(T)?a.observerSurfaceNormal=R.getTransformedNormal(n()):a.observerSurfaceNormal=null,A?.getIntersectionPoint(h)?a.targetSurfaceNormal=A.getTransformedNormal(n()):a.targetSurfaceNormal=null}function j(e,t,r){if(s(e)){const n=a(e,t);if(null!=n)return Math.min(n*g,r)}return 1e-5*r}const g=.05,y=l(),p=n();export{c as featureReferenceEquals,b as featureReferenceProperty,d as getFeatureId,m as updatePointsFromFeatureReference};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../chunks/tslib.es6.js\";import{featureReferenceEquals as r,featureReferenceProperty as e}from\"./featureReferenceUtils.js\";import t from\"../core/Clonable.js\";import s from\"../core/JSONSupport.js\";import{equalsMaybe as i}from\"../core/maybe.js\";import{property as p}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/RandomLCG.js\";import{subclass as n}from\"../core/accessorSupport/decorators/subclass.js\";import{persistable as a}from\"../core/accessorSupport/decorators/persistable.js\";import m from\"../geometry/Point.js\";import c from\"../symbols/support/ElevationInfo.js\";let l=class extends(s.JSONSupportMixin(t)){constructor(o){super(o),this.position=null,this.elevationInfo=null,this.feature=null}equals(o){return i(this.position,o.position)&&i(this.elevationInfo,o.elevationInfo)&&r(this.feature,o.feature)}};o([p({type:m,json:{write:!0,origins:{\"web-scene\":{write:{isRequired:!0}}}}}),a()],l.prototype,\"position\",void 0),o([p({type:c}),a()],l.prototype,\"elevationInfo\",void 0),o([p(e)],l.prototype,\"feature\",void 0),l=o([n(\"esri.analysis.LineOfSightAnalysisTarget\")],l);export{l as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../chunks/tslib.es6.js\";import e from\"./Analysis.js\";import r from\"./LineOfSightAnalysisObserver.js\";import o from\"./LineOfSightAnalysisTarget.js\";import{equals as s}from\"../core/arrayUtils.js\";import i from\"../core/Collection.js\";import{referenceSetter as n,castForReferenceSetter as l}from\"../core/collectionUtils.js\";import{equalsMaybe as p}from\"../core/maybe.js\";import{watch as a,syncAndInitial as u}from\"../core/reactiveUtils.js\";import{property as c}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/Logger.js\";import{subclass as m}from\"../core/accessorSupport/decorators/subclass.js\";import{projectOrLoad as g}from\"../geometry/projectionUtils.js\";import{fromValues as f,expandWithVec3 as h,toExtent as y}from\"../geometry/support/aaBoundingBox.js\";import{getGeometryEffectiveElevationMode as v}from\"../support/elevationInfoUtils.js\";const d=i.ofType(o);let j=class extends e{constructor(t){super(t),this.type=\"line-of-sight\",this.observer=null,this.extent=null}initialize(){this.addHandles(a((()=>this._computeExtent()),(t=>{null==t?.pending&&this._set(\"extent\",null!=t?t.extent:null)}),u))}get targets(){return this._get(\"targets\")||new d}set targets(t){this._set(\"targets\",n(t,this.targets,d))}get spatialReference(){return null!=this.observer?.position?this.observer.position.spatialReference:null}get valid(){return null!=this.observer?.position}async waitComputeExtent(){const t=this._computeExtent();return null!=t?t.pending:Promise.resolve()}_computeExtent(){const t=this.spatialReference;if(null==this.observer?.position||null==t)return null;const e=t=>\"absolute-height\"===v(t.position,t.elevationInfo),r=this.observer.position,o=f(r.x,r.y,r.z,r.x,r.y,r.z);for(const i of this.targets)if(null!=i.position){const e=g(i.position,t);if(null!=e.pending)return{pending:e.pending,extent:null};if(null!=e.geometry){const{x:t,y:r,z:s}=e.geometry;h(o,[t,r,s])}}const s=y(o,t);return e(this.observer)&&this.targets.every(e)||(s.zmin=void 0,s.zmax=void 0),{pending:null,extent:s}}clear(){this.observer=null,this.targets.removeAll()}equals(t){return this===t||super.equals(t)&&p(this.observer,t.observer)&&s(this.targets.toArray(),t.targets.toArray(),((t,e)=>t.equals(e)))}};t([c({type:[\"line-of-sight\"]})],j.prototype,\"type\",void 0),t([c({type:r,json:{read:!0,write:!0}})],j.prototype,\"observer\",void 0),t([c({cast:l,type:d,nonNullable:!0,json:{read:!0,write:!0}})],j.prototype,\"targets\",null),t([c({value:null,readOnly:!0})],j.prototype,\"extent\",void 0),t([c()],j.prototype,\"spatialReference\",null),t([c({readOnly:!0})],j.prototype,\"valid\",null),j=t([m(\"esri.analysis.LineOfSightAnalysis\")],j);export{j as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"../analysis/LineOfSightAnalysis.js\";import s from\"../analysis/LineOfSightAnalysisObserver.js\";import r from\"../analysis/LineOfSightAnalysisTarget.js\";import i from\"../core/Collection.js\";import{referenceSetter as o}from\"../core/collectionUtils.js\";import{MultiOriginJSONMixin as a}from\"../core/MultiOriginJSONSupport.js\";import{watch as n,syncAndInitial as l}from\"../core/reactiveUtils.js\";import{property as p}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/RandomLCG.js\";import{subclass as y}from\"../core/accessorSupport/decorators/subclass.js\";import c from\"./Layer.js\";import{OperationalLayer as h}from\"./mixins/OperationalLayer.js\";const u=i.ofType(r);let d=class extends(h(a(c))){constructor(e){super(e),this.type=\"line-of-sight\",this.operationalLayerType=\"LineOfSightLayer\",this.analysis=new t,this.opacity=1}initialize(){this.addHandles(n((()=>this.analysis),((e,t)=>{null!=t&&t.parent===this&&(t.parent=null),null!=e&&(e.parent=this)}),l))}async load(){return null!=this.analysis&&this.addResolvingPromise(this.analysis.waitComputeExtent()),this}get observer(){return this.analysis?.observer}set observer(e){const{analysis:t}=this;t&&(t.observer=e)}get targets(){return null!=this.analysis?this.analysis.targets:new i}set targets(e){o(e,this.analysis?.targets)}get fullExtent(){return null!=this.analysis?this.analysis.extent:null}get spatialReference(){return null!=this.analysis?this.analysis.spatialReference:null}releaseAnalysis(e){this.analysis===e&&(this.analysis=new t)}};e([p({json:{read:!1},readOnly:!0})],d.prototype,\"type\",void 0),e([p({type:[\"LineOfSightLayer\"]})],d.prototype,\"operationalLayerType\",void 0),e([p({type:s,json:{read:!0,write:{isRequired:!0,ignoreOrigin:!0}}})],d.prototype,\"observer\",null),e([p({type:u,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],d.prototype,\"targets\",null),e([p({type:t,nonNullable:!0,json:{read:!1,write:!1}})],d.prototype,\"analysis\",void 0),e([p({readOnly:!0})],d.prototype,\"fullExtent\",null),e([p({readOnly:!0})],d.prototype,\"spatialReference\",null),e([p({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},\"portal-item\":{read:!1,write:!1},\"web-document\":{read:!1,write:!1}}}})],d.prototype,\"opacity\",void 0),e([p({type:[\"show\",\"hide\"]})],d.prototype,\"listMode\",void 0),d=e([y(\"esri.layers.LineOfSightLayer\")],d);const m=d;export{m as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../chunks/tslib.es6.js\";import{featureReferenceEquals as r,featureReferenceProperty as e}from\"./featureReferenceUtils.js\";import t from\"../core/Accessor.js\";import s from\"../core/Clonable.js\";import i from\"../core/JSONSupport.js\";import{equalsMaybe as p}from\"../core/maybe.js\";import{property as n}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/RandomLCG.js\";import{subclass as a}from\"../core/accessorSupport/decorators/subclass.js\";import{persistable as m}from\"../core/accessorSupport/decorators/persistable.js\";import c from\"../geometry/Point.js\";import l from\"../symbols/support/ElevationInfo.js\";let f=class extends(i.JSONSupportMixin(s.ClonableMixin(t))){constructor(o){super(o),this.position=null,this.elevationInfo=null,this.feature=null}equals(o){return p(this.position,o.position)&&p(this.elevationInfo,o.elevationInfo)&&r(this.feature,o.feature)}};o([n({type:c,json:{write:{isRequired:!0}}})],f.prototype,\"position\",void 0),o([n({type:l}),m()],f.prototype,\"elevationInfo\",void 0),o([n(e)],f.prototype,\"feature\",void 0),f=o([a(\"esri.analysis.LineOfSightAnalysisObserver\")],f);const u=f;export{u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import s from\"./support/AnalysisOriginWebScene.js\";import r from\"../core/Accessor.js\";import t from\"../core/Clonable.js\";import o from\"../core/Identifiable.js\";import i from\"../core/JSONSupport.js\";import{property as n}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/RandomLCG.js\";import{subclass as a}from\"../core/accessorSupport/decorators/subclass.js\";let p=0,l=class extends(i.JSONSupportMixin(t.ClonableMixin(o.IdentifiableMixin(r)))){constructor(e){super(e),this.id=`${Date.now().toString(16)}-analysis-${p++}`,this.origin=null}get parent(){return this._get(\"parent\")}set parent(e){const s=this.parent;if(null!=s)switch(s.type){case\"line-of-sight\":case\"dimension\":case\"viewshed\":s.releaseAnalysis(this);break;case\"2d\":case\"3d\":s.analyses.includes(this)&&s.analyses.remove(this)}this._set(\"parent\",e)}equals(e){return!0}};e([n({type:String,constructOnly:!0,clonable:!1})],l.prototype,\"id\",void 0),e([n({clonable:!1,value:null})],l.prototype,\"parent\",null),e([n({types:{key:\"type\",base:null,typeMap:{\"web-scene\":s}}})],l.prototype,\"origin\",void 0),l=e([a(\"esri.analysis.Analysis\")],l);export{l as default};\n"],"names":["c","e","t","d","layer","id","r","objectId","objectIdField","attributes","uid","b","json","write","writer","feature","layerId","target","type","Number","String","isRequired","origins","read","ObjectId","m","l","s","a","sceneIntersectionHelper","observer","f","observerFeatureId","I","targetFeatureId","g","p","v","F","o","y","options","store","i","ALL","intersectToolIntersectorRay","N","w","R","A","results","all","u","distanceInRenderSpace","j","observerAdjusted","T","targetAdjusted","h","getIntersectionPoint","observerSurfaceNormal","getTransformedNormal","n","targetSurfaceNormal","Math","min","JSONSupportMixin","constructor","super","this","position","elevationInfo","equals","prototype","ofType","extent","initialize","addHandles","_computeExtent","pending","_set","targets","_get","spatialReference","valid","waitComputeExtent","Promise","resolve","x","z","geometry","every","zmin","zmax","clear","removeAll","toArray","cast","nonNullable","value","readOnly","operationalLayerType","analysis","opacity","parent","load","addResolvingPromise","fullExtent","releaseAnalysis","ignoreOrigin","service","ClonableMixin","IdentifiableMixin","Date","now","toString","origin","analyses","includes","remove","constructOnly","clonable","types","key","base","typeMap"],"sourceRoot":""}