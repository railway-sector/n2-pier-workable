"use strict";(self.webpackChunkn2_pier_workable=self.webpackChunkn2_pier_workable||[]).push([[7323,37040],{420:(e,t,r)=>{r.d(t,{x:()=>i});var n=r(78393),o=r(38496),s=r(93345);function i(e,t){switch(t){case s.WR.TRIANGLES:return function(e){return"number"==typeof e?(0,o.tM)(e):(0,n.mg)(e)?new Uint16Array(e):e}(e);case s.WR.TRIANGLE_STRIP:return function(e){const t="number"==typeof e?e:e.length;if(t<3)return[];const r=t-2,n=(0,o.my)(3*r);if("number"==typeof e){let e=0;for(let t=0;t<r;t+=1)t%2==0?(n[e++]=t,n[e++]=t+1,n[e++]=t+2):(n[e++]=t+1,n[e++]=t,n[e++]=t+2)}else{let t=0;for(let o=0;o<r;o+=1)o%2==0?(n[t++]=e[o],n[t++]=e[o+1],n[t++]=e[o+2]):(n[t++]=e[o+1],n[t++]=e[o],n[t++]=e[o+2])}return n}(e);case s.WR.TRIANGLE_FAN:return function(e){const t="number"==typeof e?e:e.length;if(t<3)return new Uint16Array(0);const r=t-2,n=r<=65536?new Uint16Array(3*r):new Uint32Array(3*r);if("number"==typeof e){let e=0;for(let t=0;t<r;++t)n[e++]=0,n[e++]=t+1,n[e++]=t+2;return n}const o=e[0];let s=e[1],i=0;for(let u=0;u<r;++u){const t=e[u+2];n[i++]=o,n[i++]=s,n[i++]=t,s=t}return n}(e)}}},7323:(e,t,r)=>{r.d(t,{fetch:()=>C});var n=r(99746),o=r(93795),s=r(15941),i=r(63919),u=r(44680),l=r(34761),a=r(13191),c=r(72745),f=r(20664),d=r(9392),m=r(42294),p=r(75002),h=r(88105),g=r(45136),y=r(10947),x=r(52007),T=r(11109),b=r(420),B=r(37040),v=r(54439);class w{constructor(){this.geometries=new Array,this.materials=new Array,this.textures=new Array}}class S{constructor(e,t,r){this.name=e,this.lodThreshold=t,this.pivotOffset=r,this.stageResources=new w,this.numberOfVertices=0}}var R=r(14766),M=r(59046),A=r(50468),E=r(83490),I=r(17345),O=r(96897),L=r(66470),_=r(65131),U=r(78992);async function C(e,t){const u=function(e){const t=e.match(/(.*\.(gltf|glb))(\?lod=([0-9]+))?$/);return t?{fileType:"gltf",url:t[1],specifiedLodIndex:null!=t[4]?Number(t[4]):null}:e.match(/(.*\.(json|json\.gz))$/)?{fileType:"wosr",url:e,specifiedLodIndex:null}:{fileType:"unknown",url:e,specifiedLodIndex:null}}((0,o.EM)(e));if("wosr"===u.fileType){const e=await(t.cache?t.cache.loadWOSR(u.url,t):(0,R.Hh)(u.url,t)),{engineResources:r,referenceBoundingBox:n}=(0,R.FJ)(e,t);return{lods:r,referenceBoundingBox:n,isEsriSymbolResource:!1,isWosr:!0}}let w;if(t.cache)w=await t.cache.loadGLTF(u.url,t,!!t.usePBR);else{const{loadGLTF:e}=await r.e(56516).then(r.bind(r,56516));w=await e(new T.R(t.streamDataRequester),u.url,t,t.usePBR)}const C=w.model.meta?.ESRI_proxyEllipsoid,G=w.meta.isEsriSymbolResource&&null!=C&&"EsriRealisticTreesStyle"===w.meta.ESRI_webstyle;G&&!w.customMeta.esriTreeRendering&&(w.customMeta.esriTreeRendering=!0,function(e,t){for(let r=0;r<e.model.lods.length;++r){const o=e.model.lods[r];for(const s of o.parts){const o=s.attributes.normal;if(null==o)return;const i=s.attributes.position,u=i.count,c=(0,d.vt)(),m=(0,d.vt)(),p=(0,d.vt)(),g=new Float32Array(4*u),y=new Float32Array(3*u),x=(0,l.B8)((0,a.vt)(),s.transform);let T=0,b=0;for(let l=0;l<u;l++){i.getVec(l,m),o.getVec(l,c),(0,f.t)(m,m,s.transform),(0,f.d)(p,m,t.center),(0,f.D)(p,p,t.radius);const u=p[2],a=(0,f.l)(p),d=Math.min(.45+.55*a*a,1)**n.Tf;(0,f.D)(p,p,t.radius),null!==x&&(0,f.t)(p,p,x),(0,f.n)(p,p),r+1!==e.model.lods.length&&e.model.lods.length>1&&(0,f.m)(p,p,c,u>-1?.2:Math.min(-4*u-3.8,1)),y[T]=p[0],y[T+1]=p[1],y[T+2]=p[2],T+=3,g[b]=d,g[b+1]=d,g[b+2]=d,g[b+3]=1,b+=4}s.attributes.normal=new h.xs(y),s.attributes.color=new h.Eq(g)}}}(w,C));const N=!!t.usePBR,P=w.meta.isEsriSymbolResource?{usePBR:N,isSchematic:!1,treeRendering:G,mrrFactors:U.SY}:{usePBR:N,isSchematic:!1,treeRendering:!1,mrrFactors:U.mb},k={...t.materialParameters,treeRendering:G},{engineResources:V,referenceBoundingBox:j}=function(e,t,r,o,u,l){const a=e.model,f=new Array,d=new Map,T=new Map,w=a.lods.length,R=(0,m.Ie)();return a.lods.forEach((e,C)=>{const G=!0===o.skipHighLods&&(w>1&&0===C||w>3&&1===C)||!1===o.skipHighLods&&null!=u&&C!==u;if(G&&0!==C)return;const N=new S(e.name,e.lodThreshold,[0,0,0]);e.parts.forEach(e=>{const u=G?new _.$U({},o):function(e,t,r,o,s,i,u,l,a){const f=e.materials.get(t.material);if(null==f)return null;const{normal:d,color:m,texCoord0:p,tangent:h}=t.attributes,g=t.material+(d?"_normal":"")+(m?"_color":"")+(p?"_texCoord0":"")+(h?"_tangent":""),y=null!=t.attributes.texCoord0,x=null!=t.attributes.normal,T=function(e){switch(e){case"BLEND":return E.sf.Blend;case"MASK":return E.sf.Mask;case"OPAQUE":case null:case void 0:return E.sf.Opaque}}(f.alphaMode);if(!i.has(g)){if(y){const t=function(t){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null!=t&&!u.has(t)){const o=e.textures.get(t);if(o){const e=o.data,s=r&&!(0,B.x3)(e)?l.compressionOptions:void 0;u.set(t,new O.g((0,B.x3)(e)?e.data:e,{...o.parameters,preMultiplyAlpha:!(0,B.x3)(e)&&n,encoding:(0,B.x3)(e)?e.encoding:void 0,compressionOptions:s}))}}},r=T!==E.sf.Opaque&&!a;t(f.colorTexture,r,T!==E.sf.Opaque),t(f.normalTexture),t(f.occlusionTexture,!0),t(f.emissiveTexture),t(f.metallicRoughnessTexture,!0)}const r=1/n.Tf,d=f.color[0]**r,m=f.color[1]**r,p=f.color[2]**r,h=f.emissiveFactor[0]**r,b=f.emissiveFactor[1]**r,w=f.emissiveFactor[2]**r,S=null!=f.colorTexture&&y?u.get(f.colorTexture):null,R=(0,U.Jr)(f),A=null!=f.normalTextureTransform?.scale?f.normalTextureTransform?.scale:c.Un;i.set(g,new _.$U({...o,customDepthTest:E.it.Lequal,textureAlphaMode:T,textureAlphaCutoff:f.alphaCutoff,diffuse:[d,m,p],ambient:[d,m,p],opacity:"OPAQUE"===f.alphaMode?1:f.opacity,doubleSided:f.doubleSided,doubleSidedType:"winding-order",cullFace:f.doubleSided?E.s2.None:E.s2.Back,hasVertexColors:!!t.attributes.color,hasVertexTangents:!!t.attributes.tangent,normalType:x?M.W.Attribute:M.W.ScreenDerivative,castShadows:!0,receiveShadows:f.receiveShadows,receiveAmbientOcclusion:f.receiveAmbientOcclusion,textureId:null!=S?S.id:void 0,colorMixMode:f.colorMixMode,normalTextureId:null!=f.normalTexture&&y?u.get(f.normalTexture).id:void 0,textureAlphaPremultiplied:null!=S&&!!S.parameters.preMultiplyAlpha,occlusionTextureId:null!=f.occlusionTexture&&y?u.get(f.occlusionTexture).id:void 0,emissiveTextureId:null!=f.emissiveTexture&&y?u.get(f.emissiveTexture).id:void 0,metallicRoughnessTextureId:null!=f.metallicRoughnessTexture&&y?u.get(f.metallicRoughnessTexture).id:void 0,emissiveBaseColor:[h,b,w],mrrFactors:R?U.Bt:[f.metallicFactor,f.roughnessFactor,o.mrrFactors[2]],isSchematic:R,colorTextureTransformMatrix:(0,v.G)(f.colorTextureTransform),normalTextureTransformMatrix:(0,v.G)(f.normalTextureTransform),scale:[A[0],A[1]],occlusionTextureTransformMatrix:(0,v.G)(f.occlusionTextureTransform),emissiveTextureTransformMatrix:(0,v.G)(f.emissiveTextureTransform),metallicRoughnessTextureTransformMatrix:(0,v.G)(f.metallicRoughnessTextureTransform),...s},l))}const b=i.get(g);if(r.stageResources.materials.push(b),y){const e=e=>{null!=e&&r.stageResources.textures.push(u.get(e))};e(f.colorTexture),e(f.normalTexture),e(f.occlusionTexture),e(f.emissiveTexture),e(f.metallicRoughnessTexture)}return b}(a,e,N,t,r,d,T,o,l),{geometry:f,vertexCount:w}=function(e,t){const r=e.attributes.position.count,n=(0,b.x)(e.indices||r,e.primitiveType),o=(0,p.oe)(3*r),{typedBuffer:u,typedBufferStride:l}=e.attributes.position;(0,g.t)(o,u,e.transform,3,l);const a=[[L.r.POSITION,new A.n(o,n,3,!0)]];if(null!=e.attributes.normal){const t=(0,p.oe)(3*r),{typedBuffer:o,typedBufferStride:u}=e.attributes.normal;(0,i.Ge)(F,e.transform),(0,g.b)(t,o,F,3,u),(0,s.or)(F)&&(0,g.n)(t,t),a.push([L.r.NORMAL,new A.n(t,n,3,!0)])}if(null!=e.attributes.tangent){const t=(0,p.oe)(4*r),{typedBuffer:o,typedBufferStride:u}=e.attributes.tangent;(0,i.z0)(F,e.transform),(0,y.t)(t,o,F,4,u),(0,s.or)(F)&&(0,g.n)(t,t,4),a.push([L.r.TANGENT,new A.n(t,n,4,!0)])}if(null!=e.attributes.texCoord0){const t=(0,p.oe)(2*r),{typedBuffer:o,typedBufferStride:s}=e.attributes.texCoord0;(0,x.a)(t,o,2,s),a.push([L.r.UV0,new A.n(t,n,2,!0)])}const c=e.attributes.color;if(null!=c){const t=new Uint8Array(4*r);4===c.elementCount?c instanceof h.Eq?(0,y.b)(t,c,1,255):(c instanceof h.XP||c instanceof h.Uz)&&(0,y.b)(t,c,1/255,255):(t.fill(255),c instanceof h.xs?(0,g.f)(t,c.typedBuffer,1,255,4,c.typedBufferStride):(e.attributes.color instanceof h.eI||e.attributes.color instanceof h.nS)&&(0,g.f)(t,c.typedBuffer,1/255,255,4,e.attributes.color.typedBufferStride)),a.push([L.r.COLOR,new A.n(t,n,4,!0)])}return{geometry:new I.V(t,a),vertexCount:r}}(e,u??new _.$U({},o)),S=f.boundingInfo;null!=S&&0===C&&((0,m.iT)(R,S.bbMin),(0,m.iT)(R,S.bbMax)),null!=u&&(N.stageResources.geometries.push(f),N.numberOfVertices+=w)}),G||f.push(N)}),{engineResources:f,referenceBoundingBox:R}}(w,P,k,t,u.specifiedLodIndex,G);return{lods:V,referenceBoundingBox:j,isEsriSymbolResource:w.meta.isEsriSymbolResource,isWosr:!1}}const F=(0,u.vt)()},10947:(e,t,r)=>{r.d(t,{a:()=>s,b:()=>c,l:()=>a,n:()=>u,t:()=>i});var n=r(99746),o=(r(81806),r(76460));function s(e,t,r){i(e.typedBuffer,t.typedBuffer,r,e.typedBufferStride,t.typedBufferStride)}function i(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n;if(e.length/n!==t.length/o)return;const s=e.length/n,i=r[0],u=r[1],l=r[2],a=r[3],c=r[4],f=r[5],d=r[6],m=r[7],p=r[8];let h=0,g=0;for(let y=0;y<s;y++){const r=t[h],s=t[h+1],y=t[h+2],x=t[h+3];e[g]=i*r+a*s+d*y,e[g+1]=u*r+c*s+m*y,e[g+2]=l*r+f*s+p*y,e[g+3]=x,h+=o,g+=n}}function u(e,t){const r=Math.min(e.count,t.count),n=e.typedBuffer,o=e.typedBufferStride,s=t.typedBuffer,i=t.typedBufferStride;for(let u=0;u<r;u++){const e=u*o,t=u*i,r=s[t],l=s[t+1],a=s[t+2],c=r*r+l*l+a*a;if(c>0){const t=1/Math.sqrt(c);n[e]=t*r,n[e+1]=t*l,n[e+2]=t*a}}}function l(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4;const o=Math.min(e.length/n,t.count),s=t.typedBuffer,i=t.typedBufferStride;let u=0,l=0;for(let a=0;a<o;a++)e[l]=r*s[u],e[l+1]=r*s[u+1],e[l+2]=r*s[u+2],e[l+3]=r*s[u+3],u+=i,l+=n}function a(e,t,r,n){c(e.typedBuffer,t,r,n,e.typedBufferStride)}function c(e,t,r,o){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4;const i=Math.min(e.length/s,t.count),u=t.typedBuffer,l=t.typedBufferStride;let a=0,c=0;const f=1/n.Tf;for(let n=0;n<i;n++)e[c]=o*(r*u[a])**f,e[c+1]=o*(r*u[a+1])**f,e[c+2]=o*(r*u[a+2])**f,e[c+3]=o*r*u[a+3],a+=l,c+=s}Object.freeze(Object.defineProperty({__proto__:null,linearToSRGB:c,linearToSRGBView:a,normalize:u,scale:l,scaleView:function(e,t,r){l(e.typedBuffer,t,r,e.typedBufferStride)},transformMat3:i,transformMat3View:s,transformMat4:function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n;if(e.length/n!==t.length/s)return void o.A.getLogger("esri.views.3d.support.buffer.math").error("source and destination buffers need to have the same number of elements");const i=e.length/n,u=r[0],l=r[1],a=r[2],c=r[3],f=r[4],d=r[5],m=r[6],p=r[7],h=r[8],g=r[9],y=r[10],x=r[11],T=r[12],b=r[13],B=r[14],v=r[15];let w=0,S=0;for(let o=0;o<i;o++){const r=t[w],o=t[w+1],i=t[w+2],R=t[w+3];e[S]=u*r+f*o+h*i+T*R,e[S+1]=l*r+d*o+g*i+b*R,e[S+2]=a*r+m*o+y*i+B*R,e[S+3]=c*r+p*o+x*i+v*R,w+=s,S+=n}},transformMat4View:function(e,t,r){if(e.count!==t.count)return;const n=e.count,o=r[0],s=r[1],i=r[2],u=r[3],l=r[4],a=r[5],c=r[6],f=r[7],d=r[8],m=r[9],p=r[10],h=r[11],g=r[12],y=r[13],x=r[14],T=r[15],b=e.typedBuffer,B=e.typedBufferStride,v=t.typedBuffer,w=t.typedBufferStride;for(let S=0;S<n;S++){const e=S*B,t=S*w,r=v[t],n=v[t+1],R=v[t+2],M=v[t+3];b[e]=o*r+l*n+d*R+g*M,b[e+1]=s*r+a*n+m*R+y*M,b[e+2]=i*r+c*n+p*R+x*M,b[e+3]=u*r+f*n+h*R+T*M}}},Symbol.toStringTag,{value:"Module"}))},37040:(e,t,r)=>{r.d(t,{KB:()=>u,Xi:()=>s,pn:()=>l,x3:()=>i});var n=r(81806),o=r(83490);class s{constructor(e){this.data=e,this.type="encoded-mesh-texture",this.encoding=o.JS.KTX2_ENCODING}}function i(e){return"encoded-mesh-texture"===e?.type}async function u(e){const t=new Blob([e]),r=await t.text();return JSON.parse(r)}async function l(e,t){if(t===o.JS.KTX2_ENCODING)return new s(e);const r=new Blob([e],{type:t});let i=URL.createObjectURL(r);switch(t){case"image/jpeg":i+="#.jpg";break;case"image/png":i+="#.png"}const u=new Image;if((0,n.A)("esri-iPhone"))return new Promise((e,t)=>{const r=()=>{o(),e(u)},n=e=>{o(),t(e)},o=()=>{URL.revokeObjectURL(i),u.removeEventListener("load",r),u.removeEventListener("error",n)};u.addEventListener("load",r),u.addEventListener("error",n),u.src=i});try{u.src=i,await u.decode()}catch(l){console.warn("Failed decoding HTMLImageElement")}return URL.revokeObjectURL(i),u}},52007:(e,t,r)=>{r.d(t,{a:()=>s,f:()=>i,n:()=>o});var n=r(78393);function o(e,t){s(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)}function s(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r;const s=t.length/2;let i=0,u=0;if(!(0,n.iu)(t)||(0,n.dk)(t)){for(let n=0;n<s;++n)e[i]=t[u],e[i+1]=t[u+1],i+=r,u+=o;return}const l=(0,n.a3)(t);if((0,n.JI)(t))for(let n=0;n<s;++n)e[i]=Math.max(t[u]/l,-1),e[i+1]=Math.max(t[u+1]/l,-1),i+=r,u+=o;else for(let n=0;n<s;++n)e[i]=t[u]/l,e[i+1]=t[u+1]/l,i+=r,u+=o}function i(e,t,r,n){const o=e.typedBuffer,s=e.typedBufferStride,i=n?.count??e.count;let u=(n?.dstIndex??0)*s;for(let l=0;l<i;++l)o[u]=t,o[u+1]=r,u+=s}Object.freeze(Object.defineProperty({__proto__:null,fill:i,normalizeIntegerBuffer:s,normalizeIntegerBufferView:o},Symbol.toStringTag,{value:"Module"}))},54439:(e,t,r)=>{r.d(t,{G:()=>i});var n=r(44680),o=r(59422),s=r(63919);function i(e){if(null==e)return null;const t=null!=e.offset?e.offset:o.uY,r=null!=e.rotation?e.rotation:0,i=null!=e.scale?e.scale:o.Un,u=(0,n.fA)(1,0,0,0,1,0,t[0],t[1],1),l=(0,n.fA)(Math.cos(r),-Math.sin(r),0,Math.sin(r),Math.cos(r),0,0,0,1),a=(0,n.fA)(i[0],0,0,0,i[1],0,0,0,1),c=(0,n.vt)();return(0,s.lw)(c,l,a),(0,s.lw)(c,u,c),c}}}]);
//# sourceMappingURL=7323.55cd2c1e.chunk.js.map