"use strict";(self.webpackChunkn2_pier_workable=self.webpackChunkn2_pier_workable||[]).push([[97749],{77515:(e,t,i)=>{i.d(t,{CL:()=>c,Gc:()=>h,OK:()=>d,s7:()=>p,uc:()=>l,zS:()=>u});var n=i(20664),s=i(9392),a=i(65215),r=i(78315),o=i(94966);function l(e,t){const i=(0,r.a)(t);(0,n.i)(i,0,0,0);for(let a=0;a<e.length;++a)(0,n.f)(i,i,e[a]);(0,n.g)(i,i,1/e.length);let s=0;for(let a=0;a<e.length;++a)s=Math.max(s,(0,n.s)(i,e[a]));t[3]=Math.sqrt(s)}function d(e,t){if(e.length<3)throw new Error("need at least 3 points to fit a plane");(0,o.e9)(e[0],e[1],e[2],t)}function c(e,t){return(0,n.e)(e,t)+e[3]}function u(e,t,i,s,a){let{geodesicArea:r}=a;const o=g;return(0,n.c)(o.rings[0][0],e),(0,n.c)(o.rings[0][1],t),(0,n.c)(o.rings[0][2],i),(0,n.c)(o.rings[0][3],e),o.spatialReference=s,o.clearCache(),r(o)}function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const s=(e,t)=>{if(0===t[0]&&0===t[1]&&0===t[2])return!1;for(let i=0;i<e.length;++i)if((0,n.e)(t,e[i])<-1e-6)return!1;return!0};if(0===e.length)return!1;if(1===e.length)return t&&(0,n.c)(t,e[0]),!0;(0,n.i)(_,0,0,0);for(let a=0;a<e.length;++a)(0,n.f)(_,_,e[a]);if((0,n.n)(_,_),s(e,_))return t&&(0,n.c)(t,_),!0;if(!i)return!1;for(let a=0;a<e.length;++a)for(let i=0;i<e.length;++i)if(a!==i&&((0,n.h)(_,e[a],e[i]),(0,n.n)(_,_),s(e,_)))return t&&(0,n.c)(t,_),!0;return!1}function p(e){return"mouse"!==e.pointerType||0===e.button}const g=new a.A({hasM:!1,hasZ:!0,rings:[[(0,s.vt)(),(0,s.vt)(),(0,s.vt)(),(0,s.vt)()]],spatialReference:null}),_=(0,s.vt)()},87562:(e,t,i)=>{var n;i.d(t,{G:()=>n}),function(e){e[e.Auto=0]="Auto",e[e.Euclidean=1]="Euclidean",e[e.Geodesic=2]="Geodesic"}(n||(n={}))},90806:(e,t,i)=>{i.d(t,{M:()=>u,b:()=>c});var n=i(3799),s=i(58350),a=i(21390),r=i(86955),o=i(66470),l=i(2687),d=i(75569);function c(e){const t=new l.N5,{vertex:i,fragment:c}=t;(0,n.NB)(i,e),i.uniforms.add(new a.m("width",e=>e.width)),t.attributes.add(o.r.POSITION,"vec3"),t.attributes.add(o.r.NORMAL,"vec3"),t.attributes.add(o.r.UV0,"vec2"),t.attributes.add(o.r.LENGTH,"float"),t.varyings.add("vtc","vec2"),t.varyings.add("vlength","float"),t.varyings.add("vradius","float"),i.main.add(r.H`vec3 bitangent = normal;
vtc = uv0;
vlength = length;
vradius = 0.5 * width;
vec4 pos = view * vec4(position + vradius * bitangent * uv0.y, 1.0);
gl_Position = proj * pos;`),c.uniforms.add(new a.m("outlineSize",e=>e.outlineSize),new s.E("outlineColor",e=>e.outlineColor),new a.m("stripeLength",e=>e.stripeLength),new s.E("stripeEvenColor",e=>e.stripeEvenColor),new s.E("stripeOddColor",e=>e.stripeOddColor));const u=1/Math.sqrt(2);return c.code.add(r.H`
    const float INV_SQRT2 = ${r.H.float(u)};

    vec4 arrowColor(vec2 tc, float len) {
      float d = INV_SQRT2 * (tc.x - abs(tc.y));
      d = min(d, INV_SQRT2 * (len - tc.x - abs(tc.y)));
      d = min(d, 1.0 - abs(tc.y));

      if (d < 0.0) {
        return vec4(0.0);
      }
      if (d < outlineSize) {
        return outlineColor;
      }
      return fract(0.5 / stripeLength * tc.x * vradius) >= 0.5 ? stripeOddColor : stripeEvenColor;
    }`),c.main.add(r.H`
    vec2 ntc = vec2(vtc.x / vradius, vtc.y);
    vec4 color = arrowColor(ntc, vlength / vradius);
    if (color.a < ${r.H.float(d.Q)}) {
      discard;
    }
    fragColor = color;`),t}const u=Object.freeze(Object.defineProperty({__proto__:null,build:c},Symbol.toStringTag,{value:"Module"}))},97749:(e,t,i)=>{i.r(t),i.d(t,{default:()=>ot});var n=i(35143),s=i(91967),a=(i(81806),i(30726)),r=i(46053),o=i(76460),l=(i(47249),i(85842)),d=i(19747),c=i(2522),u=i(87562),h=i(24648),p=i(68134),g=i(31633),_=i(17430),v=i(29772);let m=class extends s.A{constructor(e){super(e)}initialize(){this.addHandles([(0,p.wB)(()=>({viewData:this.viewData,startPoint:this.analysis.startPoint}),e=>{let{viewData:t,startPoint:i}=e;t.elevationAlignedStartPoint=this._applyProjectionAndElevationAlignment(i)},p.pc),(0,p.wB)(()=>({viewData:this.viewData,endPoint:this.analysis.endPoint}),e=>{let{viewData:t,endPoint:i}=e;t.elevationAlignedEndPoint=this._applyProjectionAndElevationAlignment(i)},p.pc),(0,p.wB)(()=>({result:this._computedResult,viewData:this.viewData}),e=>{let{result:t,viewData:i}=e;i.result=t},p.pc)])}_applyProjectionAndElevationAlignment(e){if(null==e)return e;const{spatialReference:t,elevationProvider:i}=this.view;return(0,_.B)(e,t,i)??((0,_.V)(this.analysis,e.spatialReference,o.A.getLogger(this)),null)}get _computedResult(){const{elevationAlignedStartPoint:e,elevationAlignedEndPoint:t,measurementMode:i,unit:n}=this.viewData;if(null==e||null==t)return null;const s=(0,v.NH)(e,t),a=this.geodesicLengthMeasurementUtils.geodesicDistanceBetweenPoints(e,t);if(null==s)return null;let r,o;switch(i){case u.G.Auto:o=null!=a?"geodesic":"euclidean",r=a??s.horizontal;break;case u.G.Geodesic:if(null==a)return null;o="geodesic",r=a;break;case u.G.Euclidean:o="euclidean",r=s.horizontal}let l=s.direct,d=s.vertical;const c=(0,g.Vs)(l.value,l.unit,n),p=(0,g.Vs)(r.value,r.unit,n),_=(0,g.jE)(d.value,d.unit,n);return l=(0,h.kM)(l,c),r=(0,h.kM)(r,p),d=(0,h.kM)(d,_),{mode:o,directDistance:l,horizontalDistance:r,verticalDistance:d}}};(0,n._)([(0,r.MZ)({constructOnly:!0})],m.prototype,"view",void 0),(0,n._)([(0,r.MZ)({constructOnly:!0})],m.prototype,"analysis",void 0),(0,n._)([(0,r.MZ)({constructOnly:!0})],m.prototype,"viewData",void 0),(0,n._)([(0,r.MZ)({constructOnly:!0})],m.prototype,"geodesicLengthMeasurementUtils",void 0),(0,n._)([(0,r.MZ)()],m.prototype,"_computedResult",null),m=(0,n._)([(0,l.$)("esri.views.3d.analysis.DirectLineMeasurement.DirectLineMeasurementController")],m);i(11265);var w,y,b,M=i(59784),P=i(15941),f=i(11113),L=i(76931),C=i(19555),S=i(20664),A=i(9392);(b=w||(w={}))[b.None=0]="None",b[b.Direct=1]="Direct",b[b.Triangle=2]="Triangle",b[b.ProjectedGeodesic=3]="ProjectedGeodesic",function(e){e[e.Auto=0]="Auto",e[e.AboveSegment=1]="AboveSegment",e[e.BelowSegment=2]="BelowSegment"}(y||(y={}));var V=i(4244),O=i(66747),E=i(7256),D=i(88321),z=i(13191),Z=i(43047),T=i(55855),R=i(75762),x=i(32314),G=i(81923),H=i(71372),k=i(62577),B=i(45463),N=i(48549),j=i(34981),I=i(59696),Q=i(77730),W=i(66470),U=i(16506),q=i(59246),$=i(60322),F=i(90806),J=i(93345),X=i(57162);class Y extends q.w{constructor(e,t){super(e,t,new U.$(F.M,()=>i.e(59492).then(i.bind(i,59492))),K),this.primitiveType=J.WR.TRIANGLE_STRIP}initializePipeline(e){return(0,X.Ey)({blending:e.transparent?(0,$.Yf)(e.oitPass):null,polygonOffset:e.polygonOffsetEnabled?{factor:0,units:-4}:null,depthTest:{func:J.MT.LESS},depthWrite:X.Uy,colorWrite:X.kn})}}const K=new Map([[W.r.POSITION,0],[W.r.NORMAL,1],[W.r.UV0,2],[W.r.LENGTH,3]]);var ee=i(6485),te=i(92656);class ie extends te.E{constructor(){super(...arguments),this.polygonOffsetEnabled=!1,this.transparent=!1}}(0,n._)([(0,ee.W)()],ie.prototype,"polygonOffsetEnabled",void 0),(0,n._)([(0,ee.W)()],ie.prototype,"transparent",void 0);var ne=i(75569);class se extends B.im{constructor(e){super(e,re),this._configuration=new ie,this.vertexAttributeLocations=K,this.intersectDraped=void 0,this.produces=new Map([[Q.N.OPAQUE_MATERIAL,e=>!this._transparent&&(0,j.RN)(e)],[Q.N.TRANSPARENT_MATERIAL_WITHOUT_DEPTH,e=>this._transparent&&(0,j.RN)(e)]])}getConfiguration(e,t){return super.getConfiguration(e,t,this._configuration),this._configuration.polygonOffsetEnabled=this.parameters.polygonOffset,this._configuration.transparent=this._transparent,this._configuration.oitPass=t.oitPass,this._configuration}get visible(){const{outlineColor:e,stripeEvenColor:t,stripeOddColor:i}=this.parameters;return e[3]>=ne.Q||t[3]>=ne.Q||i[3]>=ne.Q}intersect(){}createGLMaterial(e){return new ae(e)}createBufferWriter(){return new pe}get _transparent(){const{parameters:e}=this;return e.outlineColor[3]<1||e.stripeEvenColor[3]<1||e.stripeOddColor[3]<1}}class ae extends I.A{beginSlot(e){return this.getTechnique(Y,e)}}class re extends B.qA{constructor(){super(...arguments),this.width=32,this.outlineSize=.2,this.outlineColor=(0,T.fA)(1,.5,0,1),this.stripeEvenColor=(0,T.fA)(1,1,1,1),this.stripeOddColor=(0,T.fA)(1,.5,0,1),this.stripeLength=1,this.polygonOffset=!1}}const oe=(0,N.BP)().vec3f(W.r.POSITION).vec3f(W.r.NORMAL).vec2f(W.r.UV0).f32(W.r.LENGTH),le=(0,A.vt)(),de=(0,A.vt)(),ce=(0,A.vt)(),ue=(0,A.vt)(),he=(0,A.vt)();class pe{constructor(){this.vertexBufferLayout=oe}elementCount(e){return 2*(e.get(W.r.POSITION).indices.length/2+1)}write(e,t,i,n,s,a){const{data:r,indices:o}=i.get(W.r.POSITION),l=i.get(W.r.NORMAL).data,d=r.length/3;o&&o.length!==2*(d-1)&&console.warn("MeasurementArrowMaterial does not support indices");const c=le,u=de,h=ce,p=ue,g=he,_=s.position,v=s.normal,m=s.uv0;let w=0;for(let b=0;b<d;++b){const i=3*b;if((0,S.i)(c,r[i],r[i+1],r[i+2]),b<d-1){const e=3*(b+1);(0,S.i)(u,r[e],r[e+1],r[e+2]),(0,S.i)(g,l[e],l[e+1],l[e+2]),(0,S.n)(g,g),(0,S.d)(h,u,c),(0,S.n)(h,h),(0,S.h)(p,g,h),(0,S.n)(p,p)}const n=(0,S.j)(c,u);e&&t&&((0,S.t)(c,c,e),(0,S.t)(u,u,e),(0,S.t)(p,p,t));const s=a+2*b,o=s+1;_.setVec(s,c),_.setVec(o,c),v.setVec(s,p),v.setVec(o,p),m.set(s,0,w),m.set(s,1,-1),m.set(o,0,w),m.set(o,1,1),b<d-1&&(w+=n)}const y=s.length;for(let b=0;b<2*d;++b)y.set(a+b,w);return null}}class ge extends x.X{constructor(e){super(e),this._arrowWidth=16,this._arrowSubdivisions=128,this._origin=(0,A.vt)(),this._originTransform=(0,z.vt)(),this._arrowCenter=(0,A.vt)(),this._renderOccluded=B.m$.OccludeAndTransparent,this._geometry=null,this._stripeLength=1,this._stripesEnabled=!0,this._color=(0,T.vt)(),this._contrastColor=(0,T.vt)(),this.applyProperties(e)}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._arrowMaterial?.setParameters({renderOccluded:e}))}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this._geometryChanged()}get stripeLength(){return this._stripeLength}set stripeLength(e){this._stripeLength=e,this.attached&&this._arrowMaterial.setParameters({stripeLength:this._stripeLength})}get stripesEnabled(){return this._stripesEnabled}set stripesEnabled(e){if(this._stripesEnabled=e,this.attached){const e=this._stripesEnabled?this._contrastColor:this._color;this._arrowMaterial.setParameters({stripeEvenColor:e})}}get color(){return this._color}set color(e){(0,M.we)(e,this._color)||((0,Z.c)(this._color,e),this._updateArrowColor())}get contrastColor(){return this._contrastColor}set contrastColor(e){(0,M.we)(e,this._color)||((0,Z.c)(this._contrastColor,e),this._updateArrowColor())}createExternalResources(){const e=this._color,t=this._contrastColor,i=this._stripesEnabled?t:e;this._arrowMaterial=new se({outlineColor:e,stripeEvenColor:i,stripeOddColor:e,renderOccluded:this.renderOccluded,polygonOffset:!0,isDecoration:this.isDecoration}),this._handles=new D.A,this._handles.add((0,p.wB)(()=>this.view.state.camera,()=>{this._viewChanged()}))}destroyExternalResources(){this._arrowMaterial=null,this._handles=(0,a.pR)(this._handles)}forEachMaterial(e){e(this._arrowMaterial)}createGeometries(e){if(null==this._geometry?.startRenderSpace||null==this._geometry.endRenderSpace)return;const t=this._createArrowGeometry(this._geometry.startRenderSpace,this._geometry.endRenderSpace,this._origin,this._geometry);t.transformation=this._originTransform,e.addGeometry(t),this._viewChanged()}_createArrowGeometry(e,t,i,n){const s=this.view,a=s.renderCoordsHelper,r=[],o=[],l=(e,t)=>{const n=R.rq.get();(0,S.d)(n,e,i),r.push(n),o.push(t)};if("euclidean"===n.type){n.eval(.5,this._arrowCenter);const i=R.rq.get();if(a.worldUpAtPosition(this._arrowCenter,i),function(e,t,i){const n=(0,S.a)(_e,t,e),s=(0,S.h)(_e,n,i);return 0===(0,S.H)(s)}(e,t,i)){const{heading:t,tilt:n}=s.camera,{direction:a}=(0,G.ZC)(s,e,t,n,ve);(0,S.c)(i,a)}l(e,i),l(t,i)}else{n.eval(.5,this._arrowCenter);const e=this._arrowSubdivisions+1&-2;for(let t=0;t<e;++t){const i=t/(e-1),s=R.rq.get(),r=R.rq.get();n.eval(i,s),a.worldUpAtPosition(s,r),l(s,r)}}return(0,k.Z8)(this._arrowMaterial,r,o)}_geometryChanged(){this.recreateGeometry()}_viewChanged(){if(this.view.ready&&this.attached&&null!=this._geometry){const e=this.view.state.camera.computeScreenPixelSizeAt(this._arrowCenter);this._arrowMaterial.setParameters({width:this._arrowWidth*e})}}_updateArrowColor(){if(!this.attached)return;const e=this._color,t=this._contrastColor,i=this._stripesEnabled?t:e,n=e,s=e;this._arrowMaterial.setParameters({stripeEvenColor:i,outlineColor:n,stripeOddColor:s})}}const _e=(0,A.vt)(),ve=(0,H.NP)();var me=i(47996),we=i(25191),ye=i(35925),be=i(90659),Me=i(38042),Pe=i(63860);let fe=class extends s.A{get _parameters(){const e=this.view.effectiveTheme,{accentColor:t,textColor:i}=e,n=(0,M.QP)(t),s=(0,M.f6)(t,.75),a=(0,M.QP)((0,M.bJ)(t)),r=(0,M.bJ)(i,M.pW.Low);return{accentColor:n,contrastColor:a,translucentAccentColor:s,triangleLineWidth:3,geodesicProjectionLineWidth:2,guideLineWidth:2,guideStippleLengthPixels:3,directLabelFontSize:16,horizontalLabelFontSize:12,verticalLabelFontSize:12,textColor:i,textBackgroundColor:(0,M._L)(r,.6),textCalloutColor:(0,M._L)(r,.5)}}get visible(){return this.analysisView.visible}get viewMode(){const{elevationAlignedStartPoint:e,elevationAlignedEndPoint:t}=this.analysisView;if(null==e||null==t||e.equals(t))return w.None;const i=this.analysisView.result;if(null==i)return w.Direct;if("geodesic"===this.actualVisualizedMeasurement)return this._requiresGeodesicGuideAt(this._startPosition)||this._requiresGeodesicGuideAt(this._endPosition)?w.ProjectedGeodesic:w.Direct;const{verticalDistance:n,horizontalDistance:s}=i,a=(0,h.kM)(n,"meters").value,r=(0,h.kM)(s,"meters").value;return Math.min(a/r,r/a)<this.triangleCollapseRatioThreshold?w.Direct:w.Triangle}get actualVisualizedMeasurement(){const{measurementMode:e,result:t}=this.analysisView;switch(e){case u.G.Auto:return null!=t&&(0,h.kM)(t.horizontalDistance,"meters").value>be.U7?"geodesic":"euclidean";case u.G.Euclidean:return"euclidean";case u.G.Geodesic:return"geodesic"}}get allowVisualElementsOrientationChange(){return null==this._triangleOrientationOverride}set allowVisualElementsOrientationChange(e){null==this._triangleOrientationOverride!==e&&(null==this._triangleOrientationOverride?this._triangleOrientationOverride=this._actualVisualElementsOrientation:this._triangleOrientationOverride=null)}get labels(){return"geodesic"===this.actualVisualizedMeasurement?{direct:null,horizontal:this._segmentLabel,vertical:this._verticalLabel}:{direct:this._segmentLabel,horizontal:this._horizontalLabel,vertical:this._verticalLabel}}constructor(e){super(e),this._segmentVisualElement=null,this._triangleVisualElement=null,this._rightAngleQuad=null,this._projectedGeodesicLine=null,this._geodesicStartHint=null,this._geodesicEndHint=null,this._segmentLabel=null,this._verticalLabel=null,this._horizontalLabel=null,this._startPosition=(0,A.vt)(),this._endPosition=(0,A.vt)(),this._cornerPosition=(0,A.vt)(),this._startPositionAtSeaLevel=(0,A.vt)(),this._endPositionAtSeaLevel=(0,A.vt)(),this._triangleOrientationOverride=null,this.messages=null,this.loadingMessages=!0,this.visualElementOrientation=y.Auto,this.triangleCollapseRatioThreshold=.03}initialize(){const e={attached:!0,view:this.view,isDecoration:!0},{guideLineWidth:t,guideStippleLengthPixels:i,triangleLineWidth:n,geodesicProjectionLineWidth:s,directLabelFontSize:a,verticalLabelFontSize:r,horizontalLabelFontSize:o}=this._parameters;this._segmentVisualElement=new ge({...e,geometry:null,renderOccluded:B.m$.OccludeAndTransparent}),this._triangleVisualElement=new E.t({...e,width:n,renderOccluded:B.m$.OccludeAndTransparent}),this._rightAngleQuad=new me.n({...e,renderOccluded:B.m$.OccludeAndTransparent});const l={...e,polygonOffset:!0,renderOccluded:B.m$.OccludeAndTransparent};this._projectedGeodesicLine=new E.t({...l,width:s,stipplePattern:(0,ye.wk)(i)}),this._geodesicStartHint=new E.t({...l,width:t,stipplePattern:(0,ye.wk)(i)}),this._geodesicEndHint=new E.t({...l,width:t,stipplePattern:(0,ye.wk)(i)}),this._segmentLabel=new O.N({...e,fontSize:a}),this._verticalLabel=new O.N({...e,fontSize:r}),this._horizontalLabel=new O.N({...e,fontSize:o}),this.addHandles([(0,p.wB)(()=>{const{elevationAlignedStartPoint:e,elevationAlignedEndPoint:t}=this.analysisView,i=this.view;return{view:i,camera:i.state.camera,viewMode:this.viewMode,elevationAlignedStartPoint:e,elevationAlignedEndPoint:t,orientation:this._actualVisualElementsOrientation,visualizedMeasurement:this.actualVisualizedMeasurement,stripeLength:this._measurementArrowStripeLength}},e=>this._updateGeometryAndViewMode(e),p.pc),(0,p.wB)(()=>({visible:this.visible,viewMode:this.viewMode}),e=>this._updateVisualElementVisibility(e),p.pc),(0,p.wB)(()=>({text:this._labelsText,visualizedMeasurement:this.actualVisualizedMeasurement}),e=>this._updateLabelText(e),p.pc),(0,p.wB)(()=>({visible:this.visible,viewMode:this.viewMode}),e=>this._updateLabelVisibility(e),p.pc),(0,p.wB)(()=>this._measurementArrowStripeLength,e=>this._updateSegmentStripeLength(e),p.pc),(0,Me.oQ)(async()=>this._updateMessageBundle()),(0,p.wB)(()=>this._parameters,e=>{let{textBackgroundColor:t,textCalloutColor:i,textColor:n,translucentAccentColor:s,accentColor:a,contrastColor:r}=e;const{_segmentLabel:o,_verticalLabel:l,_horizontalLabel:d,_triangleVisualElement:c,_rightAngleQuad:u,_projectedGeodesicLine:h,_geodesicStartHint:p,_geodesicEndHint:g,_segmentVisualElement:_}=this;o.backgroundColor=t,o.calloutColor=i,o.textColor=n,l.backgroundColor=t,l.calloutColor=i,l.textColor=n,d.backgroundColor=t,d.calloutColor=i,d.textColor=n,c.color=s,u.color=s,h.color=s,p.color=s,g.color=s,_.color=a,_.contrastColor=r},p.Vh)]),this._updateMessageBundle()}destroy(){this._segmentVisualElement=(0,a.pR)(this._segmentVisualElement),this._triangleVisualElement=(0,a.pR)(this._triangleVisualElement),this._rightAngleQuad=(0,a.pR)(this._rightAngleQuad),this._projectedGeodesicLine=(0,a.pR)(this._projectedGeodesicLine),this._geodesicStartHint=(0,a.pR)(this._geodesicStartHint),this._geodesicEndHint=(0,a.pR)(this._geodesicEndHint),this._segmentLabel=(0,a.pR)(this._segmentLabel),this._verticalLabel=(0,a.pR)(this._verticalLabel),this._horizontalLabel=(0,a.pR)(this._horizontalLabel),this.set("view",null)}_updateVisualElementVisibility(e){let{visible:t,viewMode:i}=e;if(this._segmentVisualElement.visible=!1,this._triangleVisualElement.visible=!1,this._rightAngleQuad.visible=!1,this._projectedGeodesicLine.visible=!1,this._geodesicStartHint.visible=!1,this._geodesicEndHint.visible=!1,t)switch(i){case w.None:break;case w.Direct:this._segmentVisualElement.visible=!0;break;case w.Triangle:this._segmentVisualElement.visible=!0,this._triangleVisualElement.visible=!0,this._rightAngleQuad.visible=!0;break;case w.ProjectedGeodesic:this._segmentVisualElement.visible=!0,this._projectedGeodesicLine.visible=!0,this._geodesicStartHint.visible=!0,this._geodesicEndHint.visible=!0}}_updateGeometryAndViewMode(e){let{view:t,camera:i,viewMode:n,elevationAlignedStartPoint:s,elevationAlignedEndPoint:a,orientation:r,visualizedMeasurement:o,stripeLength:l}=e;const d=t.renderCoordsHelper;if(null==d||null==s||null==a||s.equals(a))return;let c=this._startPosition,u=this._endPosition;d.toRenderCoords(s,c),d.toRenderCoords(a,u);const h=r===y.AboveSegment?1:-1,p=h*(d.getAltitude(u)-d.getAltitude(c));p<0&&(c=this._endPosition,u=this._startPosition);const g="geodesic"===o?new we.J(this._startPosition,this._endPosition,d.spatialReference):new we.C(this._startPosition,this._endPosition);switch(this._segmentVisualElement.geometry=g,this._updateSegmentStripeLength(l),n){case w.Direct:this._updateSegment(g,r);break;case w.Triangle:this._updateSegmentAndTriangle({view:t,camera:i,segment:g,orientation:r,startPosition:c,endPosition:u,deltaSign:h,altitudeDelta:p});break;case w.ProjectedGeodesic:this._updateSegmentAndProjection({view:t,orientation:r,startPosition:c,endPosition:u})}}_updateSegment(e,t){this._segmentLabel.anchor=t===y.AboveSegment?"top":"bottom",this._segmentLabel.geometry={type:"segment",segment:e,sampleLocation:"center"}}_updateSegmentAndTriangle(e){let{view:{renderCoordsHelper:t},camera:i,segment:n,orientation:s,startPosition:a,endPosition:r,deltaSign:o,altitudeDelta:l}=e;const d=this._cornerPosition;t.worldUpAtPosition(a,d),(0,S.g)(d,d,o*Math.abs(l)),(0,S.f)(d,d,a),this._triangleVisualElement.geometry=[[[a[0],a[1],a[2]],[d[0],d[1],d[2]],[r[0],r[1],r[2]]]],this._rightAngleQuad.geometry={previous:a,center:d,next:r};const c=new we.C(a,d),u=new we.C(d,r),h=function(e,t,i,n,s){const a=Ce,r=Se;s.projectToRenderScreen(i,a),s.projectToRenderScreen(t,r);const o={segment:"bottom",horizontal:"top",vertical:a[0]<r[0]?"left":"right"};{const n=Ae,a=Ve;if((0,V.Q)(e,i,s,n),(0,V.Q)(e,t,s,a),(0,C.Om)(n,a)>=Le){const e=Math.sign(n[1])===Math.sign(a[1]);o.segment=e?(0,O.R)(o.vertical):o.vertical}else{const e=Oe;(0,V.Q)(i,t,s,e),(0,C.Om)(e,a)>=Le&&(o.segment=Math.sign(e[0])===Math.sign(a[0])?(0,O.R)(o.horizontal):o.horizontal)}}if(n===y.BelowSegment){const e=e=>"top"===e?"bottom":"top";o.segment=e(o.segment),o.horizontal=e(o.horizontal),o.vertical=e(o.vertical)}return o}(a,r,d,s,i);this._segmentLabel.anchor=h.segment,this._segmentLabel.geometry={type:"segment",segment:n,sampleLocation:"center"},this._verticalLabel.geometry={type:"segment",segment:c,sampleLocation:"center"},this._verticalLabel.anchor=h.vertical,this._horizontalLabel.geometry={type:"segment",segment:u,sampleLocation:"center"},this._horizontalLabel.anchor=h.horizontal}_updateSegmentAndProjection(e){let{view:{renderCoordsHelper:t},orientation:i,startPosition:n,endPosition:s}=e;t.setAltitude(this._startPositionAtSeaLevel,0,n),t.setAltitude(this._endPositionAtSeaLevel,0,s);const a=new we.J(this._startPositionAtSeaLevel,this._endPositionAtSeaLevel,t.spatialReference);this._projectedGeodesicLine.setGeometryFromSegment(a),this._geodesicStartHint.setGeometryFromSegment(new we.C(this._startPositionAtSeaLevel,n)),this._geodesicEndHint.setGeometryFromSegment(new we.C(this._endPositionAtSeaLevel,s)),this._segmentLabel.geometry={type:"segment",segment:a,sampleLocation:"center"},this._segmentLabel.anchor=i===y.AboveSegment?"top":"bottom"}_updateLabelText(e){let{text:t,visualizedMeasurement:i}=e;null!=t?(this._segmentLabel.text="euclidean"===i?t.directDistance:t.horizontalDistance,this._horizontalLabel.text=t.horizontalDistance,this._verticalLabel.text=t.verticalDistance):(this._segmentLabel.text=null,this._horizontalLabel.text=null,this._verticalLabel.text=null),this.notifyChange("labels")}_updateLabelVisibility(e){let{visible:t,viewMode:i}=e;const n=this._segmentLabel,s=this._horizontalLabel,a=this._verticalLabel;if(n.visible=!1,s.visible=!1,a.visible=!1,t)switch(i){case w.Direct:n.visible=!0;break;case w.Triangle:n.visible=!0,s.visible=!0,a.visible=!0;break;case w.ProjectedGeodesic:n.visible=!0;case w.None:}}get _labelsText(){if(this.destroyed)return null;const e=this.messages,t=this.analysisView.result;if(null==t||null==e)return null;const{directDistance:i,horizontalDistance:n,verticalDistance:s}=t,a=this.analysisView.unit,r=e=>({directDistance:"",horizontalDistance:"",verticalDistance:"",...e});switch(a){case"metric":return r({directDistance:i&&(0,f.Ee)(e,i),horizontalDistance:n&&(0,f.Ee)(e,n),verticalDistance:s&&(0,f.W4)(e,s)});case"imperial":return r({directDistance:i&&(0,f.tr)(e,i),horizontalDistance:n&&(0,f.tr)(e,n),verticalDistance:s&&(0,f.t_)(e,s)});default:return r({directDistance:i&&(0,f.zJ)(e,i,a),horizontalDistance:n&&(0,f.zJ)(e,n,a),verticalDistance:s&&(0,f.zJ)(e,s,a)})}}_updateSegmentStripeLength(e){const t=this._segmentVisualElement;null!=e?(t.stripeLength=e,t.stripesEnabled=!0):t.stripesEnabled=!1}get _actualVisualElementsOrientation(){if(null!=this._triangleOrientationOverride)return this._triangleOrientationOverride;const e=this.visualElementOrientation;return e===y.Auto?this.view.state.camera.aboveGround?y.AboveSegment:y.BelowSegment:e}_requiresGeodesicGuideAt(e){const t=this.view;if(!t?.state)return!1;const i=t.state.camera,n=t.renderCoordsHelper;if(!n)return!1;const s=i.computeScreenPixelSizeAt(e);return n.getAltitude(e)/s>=10}get _measurementArrowStripeLength(){const{result:e,unit:t}=this.analysisView;if(null==e)return null;let i=null;const n=e.directDistance;switch(t){case"metric":i=n&&(0,h.kM)(n,"meters");break;case"imperial":i=n&&(0,h.kM)(n,(0,g.OU)(n.value,n.unit));break;default:i=n&&(0,h.kM)(n,t)}return null==i?null:(0,P.Vr)(i.value/30)*(0,g.oU)(1,i.unit,"meters")}_updateMessageBundle(){this.loadingMessages=!0,(0,Pe.ud)("esri/core/t9n/Units").then(e=>{this.messages=e}).finally(()=>{this.loadingMessages=!1})}get testData(){}};(0,n._)([(0,r.MZ)()],fe.prototype,"_parameters",null),(0,n._)([(0,r.MZ)()],fe.prototype,"_triangleOrientationOverride",void 0),(0,n._)([(0,r.MZ)()],fe.prototype,"messages",void 0),(0,n._)([(0,r.MZ)()],fe.prototype,"view",void 0),(0,n._)([(0,r.MZ)()],fe.prototype,"analysis",void 0),(0,n._)([(0,r.MZ)()],fe.prototype,"analysisView",void 0),(0,n._)([(0,r.MZ)()],fe.prototype,"loadingMessages",void 0),(0,n._)([(0,r.MZ)()],fe.prototype,"visible",null),(0,n._)([(0,r.MZ)()],fe.prototype,"viewMode",null),(0,n._)([(0,r.MZ)()],fe.prototype,"actualVisualizedMeasurement",null),(0,n._)([(0,r.MZ)()],fe.prototype,"visualElementOrientation",void 0),(0,n._)([(0,r.MZ)()],fe.prototype,"triangleCollapseRatioThreshold",void 0),(0,n._)([(0,r.MZ)()],fe.prototype,"allowVisualElementsOrientationChange",null),(0,n._)([(0,r.MZ)()],fe.prototype,"labels",null),(0,n._)([(0,r.MZ)()],fe.prototype,"_labelsText",null),(0,n._)([(0,r.MZ)()],fe.prototype,"_actualVisualElementsOrientation",null),(0,n._)([(0,r.MZ)()],fe.prototype,"_measurementArrowStripeLength",null),fe=(0,n._)([(0,l.$)("esri.views.3d.analysis.DirectLineMeasurement.DirectLineMeasurementVisualization")],fe);const Le=Math.cos((0,P.kU)(12)),Ce=(0,L.r_)(),Se=(0,L.r_)(),Ae=(0,L.QG)(),Ve=(0,L.QG)(),Oe=(0,L.QG)();var Ee,De=i(56002),ze=i(19451),Ze=i(19247),Te=i(32535),Re=i(77515),xe=i(70836),Ge=i(7947),He=i(69539),ke=i(44230),Be=i(56121),Ne=i(38317),je=i(91175),Ie=i(1307);!function(e){e.Manipulators="manipulators",e.AnalysisViewDestroyed="analysis-view-destroyed",e.AnalysisView="analysis-view"}(Ee||(Ee={}));let Qe=class extends s.A{constructor(e){super(e),this.cursorPoint=null,this._visible=!1,this._laserLine=null,this.laserLineEnabled=!0,this._lastDraggedHandle=null}initialize(){this._laserLine=new Ie.o({view:this.view,attached:!0,isDecoration:!0}),this._updateVisibility(this._visible),this._connectToAnalysisView(),this.addHandles((0,p.wB)(()=>this._params,e=>{let{laserLineGlowColor:t,laserLineInnerColor:i,laserLineGlobalAlpha:n}=e;const s=this._laserLine,a=s.style;s.style={...a,innerColor:i,glowColor:t,globalAlpha:n}}))}destroy(){this._laserLine=(0,a.pR)(this._laserLine)}get _params(){const{accentColor:e}=this.view.effectiveTheme;return{laserLineGlowColor:He.A.toUnitRGB(e),laserLineGlowWidth:8,laserLineGlowFalloff:8,laserLineInnerColor:He.A.toUnitRGB((0,M.bJ)(e)),laserLineInnerWidth:.75,laserLineGlobalAlpha:.75*e.a,handleColor:(0,M.f6)(e,.5),handleRadius:5}}get visible(){return this._visible}set visible(e){e?this.show():this.hide()}get testData(){}get _cursorPosition(){const e=(0,A.vt)(),t=this.cursorPoint;return t&&this.view.renderCoordsHelper.toRenderCoords(t,e),e}get _startPosition(){const e=(0,A.vt)(),t=this.analysis.startPoint;return t&&this.view.renderCoordsHelper.toRenderCoords(t,e),e}get _endPosition(){const e=(0,A.vt)(),t=this.analysis.endPoint;return t&&this.view.renderCoordsHelper.toRenderCoords(t,e),e}get _laserLineParams(){const e=this._focusPosition,{active:t,lineState:i}=this.toolState,n=this.analysisViewData,s=this.laserLineEnabled&&!!e&&"measured"!==i&&t;if(!s||!this.visible||null==n||n.destroyed)return{heightManifoldTarget:null,pointDistanceLine:null,lineVerticalPlaneSegment:null};const a=n.actualVisualizedMeasurement,r="local"!==this.view.viewingMode&&s&&!!this.analysis.startPoint&&"geodesic"===a,o=s&&n.viewMode===w.Triangle;return{heightManifoldTarget:"euclidean"===a?e:null,pointDistanceLine:r?this._pointDistanceLine:null,lineVerticalPlaneSegment:o?(0,ke.Cr)(this._startPosition,this._endPosition):null}}get _focusPosition(){const{lineState:e}=this.toolState,t=this.analysisViewData,i=null!=t&&!t.destroyed&&t.measurementMode===u.G.Euclidean&&t.viewMode===w.Direct;switch(e){case"drawing":return i?this._startPosition:this.analysis.endPoint?this._endPosition:this._startPosition;case"editing":return i?"start"===this._lastDraggedHandle?this._endPosition:this._startPosition:"start"===this._lastDraggedHandle?this._startPosition:this._endPosition;default:return null!=this.cursorPoint?this._cursorPosition:null}}get _pointDistanceLine(){return{origin:"drawing"===this.toolState.lineState||"end"===this._lastDraggedHandle?this._startPosition:this._endPosition,target:this._focusPosition}}createManipulators(){const e=this._params,{view:t}=this,i=()=>{const i=(0,Ne.UM)(e.handleColor),n=[new je.M((0,k.CM)(i,1,32,32))],s=new Be.q({view:t,renderObjects:n});return s.available=!1,s.radius=e.handleRadius,[s,i]},[n,s]=i(),[a,r]=i(),o=new Be.q({view:this.view,available:!1,interactive:!1});null!=this.analysis.startPoint&&(n.location=this.analysis.startPoint,n.available=!0),null!=this.analysis.endPoint&&(a.location=this.analysis.endPoint,a.available=!0);const l=()=>{let e=this._lastDraggedHandle;n.grabbing&&!a.grabbing&&(e="start"),a.grabbing&&!n.grabbing&&(e="end"),n.grabbing||a.grabbing||(e=null),this._lastDraggedHandle=e},d=n.events.on("grab-changed",l),c=a.events.on("grab-changed",l);return this.addHandles([d,c,(0,p.wB)(()=>(0,M.pf)(this._params.handleColor),e=>{s.setParameters({color:e}),r.setParameters({color:e})},{equals:M.we})],Ee.Manipulators),{start:n,end:a,cursor:o}}show(){this.destroyed||this._visible||this._updateVisibility(!0)}hide(){!this.destroyed&&this._visible&&this._updateVisibility(!1)}_connectToAnalysisView(){this.removeHandles(Ee.AnalysisView),this.addHandles([(0,p.wB)(()=>this.analysisViewData?.destroyed,e=>{e&&this.removeHandles(Ee.AnalysisView)},p.Vh),(0,p.wB)(()=>["measured"===this.toolState.lineState,this.analysisViewData],e=>{let[t,i]=e;null==i||i.destroyed||(i.allowVisualElementsOrientationChange=!t)},p.Vh),(0,p.wB)(()=>this._laserLineParams,e=>{const t=this._laserLine;t.heightManifoldTarget=e.heightManifoldTarget,t.pointDistanceLine=e.pointDistanceLine,t.lineVerticalPlaneSegment=e.lineVerticalPlaneSegment},p.Vh)],Ee.AnalysisView)}_updateVisibility(e){this.initialized&&(this._visible=e,e?this._laserLine.style={innerColor:this._params.laserLineInnerColor,innerWidth:this._params.laserLineInnerWidth,glowColor:this._params.laserLineGlowColor,glowWidth:this._params.laserLineGlowWidth,glowFalloff:this._params.laserLineGlowFalloff,globalAlpha:this._params.laserLineGlobalAlpha}:this.view.cursor=null,this._laserLine.visible=e)}};(0,n._)([(0,r.MZ)({constructOnly:!0})],Qe.prototype,"view",void 0),(0,n._)([(0,r.MZ)()],Qe.prototype,"_params",null),(0,n._)([(0,r.MZ)({constructOnly:!0})],Qe.prototype,"analysis",void 0),(0,n._)([(0,r.MZ)({constructOnly:!0})],Qe.prototype,"analysisViewData",void 0),(0,n._)([(0,r.MZ)()],Qe.prototype,"cursorPoint",void 0),(0,n._)([(0,r.MZ)()],Qe.prototype,"toolState",void 0),(0,n._)([(0,r.MZ)()],Qe.prototype,"visible",null),(0,n._)([(0,r.MZ)()],Qe.prototype,"testData",null),(0,n._)([(0,r.MZ)()],Qe.prototype,"_visible",void 0),(0,n._)([(0,r.MZ)()],Qe.prototype,"_laserLine",void 0),(0,n._)([(0,r.MZ)({constructOnly:!0})],Qe.prototype,"laserLineEnabled",void 0),(0,n._)([(0,r.MZ)()],Qe.prototype,"_cursorPosition",null),(0,n._)([(0,r.MZ)()],Qe.prototype,"_startPosition",null),(0,n._)([(0,r.MZ)()],Qe.prototype,"_endPosition",null),(0,n._)([(0,r.MZ)()],Qe.prototype,"_lastDraggedHandle",void 0),(0,n._)([(0,r.MZ)()],Qe.prototype,"_laserLineParams",null),(0,n._)([(0,r.MZ)()],Qe.prototype,"_focusPosition",null),(0,n._)([(0,r.MZ)()],Qe.prototype,"_pointDistanceLine",null),Qe=(0,n._)([(0,l.$)("esri.views.3d.interactive.measurementTools.directLineMeasurement3D.DirectLineMeasurement3DView")],Qe);var We=i(80935),Ue=i(5109),qe=i(89238),$e=i(17046),Fe=i(974),Je=i(59833),Xe=i(13284),Ye=i(61237),Ke=i(82887),et=i(70330),tt=i(11500);let it=class extends Ue.k{constructor(e){super(e),this._updatingHandles=new ze.U,this._emulatedDrag=null,this.lineState="initial",this.removeIncompleteOnCancel=!1,this.startPointSurfaceLocation=null,this.endPointSurfaceLocation=null,this.cursorPointSurfaceLocation=null,this.startManipulator=null,this.endManipulator=null,this.cursorManipulator=null,this._getSnappingContext=(0,De.B)(e=>new Xe.e({elevationInfo:{mode:"absolute-height",offset:0},pointer:e,editGeometryOperations:new Je.p(new Fe.ZE("point",(0,qe.BV)(!0,!1,this.view.spatialReference)),this.view.state.viewingMode),visualizer:new xe.s}))}initialize(){const{view:e,analysis:t,analysisViewData:i,visible:n}=this;this.measurementView=new Qe({toolState:this,view:e,analysis:t,analysisViewData:i,visible:n});const s=(0,Ke.X)(e);this._snappingManagerResult=s,this.addHandles(s);const{start:a,end:r,cursor:o}=this.measurementView.createManipulators(),l=(e,t,i)=>{const n=(0,$e.Xt)(e,(e,n,s,a)=>{const r=(0,Ge.z7)(e),o=this._snappingManager,l=this._getSnappingContext(a),d=this._updatingHandles,{lineState:c}=this;s=s.next(r).next((0,$e.VG)(this,[i,t])).next(i=>{if("cursorPoint"!==t){const i=this.analysis[t];null!=i&&(e.location=i)}return i});const u=(0,Ge.xk)(this.view);let h=n.next(r).next(e=>{const n=u(e);return n||"drawing"!==this.lineState&&"initial"!==this.lineState||(this[t]=null,this[i]=null),n});if("touch"!==a||"editing"===c){const{snappingStep:e,cancelSnapping:t}=(0,Ye.L)({snappingManager:o,snappingContext:l,updatingHandles:d});s=s.next(t),h=h.next(...e)}h.next(e=>"start"!==e.action?e:null).next(n=>{const s=(0,Te.EL)(n.mapEnd,new Ze.A);this[t]=s,e.location=s,this[i]=this._surfaceLocation(s,n.surfaceType)})});return"cursorPoint"===t?[n]:[n,e.events.on("grab-changed",()=>{const e=a.grabbing||r.grabbing;this.lineState=e?"editing":"measured"}),(0,p.wB)(()=>this.analysis[t],t=>{t&&(e.location=t)})]};this.startManipulator=a,this.endManipulator=r,this.cursorManipulator=o,this.manipulators.add(a),this.manipulators.add(r),this.manipulators.add(o),this.addHandles([...l(a,"startPoint","startPointSurfaceLocation"),...l(r,"endPoint","endPointSurfaceLocation"),...l(o,"cursorPoint","cursorPointSurfaceLocation"),(0,p.z7)(()=>"measured"===this.state,()=>{this.finishToolCreation(),this.active&&(this.view.activeTool=null)},p.pc),(0,p.wB)(()=>({startPointAvailable:null!=this.startPoint,endPointAvailable:null!=this.endPoint}),e=>{let{startPointAvailable:t,endPointAvailable:i}=e;this.startManipulator.available=t,this.endManipulator.available=i},p.pc)]),(0,et.BY)(this)}destroy(){this._updatingHandles=(0,a.pR)(this._updatingHandles),this.measurementView=(0,a.pR)(this.measurementView)}get _snappingManager(){return this._snappingManagerResult.snappingManager}get state(){const{analysis:e}=this;if(null==e.startPoint&&null==e.endPoint)return"ready";const{lineState:t}=this;return this.validMeasurement&&"editing"!==t&&"drawing"!==t?"measured":"measuring"}get cursor(){return!this.active||"ready"!==this.state&&"measured"===this.lineState?null:"crosshair"}get startPoint(){return this.analysis.startPoint}set startPoint(e){this.analysis.startPoint=e}get endPoint(){return this.analysis.endPoint}set endPoint(e){this.analysis.endPoint=e}get cursorPoint(){return this.measurementView.cursorPoint}set cursorPoint(e){this.measurementView.cursorPoint=e}get snappingOptions(){return this._snappingManager.options}get validMeasurement(){return null!=this.analysis.startPoint&&null!=this.analysis.endPoint}get updating(){return this._updatingHandles.updating||this._snappingManager.updating}resetCreated(){super.resetCreated(),this.lineState="initial",this.cursorPoint=null,"measured"===this.state&&this.finishToolCreation()}onShow(){this.measurementView.show()}onHide(){this.measurementView.hide()}onDeactivate(){this._emulatedDrag?.cancel(),this._emulatedDrag=null}onInputEvent(e){switch(e.type){case"immediate-click":this._handleImmediateClick(e);break;case"pointer-move":this._handlePointerMove(e)}}_handlePointerMove(e){if(!this.active||this.view.navigating)return;const{pointerType:t}=e;if("mouse"!==t)return;const i=(0,tt.ZV)(e),{lineState:n,cursorManipulator:s,endManipulator:a}=this;let r=!1;null==this.cursorPoint&&(this._emulatedDrag?.cancel(),this._emulatedDrag=nt(s,t,i),r=!0),"initial"===n&&(this._emulatedDrag?.update(i),r=!0),"drawing"===n&&(a.events.emit("drag",{action:"update",start:i,screenPoint:i}),r=!0),r&&e.stopPropagation()}_handleImmediateClick(e){if(!this.active||!(0,Re.s7)(e))return;const t=(0,tt.ZV)(e),{pointerType:i}=e,{cursorManipulator:n,startManipulator:s,endManipulator:a,lineState:r}=this;let o=!1;switch(null==this.cursorPoint&&(this._emulatedDrag?.cancel(),this._emulatedDrag=nt(n,i,t)),r){case"initial":if(this._emulatedDrag?.update(t),null!=this.cursorPoint){this._emulatedDrag?.end(t),this._emulatedDrag=null,this.endPoint=null;const{cursorPoint:e}=this;this.startPoint=e,this.startPointSurfaceLocation=this.cursorPointSurfaceLocation,s.location=e,s.interactive=!1,a.interactive=!1,this.lineState="drawing",this._emulatedDrag=nt(a,i,t),o=!0}break;case"drawing":this._emulatedDrag?.update(t),null!=this.endPoint&&(this._emulatedDrag?.end(t),this._emulatedDrag=null,s.interactive=!0,a.interactive=!0,this.lineState="measured",o=!0)}o&&e.stopPropagation()}_surfaceLocation(e,t){return t===Ge.Og.GROUND?"on-the-surface":(e.z??0)>=this._getElevation(e)?"above-the-surface":"below-the-surface"}_getElevation(e){return this.view.basemapTerrain.ready?(0,We.R1)(this.view.elevationProvider,e)??0:0}get test(){}};function nt(e,t,i){return e.events.emit("drag",{action:"start",pointerType:t,start:i,screenPoint:i}),{update:t=>e.events.emit("drag",{action:"update",start:t,screenPoint:t}),end:t=>e.events.emit("drag",{action:"end",start:t,screenPoint:t}),cancel:()=>e.events.emit("drag",{action:"cancel"})}}(0,n._)([(0,r.MZ)({readOnly:!0})],it.prototype,"state",null),(0,n._)([(0,r.MZ)()],it.prototype,"lineState",void 0),(0,n._)([(0,r.MZ)({readOnly:!0})],it.prototype,"cursor",null),(0,n._)([(0,r.MZ)()],it.prototype,"startPoint",null),(0,n._)([(0,r.MZ)()],it.prototype,"endPoint",null),(0,n._)([(0,r.MZ)()],it.prototype,"cursorPoint",null),(0,n._)([(0,r.MZ)({constructOnly:!0})],it.prototype,"analysis",void 0),(0,n._)([(0,r.MZ)({constructOnly:!0})],it.prototype,"analysisViewData",void 0),(0,n._)([(0,r.MZ)()],it.prototype,"measurementView",void 0),(0,n._)([(0,r.MZ)()],it.prototype,"removeIncompleteOnCancel",void 0),(0,n._)([(0,r.MZ)({constructOnly:!0})],it.prototype,"view",void 0),(0,n._)([(0,r.MZ)({readOnly:!0})],it.prototype,"validMeasurement",null),(0,n._)([(0,r.MZ)({value:null})],it.prototype,"startPointSurfaceLocation",void 0),(0,n._)([(0,r.MZ)({value:null})],it.prototype,"endPointSurfaceLocation",void 0),(0,n._)([(0,r.MZ)({value:null})],it.prototype,"cursorPointSurfaceLocation",void 0),(0,n._)([(0,r.MZ)()],it.prototype,"updating",null),it=(0,n._)([(0,l.$)("esri.views.3d.interactive.measurementTools.directLineMeasurement3D.DirectLineMeasurement3DTool")],it);var st=i(10260),at=i(23739);let rt=class extends((0,c.P)(s.A)){constructor(e){super(e),this.type="direct-line-measurement-view-3d",this.analysis=null,this.tool=null,this.result=null,this.measurementMode=u.G.Auto,this.elevationAlignedStartPoint=null,this.elevationAlignedEndPoint=null,this.userOperation=null}initialize(){const{analysis:e,view:t}=this;this._analysisVisualization=new fe({view:t,analysis:e,analysisView:this}),this.addResolvingPromise((0,at.V)().then(i=>{this.destroyed||(this._analysisController=new m({view:t,analysis:e,viewData:this,geodesicLengthMeasurementUtils:i}))})),this.addHandles((0,st.Hd)(this,it))}destroy(){(0,st.aS)(this),this.userOperation=(0,a.DC)(this.userOperation),this._analysisController=(0,a.pR)(this._analysisController),this._analysisVisualization=(0,a.pR)(this._analysisVisualization)}get updating(){return!!this._analysisVisualization?.loadingMessages}get viewMode(){return this._analysisVisualization.viewMode}get actualVisualizedMeasurement(){return this._analysisVisualization.actualVisualizedMeasurement}get visualElementOrientation(){return this._analysisVisualization.visualElementOrientation}set visualElementOrientation(e){this._analysisVisualization.visualElementOrientation=e}get allowVisualElementsOrientationChange(){return this._analysisVisualization.allowVisualElementsOrientationChange}set allowVisualElementsOrientationChange(e){this._analysisVisualization.allowVisualElementsOrientationChange=e}get triangleCollapseRatioThreshold(){return this._analysisVisualization.triangleCollapseRatioThreshold}set triangleCollapseRatioThreshold(e){this._analysisVisualization.triangleCollapseRatioThreshold=e}get directLabelText(){return this._analysisVisualization.labels.direct?.text??""}get horizontalLabelText(){return this._analysisVisualization.labels.horizontal?.text??""}get verticalLabelText(){return this._analysisVisualization.labels.vertical?.text??""}get unit(){return this.analysis.unit??(0,d.c)(this.view)}get testData(){}place(e){return(0,st.ZX)(this,{placementOptions:e})}};(0,n._)([(0,r.MZ)()],rt.prototype,"_analysisVisualization",void 0),(0,n._)([(0,r.MZ)()],rt.prototype,"_analysisController",void 0),(0,n._)([(0,r.MZ)()],rt.prototype,"updating",null),(0,n._)([(0,r.MZ)({readOnly:!0})],rt.prototype,"type",void 0),(0,n._)([(0,r.MZ)({constructOnly:!0,nonNullable:!0})],rt.prototype,"analysis",void 0),(0,n._)([(0,r.MZ)()],rt.prototype,"tool",void 0),(0,n._)([(0,r.MZ)()],rt.prototype,"result",void 0),(0,n._)([(0,r.MZ)()],rt.prototype,"measurementMode",void 0),(0,n._)([(0,r.MZ)()],rt.prototype,"elevationAlignedStartPoint",void 0),(0,n._)([(0,r.MZ)()],rt.prototype,"elevationAlignedEndPoint",void 0),(0,n._)([(0,r.MZ)({readOnly:!0})],rt.prototype,"viewMode",null),(0,n._)([(0,r.MZ)({readOnly:!0})],rt.prototype,"actualVisualizedMeasurement",null),(0,n._)([(0,r.MZ)()],rt.prototype,"visualElementOrientation",null),(0,n._)([(0,r.MZ)()],rt.prototype,"allowVisualElementsOrientationChange",null),(0,n._)([(0,r.MZ)()],rt.prototype,"triangleCollapseRatioThreshold",null),(0,n._)([(0,r.MZ)({readOnly:!0})],rt.prototype,"directLabelText",null),(0,n._)([(0,r.MZ)({readOnly:!0})],rt.prototype,"horizontalLabelText",null),(0,n._)([(0,r.MZ)({readOnly:!0})],rt.prototype,"verticalLabelText",null),(0,n._)([(0,r.MZ)()],rt.prototype,"unit",null),(0,n._)([(0,r.MZ)()],rt.prototype,"userOperation",void 0),rt=(0,n._)([(0,l.$)("esri.views.3d.analysis.DirectLineMeasurementAnalysisView3D")],rt);const ot=rt}}]);
//# sourceMappingURL=97749.249177fa.chunk.js.map